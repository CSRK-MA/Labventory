<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="300" viewBox="0 0 1000 300">
  <style>
    .actor { font: 14px sans-serif; font-weight: bold; }
    .lifeline { stroke: #888; stroke-dasharray: 4 4; }
    .box { fill: #f7f9fc; stroke: #2b6cb0; stroke-width:1.5; rx:6; }
    .arrow { stroke: #2b6cb0; fill: none; stroke-width:1.6; marker-end: url(#arrowhead); }
    .note { font:12px sans-serif; fill:#222 }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2b6cb0" />
    </marker>
  </defs>

  <!-- Actors -->
  <text x="80" y="30" class="actor">User</text>
  <text x="280" y="30" class="actor">QR Scanner</text>
  <text x="520" y="30" class="actor">Firebase</text>
  <text x="760" y="30" class="actor">UI / Display</text>

  <!-- Lifelines -->
  <line x1="110" y1="45" x2="110" y2="260" class="lifeline" />
  <line x1="310" y1="45" x2="310" y2="260" class="lifeline" />
  <line x1="550" y1="45" x2="550" y2="260" class="lifeline" />
  <line x1="790" y1="45" x2="790" y2="260" class="lifeline" />

  <!-- Sequence arrows -->
  <!-- User -> QR Scanner: Scan QR -->
  <path d="M120 90 L300 90" class="arrow" />
  <text x="180" y="82" class="note">Scan QR</text>

  <!-- QR Scanner -> Firebase: Send token -->
  <path d="M320 120 L540 120" class="arrow" />
  <text x="370" y="112" class="note">Send QR token</text>

  <!-- Firebase -> Update Record (internal) -->
  <rect x="470" y="140" width="160" height="40" class="box" />
  <text x="500" y="165" class="note">Update Record</text>
  <path d="M550 140 L550 120" class="arrow" />
  <text x="560" y="130" class="note">DB write</text>

  <!-- Firebase -> UI: Confirmation event -->
  <path d="M560 180 L770 180" class="arrow" />
  <text x="640" y="172" class="note">Emit confirmation</text>

  <!-- UI -> Display confirmation -->
  <rect x="720" y="200" width="140" height="40" class="box" />
  <text x="740" y="225" class="note">Display Confirmation</text>

  <!-- Notes -->
  <text x="20" y="280" font-size="11" fill="#555">Sequence: User → QR Scanner → Firebase → Update Record → Display Confirmation</text>
</svg>