(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function Qf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Dh={exports:{}},Xa={},Mh={exports:{}},ze={};var dy;function ww(){if(dy)return ze;dy=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=x&&O[x]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function V(O,X,ce){this.props=O,this.context=X,this.refs=U,this.updater=ce||k}V.prototype.isReactComponent={},V.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},V.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function q(){}q.prototype=V.prototype;function J(O,X,ce){this.props=O,this.context=X,this.refs=U,this.updater=ce||k}var ae=J.prototype=new q;ae.constructor=J,j(ae,V.prototype),ae.isPureReactComponent=!0;var Y=Array.isArray,W=Object.prototype.hasOwnProperty,ie={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(O,X,ce){var ge,_e={},Ae=null,Fe=null;if(X!=null)for(ge in X.ref!==void 0&&(Fe=X.ref),X.key!==void 0&&(Ae=""+X.key),X)W.call(X,ge)&&!R.hasOwnProperty(ge)&&(_e[ge]=X[ge]);var Ee=arguments.length-2;if(Ee===1)_e.children=ce;else if(1<Ee){for(var Q=Array(Ee),ve=0;ve<Ee;ve++)Q[ve]=arguments[ve+2];_e.children=Q}if(O&&O.defaultProps)for(ge in Ee=O.defaultProps,Ee)_e[ge]===void 0&&(_e[ge]=Ee[ge]);return{$$typeof:r,type:O,key:Ae,ref:Fe,props:_e,_owner:ie.current}}function A(O,X){return{$$typeof:r,type:O.type,key:X,ref:O.ref,props:O.props,_owner:O._owner}}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function S(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return X[ce]})}var M=/\/+/g;function T(O,X){return typeof O=="object"&&O!==null&&O.key!=null?S(""+O.key):X.toString(36)}function ee(O,X,ce,ge,_e){var Ae=typeof O;(Ae==="undefined"||Ae==="boolean")&&(O=null);var Fe=!1;if(O===null)Fe=!0;else switch(Ae){case"string":case"number":Fe=!0;break;case"object":switch(O.$$typeof){case r:case e:Fe=!0}}if(Fe)return Fe=O,_e=_e(Fe),O=ge===""?"."+T(Fe,0):ge,Y(_e)?(ce="",O!=null&&(ce=O.replace(M,"$&/")+"/"),ee(_e,X,ce,"",function(ve){return ve})):_e!=null&&(D(_e)&&(_e=A(_e,ce+(!_e.key||Fe&&Fe.key===_e.key?"":(""+_e.key).replace(M,"$&/")+"/")+O)),X.push(_e)),1;if(Fe=0,ge=ge===""?".":ge+":",Y(O))for(var Ee=0;Ee<O.length;Ee++){Ae=O[Ee];var Q=ge+T(Ae,Ee);Fe+=ee(Ae,X,ce,Q,_e)}else if(Q=b(O),typeof Q=="function")for(O=Q.call(O),Ee=0;!(Ae=O.next()).done;)Ae=Ae.value,Q=ge+T(Ae,Ee++),Fe+=ee(Ae,X,ce,Q,_e);else if(Ae==="object")throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Fe}function Se(O,X,ce){if(O==null)return O;var ge=[],_e=0;return ee(O,ge,"","",function(Ae){return X.call(ce,Ae,_e++)}),ge}function Ne(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var De={current:null},oe={transition:null},pe={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function G(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:Se,forEach:function(O,X,ce){Se(O,function(){X.apply(this,arguments)},ce)},count:function(O){var X=0;return Se(O,function(){X++}),X},toArray:function(O){return Se(O,function(X){return X})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ze.Component=V,ze.Fragment=t,ze.Profiler=o,ze.PureComponent=J,ze.StrictMode=s,ze.Suspense=m,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,ze.act=G,ze.cloneElement=function(O,X,ce){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ge=j({},O.props),_e=O.key,Ae=O.ref,Fe=O._owner;if(X!=null){if(X.ref!==void 0&&(Ae=X.ref,Fe=ie.current),X.key!==void 0&&(_e=""+X.key),O.type&&O.type.defaultProps)var Ee=O.type.defaultProps;for(Q in X)W.call(X,Q)&&!R.hasOwnProperty(Q)&&(ge[Q]=X[Q]===void 0&&Ee!==void 0?Ee[Q]:X[Q])}var Q=arguments.length-2;if(Q===1)ge.children=ce;else if(1<Q){Ee=Array(Q);for(var ve=0;ve<Q;ve++)Ee[ve]=arguments[ve+2];ge.children=Ee}return{$$typeof:r,type:O.type,key:_e,ref:Ae,props:ge,_owner:Fe}},ze.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:c,_context:O},O.Consumer=O},ze.createElement=I,ze.createFactory=function(O){var X=I.bind(null,O);return X.type=O,X},ze.createRef=function(){return{current:null}},ze.forwardRef=function(O){return{$$typeof:p,render:O}},ze.isValidElement=D,ze.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:Ne}},ze.memo=function(O,X){return{$$typeof:g,type:O,compare:X===void 0?null:X}},ze.startTransition=function(O){var X=oe.transition;oe.transition={};try{O()}finally{oe.transition=X}},ze.unstable_act=G,ze.useCallback=function(O,X){return De.current.useCallback(O,X)},ze.useContext=function(O){return De.current.useContext(O)},ze.useDebugValue=function(){},ze.useDeferredValue=function(O){return De.current.useDeferredValue(O)},ze.useEffect=function(O,X){return De.current.useEffect(O,X)},ze.useId=function(){return De.current.useId()},ze.useImperativeHandle=function(O,X,ce){return De.current.useImperativeHandle(O,X,ce)},ze.useInsertionEffect=function(O,X){return De.current.useInsertionEffect(O,X)},ze.useLayoutEffect=function(O,X){return De.current.useLayoutEffect(O,X)},ze.useMemo=function(O,X){return De.current.useMemo(O,X)},ze.useReducer=function(O,X,ce){return De.current.useReducer(O,X,ce)},ze.useRef=function(O){return De.current.useRef(O)},ze.useState=function(O){return De.current.useState(O)},ze.useSyncExternalStore=function(O,X,ce){return De.current.useSyncExternalStore(O,X,ce)},ze.useTransition=function(){return De.current.useTransition()},ze.version="18.3.1",ze}var hy;function Tl(){return hy||(hy=1,Mh.exports=ww()),Mh.exports}var fy;function Ew(){if(fy)return Xa;fy=1;var r=Tl(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(p,m,g){var _,x={},b=null,k=null;g!==void 0&&(b=""+g),m.key!==void 0&&(b=""+m.key),m.ref!==void 0&&(k=m.ref);for(_ in m)s.call(m,_)&&!c.hasOwnProperty(_)&&(x[_]=m[_]);if(p&&p.defaultProps)for(_ in m=p.defaultProps,m)x[_]===void 0&&(x[_]=m[_]);return{$$typeof:e,type:p,key:b,ref:k,props:x,_owner:o.current}}return Xa.Fragment=t,Xa.jsx=h,Xa.jsxs=h,Xa}var py;function bw(){return py||(py=1,Dh.exports=Ew()),Dh.exports}var l=bw(),Wc={},Lh={exports:{}},vn={},Oh={exports:{}},Vh={};var my;function Tw(){return my||(my=1,(function(r){function e(oe,pe){var G=oe.length;oe.push(pe);e:for(;0<G;){var O=G-1>>>1,X=oe[O];if(0<o(X,pe))oe[O]=pe,oe[G]=X,G=O;else break e}}function t(oe){return oe.length===0?null:oe[0]}function s(oe){if(oe.length===0)return null;var pe=oe[0],G=oe.pop();if(G!==pe){oe[0]=G;e:for(var O=0,X=oe.length,ce=X>>>1;O<ce;){var ge=2*(O+1)-1,_e=oe[ge],Ae=ge+1,Fe=oe[Ae];if(0>o(_e,G))Ae<X&&0>o(Fe,_e)?(oe[O]=Fe,oe[Ae]=G,O=Ae):(oe[O]=_e,oe[ge]=G,O=ge);else if(Ae<X&&0>o(Fe,G))oe[O]=Fe,oe[Ae]=G,O=Ae;else break e}}return pe}function o(oe,pe){var G=oe.sortIndex-pe.sortIndex;return G!==0?G:oe.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var m=[],g=[],_=1,x=null,b=3,k=!1,j=!1,U=!1,V=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(oe){for(var pe=t(g);pe!==null;){if(pe.callback===null)s(g);else if(pe.startTime<=oe)s(g),pe.sortIndex=pe.expirationTime,e(m,pe);else break;pe=t(g)}}function Y(oe){if(U=!1,ae(oe),!j)if(t(m)!==null)j=!0,Ne(W);else{var pe=t(g);pe!==null&&De(Y,pe.startTime-oe)}}function W(oe,pe){j=!1,U&&(U=!1,q(I),I=-1),k=!0;var G=b;try{for(ae(pe),x=t(m);x!==null&&(!(x.expirationTime>pe)||oe&&!S());){var O=x.callback;if(typeof O=="function"){x.callback=null,b=x.priorityLevel;var X=O(x.expirationTime<=pe);pe=r.unstable_now(),typeof X=="function"?x.callback=X:x===t(m)&&s(m),ae(pe)}else s(m);x=t(m)}if(x!==null)var ce=!0;else{var ge=t(g);ge!==null&&De(Y,ge.startTime-pe),ce=!1}return ce}finally{x=null,b=G,k=!1}}var ie=!1,R=null,I=-1,A=5,D=-1;function S(){return!(r.unstable_now()-D<A)}function M(){if(R!==null){var oe=r.unstable_now();D=oe;var pe=!0;try{pe=R(!0,oe)}finally{pe?T():(ie=!1,R=null)}}else ie=!1}var T;if(typeof J=="function")T=function(){J(M)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,Se=ee.port2;ee.port1.onmessage=M,T=function(){Se.postMessage(null)}}else T=function(){V(M,0)};function Ne(oe){R=oe,ie||(ie=!0,T())}function De(oe,pe){I=V(function(){oe(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(oe){oe.callback=null},r.unstable_continueExecution=function(){j||k||(j=!0,Ne(W))},r.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<oe?Math.floor(1e3/oe):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(m)},r.unstable_next=function(oe){switch(b){case 1:case 2:case 3:var pe=3;break;default:pe=b}var G=b;b=pe;try{return oe()}finally{b=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(oe,pe){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var G=b;b=oe;try{return pe()}finally{b=G}},r.unstable_scheduleCallback=function(oe,pe,G){var O=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?O+G:O):G=O,oe){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,oe={id:_++,callback:pe,priorityLevel:oe,startTime:G,expirationTime:X,sortIndex:-1},G>O?(oe.sortIndex=G,e(g,oe),t(m)===null&&oe===t(g)&&(U?(q(I),I=-1):U=!0,De(Y,G-O))):(oe.sortIndex=X,e(m,oe),j||k||(j=!0,Ne(W))),oe},r.unstable_shouldYield=S,r.unstable_wrapCallback=function(oe){var pe=b;return function(){var G=b;b=pe;try{return oe.apply(this,arguments)}finally{b=G}}}})(Vh)),Vh}var gy;function Nw(){return gy||(gy=1,Oh.exports=Tw()),Oh.exports}var yy;function Iw(){if(yy)return vn;yy=1;var r=Tl(),e=Nw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function c(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},x={};function b(n){return m.call(x,n)?!0:m.call(_,n)?!1:g.test(n)?x[n]=!0:(_[n]=!0,!1)}function k(n,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function j(n,i,a,d){if(i===null||typeof i>"u"||k(n,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(n,i,a,d,f,y,E){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=y,this.removeEmptyString=E}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){V[n]=new U(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];V[i]=new U(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){V[n]=new U(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){V[n]=new U(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){V[n]=new U(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){V[n]=new U(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){V[n]=new U(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){V[n]=new U(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){V[n]=new U(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function J(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(q,J);V[i]=new U(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(q,J);V[i]=new U(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(q,J);V[i]=new U(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){V[n]=new U(n,1,!1,n.toLowerCase(),null,!1,!1)}),V.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){V[n]=new U(n,1,!1,n.toLowerCase(),null,!0,!0)});function ae(n,i,a,d){var f=V.hasOwnProperty(i)?V[i]:null;(f!==null?f.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(j(i,a,f,d)&&(a=null),d||f===null?b(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,d=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?n.setAttributeNS(d,i,a):n.setAttribute(i,a))))}var Y=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),ie=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),S=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),oe=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=oe&&n[oe]||n["@@iterator"],typeof n=="function"?n:null)}var G=Object.assign,O;function X(n){if(O===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);O=i&&i[1]||""}return`
`+O+n}var ce=!1;function ge(n,i){if(!n||ce)return"";ce=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch($){var d=$}Reflect.construct(n,[],i)}else{try{i.call()}catch($){d=$}n.call(i.prototype)}else{try{throw Error()}catch($){d=$}n()}}catch($){if($&&d&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),y=d.stack.split(`
`),E=f.length-1,C=y.length-1;1<=E&&0<=C&&f[E]!==y[C];)C--;for(;1<=E&&0<=C;E--,C--)if(f[E]!==y[C]){if(E!==1||C!==1)do if(E--,C--,0>C||f[E]!==y[C]){var P=`
`+f[E].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=E&&0<=C);break}}}finally{ce=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?X(n):""}function _e(n){switch(n.tag){case 5:return X(n.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return n=ge(n.type,!1),n;case 11:return n=ge(n.type.render,!1),n;case 1:return n=ge(n.type,!0),n;default:return""}}function Ae(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case ie:return"Portal";case A:return"Profiler";case I:return"StrictMode";case T:return"Suspense";case ee:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case S:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Se:return i=n.displayName||null,i!==null?i:Ae(n.type)||"Memo";case Ne:i=n._payload,n=n._init;try{return Ae(n(i))}catch{}}return null}function Fe(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ee(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Q(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ve(n){var i=Q(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){d=""+E,y.call(this,E)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Be(n){n._valueTracker||(n._valueTracker=ve(n))}function it(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return n&&(d=Q(n)?n.checked?"true":"false":n.value),n=d,n!==a?(i.setValue(n),!0):!1}function sn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bn(n,i){var a=i.checked;return G({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ro(n,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=Ee(i.value!=null?i.value:a),n._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Gr(n,i){i=i.checked,i!=null&&ae(n,"checked",i,!1)}function Tn(n,i){Gr(n,i);var a=Ee(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(d==="submit"||d==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?Xe(n,i.type,a):i.hasOwnProperty("defaultValue")&&Xe(n,i.type,Ee(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function xs(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Xe(n,i,a){(i!=="number"||sn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var dt=Array.isArray;function Nn(n,i,a,d){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&d&&(n[a].defaultSelected=!0)}else{for(a=""+Ee(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,d&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Ct(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Vn(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(dt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Ee(a)}}function so(n,i){var a=Ee(i.value),d=Ee(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),d!=null&&(n.defaultValue=""+d)}function pr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function mr(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _s(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?mr(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xn,ws=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,d,f)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Xn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zn=["Webkit","ms","Moz","O"];Object.keys(Jn).forEach(function(n){Zn.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Jn[i]=Jn[n]})});function gr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Jn.hasOwnProperty(n)&&Jn[n]?(""+i).trim():i+"px"}function Es(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=gr(a,i[a],d);a==="float"&&(a="cssFloat"),d?n.setProperty(a,f):n[a]=f}}var bs=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hn(n,i){if(i){if(bs[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ts(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function on(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var er=null,tr=null,ot=null;function Ns(n){if(n=La(n)){if(typeof er!="function")throw Error(t(280));var i=n.stateNode;i&&(i=ac(i),er(n.stateNode,n.type,i))}}function Re(n){tr?ot?ot.push(n):ot=[n]:tr=n}function tt(){if(tr){var n=tr,i=ot;if(ot=tr=null,Ns(n),i)for(n=0;n<i.length;n++)Ns(i[n])}}function vt(n,i){return n(i)}function Dt(){}var an=!1;function mt(n,i,a){if(an)return n(i,a);an=!0;try{return vt(n,i,a)}finally{an=!1,(tr!==null||ot!==null)&&(Dt(),tt())}}function Et(n,i){var a=n.stateNode;if(a===null)return null;var d=ac(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var In=!1;if(p)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){In=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{In=!1}function Gt(n,i,a,d,f,y,E,C,P){var $=Array.prototype.slice.call(arguments,3);try{i.apply(a,$)}catch(re){this.onError(re)}}var Fn=!1,Mt=null,gi=!1,Bn=null,Ul={onError:function(n){Fn=!0,Mt=n}};function Fl(n,i,a,d,f,y,E,C,P){Fn=!1,Mt=null,Gt.apply(Ul,arguments)}function ua(n,i,a,d,f,y,E,C,P){if(Fl.apply(this,arguments),Fn){if(Fn){var $=Mt;Fn=!1,Mt=null}else throw Error(t(198));gi||(gi=!0,Bn=$)}}function nr(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function da(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Bl(n){if(nr(n)!==n)throw Error(t(188))}function zl(n){var i=n.alternate;if(!i){if(i=nr(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,d=i;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return Bl(f),n;if(y===d)return Bl(f),i;y=y.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=y;else{for(var E=!1,C=f.child;C;){if(C===a){E=!0,a=f,d=y;break}if(C===d){E=!0,d=f,a=y;break}C=C.sibling}if(!E){for(C=y.child;C;){if(C===a){E=!0,a=y,d=f;break}if(C===d){E=!0,d=y,a=f;break}C=C.sibling}if(!E)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function ql(n){return n=zl(n),n!==null?yi(n):null}function yi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=yi(n);if(i!==null)return i;n=n.sibling}return null}var ha=e.unstable_scheduleCallback,io=e.unstable_cancelCallback,vi=e.unstable_shouldYield,Qr=e.unstable_requestPaint,at=e.unstable_now,dd=e.unstable_getCurrentPriorityLevel,oo=e.unstable_ImmediatePriority,fa=e.unstable_UserBlockingPriority,xi=e.unstable_NormalPriority,pa=e.unstable_LowPriority,ao=e.unstable_IdlePriority,_i=null,Sn=null;function $l(n){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(_i,n,void 0,(n.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:wi,yr=Math.log,zn=Math.LN2;function wi(n){return n>>>=0,n===0?32:31-(yr(n)/zn|0)|0}var vr=64,Is=4194304;function Ye(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Kr(n,i){var a=n.pendingLanes;if(a===0)return 0;var d=0,f=n.suspendedLanes,y=n.pingedLanes,E=a&268435455;if(E!==0){var C=E&~f;C!==0?d=Ye(C):(y&=E,y!==0&&(d=Ye(y)))}else E=a&~f,E!==0?d=Ye(E):y!==0&&(d=Ye(y));if(d===0)return 0;if(i!==0&&i!==d&&(i&f)===0&&(f=d&-d,y=i&-i,f>=y||f===16&&(y&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=d;0<i;)a=31-kn(i),f=1<<a,d|=n[a],i&=~f;return d}function Ei(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(n,i){for(var a=n.suspendedLanes,d=n.pingedLanes,f=n.expirationTimes,y=n.pendingLanes;0<y;){var E=31-kn(y),C=1<<E,P=f[E];P===-1?((C&a)===0||(C&d)!==0)&&(f[E]=Ei(C,i)):P<=i&&(n.expiredLanes|=C),y&=~C}}function ma(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ga(){var n=vr;return vr<<=1,(vr&4194240)===0&&(vr=64),n}function ya(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ti(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-kn(i),n[i]=a}function hd(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var d=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-kn(a),y=1<<f;i[f]=0,d[f]=-1,n[f]=-1,a&=~y}}function va(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var d=31-kn(a),f=1<<d;f&i|n[d]&i&&(n[d]|=i),a&=~f}}var We=0;function xr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var xa,lo,_a,wa,Ea,_r=!1,co=[],wr=null,Er=null,Ft=null,Ni=new Map,Yr=new Map,Cn=[],Hl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ss(n,i){switch(n){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":Ni.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(i.pointerId)}}function rr(n,i,a,d,f,y){return n===null||n.nativeEvent!==y?(n={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},i!==null&&(i=La(i),i!==null&&lo(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Wl(n,i,a,d,f){switch(i){case"focusin":return wr=rr(wr,n,i,a,d,f),!0;case"dragenter":return Er=rr(Er,n,i,a,d,f),!0;case"mouseover":return Ft=rr(Ft,n,i,a,d,f),!0;case"pointerover":var y=f.pointerId;return Ni.set(y,rr(Ni.get(y)||null,n,i,a,d,f)),!0;case"gotpointercapture":return y=f.pointerId,Yr.set(y,rr(Yr.get(y)||null,n,i,a,d,f)),!0}return!1}function uo(n){var i=Ci(n.target);if(i!==null){var a=nr(i);if(a!==null){if(i=a.tag,i===13){if(i=da(a),i!==null){n.blockedOn=i,Ea(n.priority,function(){_a(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function nt(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=ho(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var d=new a.constructor(a.type,a);Un=d,a.target.dispatchEvent(d),Un=null}else return i=La(a),i!==null&&lo(i),n.blockedOn=a,!1;i.shift()}return!0}function Gl(n,i,a){nt(n)&&a.delete(i)}function fd(){_r=!1,wr!==null&&nt(wr)&&(wr=null),Er!==null&&nt(Er)&&(Er=null),Ft!==null&&nt(Ft)&&(Ft=null),Ni.forEach(Gl),Yr.forEach(Gl)}function ks(n,i){n.blockedOn===i&&(n.blockedOn=null,_r||(_r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fd)))}function Cs(n){function i(f){return ks(f,n)}if(0<co.length){ks(co[0],n);for(var a=1;a<co.length;a++){var d=co[a];d.blockedOn===n&&(d.blockedOn=null)}}for(wr!==null&&ks(wr,n),Er!==null&&ks(Er,n),Ft!==null&&ks(Ft,n),Ni.forEach(i),Yr.forEach(i),a=0;a<Cn.length;a++)d=Cn[a],d.blockedOn===n&&(d.blockedOn=null);for(;0<Cn.length&&(a=Cn[0],a.blockedOn===null);)uo(a),a.blockedOn===null&&Cn.shift()}var Xr=Y.ReactCurrentBatchConfig,Jr=!0;function br(n,i,a,d){var f=We,y=Xr.transition;Xr.transition=null;try{We=1,ba(n,i,a,d)}finally{We=f,Xr.transition=y}}function Ql(n,i,a,d){var f=We,y=Xr.transition;Xr.transition=null;try{We=4,ba(n,i,a,d)}finally{We=f,Xr.transition=y}}function ba(n,i,a,d){if(Jr){var f=ho(n,i,a,d);if(f===null)Td(n,i,d,Tr,a),Ss(n,d);else if(Wl(f,n,i,a,d))d.stopPropagation();else if(Ss(n,d),i&4&&-1<Hl.indexOf(n)){for(;f!==null;){var y=La(f);if(y!==null&&xa(y),y=ho(n,i,a,d),y===null&&Td(n,i,d,Tr,a),y===f)break;f=y}f!==null&&d.stopPropagation()}else Td(n,i,d,null,a)}}var Tr=null;function ho(n,i,a,d){if(Tr=null,n=on(d),n=Ci(n),n!==null)if(i=nr(n),i===null)n=null;else if(a=i.tag,a===13){if(n=da(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Tr=n,null}function fo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dd()){case oo:return 1;case fa:return 4;case xi:case pa:return 16;case ao:return 536870912;default:return 16}default:return 16}}var An=null,po=null,Zr=null;function Kl(){if(Zr)return Zr;var n,i=po,a=i.length,d,f="value"in An?An.value:An.textContent,y=f.length;for(n=0;n<a&&i[n]===f[n];n++);var E=a-n;for(d=1;d<=E&&i[a-d]===f[y-d];d++);return Zr=f.slice(n,1<d?1-d:void 0)}function Ii(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Nr(){return!0}function Ta(){return!1}function Qt(n){function i(a,d,f,y,E){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Nr:Ta,this.isPropagationStopped=Ta,this}return G(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),i}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=Qt(Ir),As=G({},Ir,{view:0,detail:0}),mo=Qt(As),go,yo,Rn,ki=G({},As,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rn&&(Rn&&n.type==="mousemove"?(go=n.screenX-Rn.screenX,yo=n.screenY-Rn.screenY):yo=go=0,Rn=n),go)},movementY:function(n){return"movementY"in n?n.movementY:yo}}),Na=Qt(ki),Yl=G({},ki,{dataTransfer:0}),Xl=Qt(Yl),vo=G({},As,{relatedTarget:0}),Bt=Qt(vo),Jl=G({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Zl=Qt(Jl),Rs=G({},Ir,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Qt(Rs),v=G({},Ir,{data:0}),w=Qt(v),N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},H={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ue(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=H[n])?!!i[n]:!1}function Oe(){return ue}var xt=G({},As,{key:function(n){if(n.key){var i=N[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ii(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?B[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oe,charCode:function(n){return n.type==="keypress"?Ii(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ii(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ze=Qt(xt),Tt=G({},ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pn=Qt(Tt),es=G({},As,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oe}),Sr=Qt(es),kr=G({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),xo=Qt(kr),Ia=G({},ki,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),m1=Qt(Ia),g1=[9,13,27,32],pd=p&&"CompositionEvent"in window,Sa=null;p&&"documentMode"in document&&(Sa=document.documentMode);var y1=p&&"TextEvent"in window&&!Sa,rm=p&&(!pd||Sa&&8<Sa&&11>=Sa),sm=" ",im=!1;function om(n,i){switch(n){case"keyup":return g1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function am(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var _o=!1;function v1(n,i){switch(n){case"compositionend":return am(i);case"keypress":return i.which!==32?null:(im=!0,sm);case"textInput":return n=i.data,n===sm&&im?null:n;default:return null}}function x1(n,i){if(_o)return n==="compositionend"||!pd&&om(n,i)?(n=Kl(),Zr=po=An=null,_o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return rm&&i.locale!=="ko"?null:i.data;default:return null}}var _1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!_1[n.type]:i==="textarea"}function cm(n,i,a,d){Re(d),i=sc(i,"onChange"),0<i.length&&(a=new Si("onChange","change",null,a,d),n.push({event:a,listeners:i}))}var ka=null,Ca=null;function w1(n){Sm(n,0)}function ec(n){var i=No(n);if(it(i))return n}function E1(n,i){if(n==="change")return i}var um=!1;if(p){var md;if(p){var gd="oninput"in document;if(!gd){var dm=document.createElement("div");dm.setAttribute("oninput","return;"),gd=typeof dm.oninput=="function"}md=gd}else md=!1;um=md&&(!document.documentMode||9<document.documentMode)}function hm(){ka&&(ka.detachEvent("onpropertychange",fm),Ca=ka=null)}function fm(n){if(n.propertyName==="value"&&ec(Ca)){var i=[];cm(i,Ca,n,on(n)),mt(w1,i)}}function b1(n,i,a){n==="focusin"?(hm(),ka=i,Ca=a,ka.attachEvent("onpropertychange",fm)):n==="focusout"&&hm()}function T1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ec(Ca)}function N1(n,i){if(n==="click")return ec(i)}function I1(n,i){if(n==="input"||n==="change")return ec(i)}function S1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var sr=typeof Object.is=="function"?Object.is:S1;function Aa(n,i){if(sr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!m.call(i,f)||!sr(n[f],i[f]))return!1}return!0}function pm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function mm(n,i){var a=pm(n);n=0;for(var d;a;){if(a.nodeType===3){if(d=n+a.textContent.length,n<=i&&d>=i)return{node:a,offset:i-n};n=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=pm(a)}}function gm(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?gm(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ym(){for(var n=window,i=sn();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=sn(n.document)}return i}function yd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function k1(n){var i=ym(),a=n.focusedElem,d=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&gm(a.ownerDocument.documentElement,a)){if(d!==null&&yd(a)){if(i=d.start,n=d.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!n.extend&&y>d&&(f=d,d=y,y=f),f=mm(a,y);var E=mm(a,d);f&&E&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==E.node||n.focusOffset!==E.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),y>d?(n.addRange(i),n.extend(E.node,E.offset)):(i.setEnd(E.node,E.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var C1=p&&"documentMode"in document&&11>=document.documentMode,wo=null,vd=null,Ra=null,xd=!1;function vm(n,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xd||wo==null||wo!==sn(d)||(d=wo,"selectionStart"in d&&yd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ra&&Aa(Ra,d)||(Ra=d,d=sc(vd,"onSelect"),0<d.length&&(i=new Si("onSelect","select",null,i,a),n.push({event:i,listeners:d}),i.target=wo)))}function tc(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Eo={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionend:tc("Transition","TransitionEnd")},_d={},xm={};p&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function nc(n){if(_d[n])return _d[n];if(!Eo[n])return n;var i=Eo[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in xm)return _d[n]=i[a];return n}var _m=nc("animationend"),wm=nc("animationiteration"),Em=nc("animationstart"),bm=nc("transitionend"),Tm=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(n,i){Tm.set(n,i),c(i,[n])}for(var wd=0;wd<Nm.length;wd++){var Ed=Nm[wd],A1=Ed.toLowerCase(),R1=Ed[0].toUpperCase()+Ed.slice(1);Ps(A1,"on"+R1)}Ps(_m,"onAnimationEnd"),Ps(wm,"onAnimationIteration"),Ps(Em,"onAnimationStart"),Ps("dblclick","onDoubleClick"),Ps("focusin","onFocus"),Ps("focusout","onBlur"),Ps(bm,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pa));function Im(n,i,a){var d=n.type||"unknown-event";n.currentTarget=a,ua(d,i,void 0,n),n.currentTarget=null}function Sm(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var d=n[a],f=d.event;d=d.listeners;e:{var y=void 0;if(i)for(var E=d.length-1;0<=E;E--){var C=d[E],P=C.instance,$=C.currentTarget;if(C=C.listener,P!==y&&f.isPropagationStopped())break e;Im(f,C,$),y=P}else for(E=0;E<d.length;E++){if(C=d[E],P=C.instance,$=C.currentTarget,C=C.listener,P!==y&&f.isPropagationStopped())break e;Im(f,C,$),y=P}}}if(gi)throw n=Bn,gi=!1,Bn=null,n}function lt(n,i){var a=i[Ad];a===void 0&&(a=i[Ad]=new Set);var d=n+"__bubble";a.has(d)||(km(i,n,2,!1),a.add(d))}function bd(n,i,a){var d=0;i&&(d|=4),km(a,n,d,i)}var rc="_reactListening"+Math.random().toString(36).slice(2);function ja(n){if(!n[rc]){n[rc]=!0,s.forEach(function(a){a!=="selectionchange"&&(P1.has(a)||bd(a,!1,n),bd(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[rc]||(i[rc]=!0,bd("selectionchange",!1,i))}}function km(n,i,a,d){switch(fo(i)){case 1:var f=br;break;case 4:f=Ql;break;default:f=ba}a=f.bind(null,i,a,n),f=void 0,!In||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),d?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Td(n,i,a,d,f){var y=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var C=d.stateNode.containerInfo;if(C===f||C.nodeType===8&&C.parentNode===f)break;if(E===4)for(E=d.return;E!==null;){var P=E.tag;if((P===3||P===4)&&(P=E.stateNode.containerInfo,P===f||P.nodeType===8&&P.parentNode===f))return;E=E.return}for(;C!==null;){if(E=Ci(C),E===null)return;if(P=E.tag,P===5||P===6){d=y=E;continue e}C=C.parentNode}}d=d.return}mt(function(){var $=y,re=on(a),se=[];e:{var ne=Tm.get(n);if(ne!==void 0){var fe=Si,xe=n;switch(n){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":fe=Ze;break;case"focusin":xe="focus",fe=Bt;break;case"focusout":xe="blur",fe=Bt;break;case"beforeblur":case"afterblur":fe=Bt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Xl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Sr;break;case _m:case wm:case Em:fe=Zl;break;case bm:fe=xo;break;case"scroll":fe=mo;break;case"wheel":fe=m1;break;case"copy":case"cut":case"paste":fe=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Pn}var we=(i&4)!==0,_t=!we&&n==="scroll",F=we?ne!==null?ne+"Capture":null:ne;we=[];for(var L=$,z;L!==null;){z=L;var le=z.stateNode;if(z.tag===5&&le!==null&&(z=le,F!==null&&(le=Et(L,F),le!=null&&we.push(Da(L,le,z)))),_t)break;L=L.return}0<we.length&&(ne=new fe(ne,xe,null,a,re),se.push({event:ne,listeners:we}))}}if((i&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",ne&&a!==Un&&(xe=a.relatedTarget||a.fromElement)&&(Ci(xe)||xe[ts]))break e;if((fe||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,fe?(xe=a.relatedTarget||a.toElement,fe=$,xe=xe?Ci(xe):null,xe!==null&&(_t=nr(xe),xe!==_t||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(fe=null,xe=$),fe!==xe)){if(we=Na,le="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(we=Pn,le="onPointerLeave",F="onPointerEnter",L="pointer"),_t=fe==null?ne:No(fe),z=xe==null?ne:No(xe),ne=new we(le,L+"leave",fe,a,re),ne.target=_t,ne.relatedTarget=z,le=null,Ci(re)===$&&(we=new we(F,L+"enter",xe,a,re),we.target=z,we.relatedTarget=_t,le=we),_t=le,fe&&xe)t:{for(we=fe,F=xe,L=0,z=we;z;z=bo(z))L++;for(z=0,le=F;le;le=bo(le))z++;for(;0<L-z;)we=bo(we),L--;for(;0<z-L;)F=bo(F),z--;for(;L--;){if(we===F||F!==null&&we===F.alternate)break t;we=bo(we),F=bo(F)}we=null}else we=null;fe!==null&&Cm(se,ne,fe,we,!1),xe!==null&&_t!==null&&Cm(se,_t,xe,we,!0)}}e:{if(ne=$?No($):window,fe=ne.nodeName&&ne.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ne.type==="file")var be=E1;else if(lm(ne))if(um)be=I1;else{be=T1;var ke=b1}else(fe=ne.nodeName)&&fe.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(be=N1);if(be&&(be=be(n,$))){cm(se,be,a,re);break e}ke&&ke(n,ne,$),n==="focusout"&&(ke=ne._wrapperState)&&ke.controlled&&ne.type==="number"&&Xe(ne,"number",ne.value)}switch(ke=$?No($):window,n){case"focusin":(lm(ke)||ke.contentEditable==="true")&&(wo=ke,vd=$,Ra=null);break;case"focusout":Ra=vd=wo=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,vm(se,a,re);break;case"selectionchange":if(C1)break;case"keydown":case"keyup":vm(se,a,re)}var Ce;if(pd)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else _o?om(n,a)&&(Me="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(rm&&a.locale!=="ko"&&(_o||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&_o&&(Ce=Kl()):(An=re,po="value"in An?An.value:An.textContent,_o=!0)),ke=sc($,Me),0<ke.length&&(Me=new w(Me,n,null,a,re),se.push({event:Me,listeners:ke}),Ce?Me.data=Ce:(Ce=am(a),Ce!==null&&(Me.data=Ce)))),(Ce=y1?v1(n,a):x1(n,a))&&($=sc($,"onBeforeInput"),0<$.length&&(re=new w("onBeforeInput","beforeinput",null,a,re),se.push({event:re,listeners:$}),re.data=Ce))}Sm(se,i)})}function Da(n,i,a){return{instance:n,listener:i,currentTarget:a}}function sc(n,i){for(var a=i+"Capture",d=[];n!==null;){var f=n,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Et(n,a),y!=null&&d.unshift(Da(n,y,f)),y=Et(n,i),y!=null&&d.push(Da(n,y,f))),n=n.return}return d}function bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Cm(n,i,a,d,f){for(var y=i._reactName,E=[];a!==null&&a!==d;){var C=a,P=C.alternate,$=C.stateNode;if(P!==null&&P===d)break;C.tag===5&&$!==null&&(C=$,f?(P=Et(a,y),P!=null&&E.unshift(Da(a,P,C))):f||(P=Et(a,y),P!=null&&E.push(Da(a,P,C)))),a=a.return}E.length!==0&&n.push({event:i,listeners:E})}var j1=/\r\n?/g,D1=/\u0000|\uFFFD/g;function Am(n){return(typeof n=="string"?n:""+n).replace(j1,`
`).replace(D1,"")}function ic(n,i,a){if(i=Am(i),Am(n)!==i&&a)throw Error(t(425))}function oc(){}var Nd=null,Id=null;function Sd(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,M1=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,L1=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(n){return Rm.resolve(null).then(n).catch(O1)}:kd;function O1(n){setTimeout(function(){throw n})}function Cd(n,i){var a=i,d=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){n.removeChild(f),Cs(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Cs(i)}function js(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Pm(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var To=Math.random().toString(36).slice(2),Cr="__reactFiber$"+To,Ma="__reactProps$"+To,ts="__reactContainer$"+To,Ad="__reactEvents$"+To,V1="__reactListeners$"+To,U1="__reactHandles$"+To;function Ci(n){var i=n[Cr];if(i)return i;for(var a=n.parentNode;a;){if(i=a[ts]||a[Cr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Pm(n);n!==null;){if(a=n[Cr])return a;n=Pm(n)}return i}n=a,a=n.parentNode}return null}function La(n){return n=n[Cr]||n[ts],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function No(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ac(n){return n[Ma]||null}var Rd=[],Io=-1;function Ds(n){return{current:n}}function ct(n){0>Io||(n.current=Rd[Io],Rd[Io]=null,Io--)}function rt(n,i){Io++,Rd[Io]=n.current,n.current=i}var Ms={},Kt=Ds(Ms),fn=Ds(!1),Ai=Ms;function So(n,i){var a=n.type.contextTypes;if(!a)return Ms;var d=n.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in a)f[y]=i[y];return d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function pn(n){return n=n.childContextTypes,n!=null}function lc(){ct(fn),ct(Kt)}function jm(n,i,a){if(Kt.current!==Ms)throw Error(t(168));rt(Kt,i),rt(fn,a)}function Dm(n,i,a){var d=n.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in i))throw Error(t(108,Fe(n)||"Unknown",f));return G({},a,d)}function cc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ms,Ai=Kt.current,rt(Kt,n),rt(fn,fn.current),!0}function Mm(n,i,a){var d=n.stateNode;if(!d)throw Error(t(169));a?(n=Dm(n,i,Ai),d.__reactInternalMemoizedMergedChildContext=n,ct(fn),ct(Kt),rt(Kt,n)):ct(fn),rt(fn,a)}var ns=null,uc=!1,Pd=!1;function Lm(n){ns===null?ns=[n]:ns.push(n)}function F1(n){uc=!0,Lm(n)}function Ls(){if(!Pd&&ns!==null){Pd=!0;var n=0,i=We;try{var a=ns;for(We=1;n<a.length;n++){var d=a[n];do d=d(!0);while(d!==null)}ns=null,uc=!1}catch(f){throw ns!==null&&(ns=ns.slice(n+1)),ha(oo,Ls),f}finally{We=i,Pd=!1}}return null}var ko=[],Co=0,dc=null,hc=0,qn=[],$n=0,Ri=null,rs=1,ss="";function Pi(n,i){ko[Co++]=hc,ko[Co++]=dc,dc=n,hc=i}function Om(n,i,a){qn[$n++]=rs,qn[$n++]=ss,qn[$n++]=Ri,Ri=n;var d=rs;n=ss;var f=32-kn(d)-1;d&=~(1<<f),a+=1;var y=32-kn(i)+f;if(30<y){var E=f-f%5;y=(d&(1<<E)-1).toString(32),d>>=E,f-=E,rs=1<<32-kn(i)+f|a<<f|d,ss=y+n}else rs=1<<y|a<<f|d,ss=n}function jd(n){n.return!==null&&(Pi(n,1),Om(n,1,0))}function Dd(n){for(;n===dc;)dc=ko[--Co],ko[Co]=null,hc=ko[--Co],ko[Co]=null;for(;n===Ri;)Ri=qn[--$n],qn[$n]=null,ss=qn[--$n],qn[$n]=null,rs=qn[--$n],qn[$n]=null}var jn=null,Dn=null,ut=!1,ir=null;function Vm(n,i){var a=Qn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Um(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,jn=n,Dn=js(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,jn=n,Dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ri!==null?{id:rs,overflow:ss}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Qn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,jn=n,Dn=null,!0):!1;default:return!1}}function Md(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ld(n){if(ut){var i=Dn;if(i){var a=i;if(!Um(n,i)){if(Md(n))throw Error(t(418));i=js(a.nextSibling);var d=jn;i&&Um(n,i)?Vm(d,a):(n.flags=n.flags&-4097|2,ut=!1,jn=n)}}else{if(Md(n))throw Error(t(418));n.flags=n.flags&-4097|2,ut=!1,jn=n}}}function Fm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;jn=n}function fc(n){if(n!==jn)return!1;if(!ut)return Fm(n),ut=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Sd(n.type,n.memoizedProps)),i&&(i=Dn)){if(Md(n))throw Bm(),Error(t(418));for(;i;)Vm(n,i),i=js(i.nextSibling)}if(Fm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){Dn=js(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}Dn=null}}else Dn=jn?js(n.stateNode.nextSibling):null;return!0}function Bm(){for(var n=Dn;n;)n=js(n.nextSibling)}function Ao(){Dn=jn=null,ut=!1}function Od(n){ir===null?ir=[n]:ir.push(n)}var B1=Y.ReactCurrentBatchConfig;function Oa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,n));var f=d,y=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===y?i.ref:(i=function(E){var C=f.refs;E===null?delete C[y]:C[y]=E},i._stringRef=y,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function pc(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function zm(n){var i=n._init;return i(n._payload)}function qm(n){function i(F,L){if(n){var z=F.deletions;z===null?(F.deletions=[L],F.flags|=16):z.push(L)}}function a(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function d(F,L){for(F=new Map;L!==null;)L.key!==null?F.set(L.key,L):F.set(L.index,L),L=L.sibling;return F}function f(F,L){return F=$s(F,L),F.index=0,F.sibling=null,F}function y(F,L,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<L?(F.flags|=2,L):z):(F.flags|=2,L)):(F.flags|=1048576,L)}function E(F){return n&&F.alternate===null&&(F.flags|=2),F}function C(F,L,z,le){return L===null||L.tag!==6?(L=kh(z,F.mode,le),L.return=F,L):(L=f(L,z),L.return=F,L)}function P(F,L,z,le){var be=z.type;return be===R?re(F,L,z.props.children,le,z.key):L!==null&&(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ne&&zm(be)===L.type)?(le=f(L,z.props),le.ref=Oa(F,L,z),le.return=F,le):(le=Vc(z.type,z.key,z.props,null,F.mode,le),le.ref=Oa(F,L,z),le.return=F,le)}function $(F,L,z,le){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=Ch(z,F.mode,le),L.return=F,L):(L=f(L,z.children||[]),L.return=F,L)}function re(F,L,z,le,be){return L===null||L.tag!==7?(L=Fi(z,F.mode,le,be),L.return=F,L):(L=f(L,z),L.return=F,L)}function se(F,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=kh(""+L,F.mode,z),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case W:return z=Vc(L.type,L.key,L.props,null,F.mode,z),z.ref=Oa(F,null,L),z.return=F,z;case ie:return L=Ch(L,F.mode,z),L.return=F,L;case Ne:var le=L._init;return se(F,le(L._payload),z)}if(dt(L)||pe(L))return L=Fi(L,F.mode,z,null),L.return=F,L;pc(F,L)}return null}function ne(F,L,z,le){var be=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return be!==null?null:C(F,L,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case W:return z.key===be?P(F,L,z,le):null;case ie:return z.key===be?$(F,L,z,le):null;case Ne:return be=z._init,ne(F,L,be(z._payload),le)}if(dt(z)||pe(z))return be!==null?null:re(F,L,z,le,null);pc(F,z)}return null}function fe(F,L,z,le,be){if(typeof le=="string"&&le!==""||typeof le=="number")return F=F.get(z)||null,C(L,F,""+le,be);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case W:return F=F.get(le.key===null?z:le.key)||null,P(L,F,le,be);case ie:return F=F.get(le.key===null?z:le.key)||null,$(L,F,le,be);case Ne:var ke=le._init;return fe(F,L,z,ke(le._payload),be)}if(dt(le)||pe(le))return F=F.get(z)||null,re(L,F,le,be,null);pc(L,le)}return null}function xe(F,L,z,le){for(var be=null,ke=null,Ce=L,Me=L=0,Vt=null;Ce!==null&&Me<z.length;Me++){Ce.index>Me?(Vt=Ce,Ce=null):Vt=Ce.sibling;var Ke=ne(F,Ce,z[Me],le);if(Ke===null){Ce===null&&(Ce=Vt);break}n&&Ce&&Ke.alternate===null&&i(F,Ce),L=y(Ke,L,Me),ke===null?be=Ke:ke.sibling=Ke,ke=Ke,Ce=Vt}if(Me===z.length)return a(F,Ce),ut&&Pi(F,Me),be;if(Ce===null){for(;Me<z.length;Me++)Ce=se(F,z[Me],le),Ce!==null&&(L=y(Ce,L,Me),ke===null?be=Ce:ke.sibling=Ce,ke=Ce);return ut&&Pi(F,Me),be}for(Ce=d(F,Ce);Me<z.length;Me++)Vt=fe(Ce,F,Me,z[Me],le),Vt!==null&&(n&&Vt.alternate!==null&&Ce.delete(Vt.key===null?Me:Vt.key),L=y(Vt,L,Me),ke===null?be=Vt:ke.sibling=Vt,ke=Vt);return n&&Ce.forEach(function(Hs){return i(F,Hs)}),ut&&Pi(F,Me),be}function we(F,L,z,le){var be=pe(z);if(typeof be!="function")throw Error(t(150));if(z=be.call(z),z==null)throw Error(t(151));for(var ke=be=null,Ce=L,Me=L=0,Vt=null,Ke=z.next();Ce!==null&&!Ke.done;Me++,Ke=z.next()){Ce.index>Me?(Vt=Ce,Ce=null):Vt=Ce.sibling;var Hs=ne(F,Ce,Ke.value,le);if(Hs===null){Ce===null&&(Ce=Vt);break}n&&Ce&&Hs.alternate===null&&i(F,Ce),L=y(Hs,L,Me),ke===null?be=Hs:ke.sibling=Hs,ke=Hs,Ce=Vt}if(Ke.done)return a(F,Ce),ut&&Pi(F,Me),be;if(Ce===null){for(;!Ke.done;Me++,Ke=z.next())Ke=se(F,Ke.value,le),Ke!==null&&(L=y(Ke,L,Me),ke===null?be=Ke:ke.sibling=Ke,ke=Ke);return ut&&Pi(F,Me),be}for(Ce=d(F,Ce);!Ke.done;Me++,Ke=z.next())Ke=fe(Ce,F,Me,Ke.value,le),Ke!==null&&(n&&Ke.alternate!==null&&Ce.delete(Ke.key===null?Me:Ke.key),L=y(Ke,L,Me),ke===null?be=Ke:ke.sibling=Ke,ke=Ke);return n&&Ce.forEach(function(_w){return i(F,_w)}),ut&&Pi(F,Me),be}function _t(F,L,z,le){if(typeof z=="object"&&z!==null&&z.type===R&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case W:e:{for(var be=z.key,ke=L;ke!==null;){if(ke.key===be){if(be=z.type,be===R){if(ke.tag===7){a(F,ke.sibling),L=f(ke,z.props.children),L.return=F,F=L;break e}}else if(ke.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ne&&zm(be)===ke.type){a(F,ke.sibling),L=f(ke,z.props),L.ref=Oa(F,ke,z),L.return=F,F=L;break e}a(F,ke);break}else i(F,ke);ke=ke.sibling}z.type===R?(L=Fi(z.props.children,F.mode,le,z.key),L.return=F,F=L):(le=Vc(z.type,z.key,z.props,null,F.mode,le),le.ref=Oa(F,L,z),le.return=F,F=le)}return E(F);case ie:e:{for(ke=z.key;L!==null;){if(L.key===ke)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){a(F,L.sibling),L=f(L,z.children||[]),L.return=F,F=L;break e}else{a(F,L);break}else i(F,L);L=L.sibling}L=Ch(z,F.mode,le),L.return=F,F=L}return E(F);case Ne:return ke=z._init,_t(F,L,ke(z._payload),le)}if(dt(z))return xe(F,L,z,le);if(pe(z))return we(F,L,z,le);pc(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(a(F,L.sibling),L=f(L,z),L.return=F,F=L):(a(F,L),L=kh(z,F.mode,le),L.return=F,F=L),E(F)):a(F,L)}return _t}var Ro=qm(!0),$m=qm(!1),mc=Ds(null),gc=null,Po=null,Vd=null;function Ud(){Vd=Po=gc=null}function Fd(n){var i=mc.current;ct(mc),n._currentValue=i}function Bd(n,i,a){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===a)break;n=n.return}}function jo(n,i){gc=n,Vd=Po=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(mn=!0),n.firstContext=null)}function Hn(n){var i=n._currentValue;if(Vd!==n)if(n={context:n,memoizedValue:i,next:null},Po===null){if(gc===null)throw Error(t(308));Po=n,gc.dependencies={lanes:0,firstContext:n}}else Po=Po.next=n;return i}var ji=null;function zd(n){ji===null?ji=[n]:ji.push(n)}function Hm(n,i,a,d){var f=i.interleaved;return f===null?(a.next=a,zd(i)):(a.next=f.next,f.next=a),i.interleaved=a,is(n,d)}function is(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Os=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function os(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Vs(n,i,a){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Qe&2)!==0){var f=d.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),d.pending=i,is(n,a)}return f=d.interleaved,f===null?(i.next=i,zd(d)):(i.next=f.next,f.next=i),d.interleaved=i,is(n,a)}function yc(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,va(n,a)}}function Gm(n,i){var a=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?f=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?f=y=i:y=y.next=i}else f=y=i;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function vc(n,i,a,d){var f=n.updateQueue;Os=!1;var y=f.firstBaseUpdate,E=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var P=C,$=P.next;P.next=null,E===null?y=$:E.next=$,E=P;var re=n.alternate;re!==null&&(re=re.updateQueue,C=re.lastBaseUpdate,C!==E&&(C===null?re.firstBaseUpdate=$:C.next=$,re.lastBaseUpdate=P))}if(y!==null){var se=f.baseState;E=0,re=$=P=null,C=y;do{var ne=C.lane,fe=C.eventTime;if((d&ne)===ne){re!==null&&(re=re.next={eventTime:fe,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var xe=n,we=C;switch(ne=i,fe=a,we.tag){case 1:if(xe=we.payload,typeof xe=="function"){se=xe.call(fe,se,ne);break e}se=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=we.payload,ne=typeof xe=="function"?xe.call(fe,se,ne):xe,ne==null)break e;se=G({},se,ne);break e;case 2:Os=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,ne=f.effects,ne===null?f.effects=[C]:ne.push(C))}else fe={eventTime:fe,lane:ne,tag:C.tag,payload:C.payload,callback:C.callback,next:null},re===null?($=re=fe,P=se):re=re.next=fe,E|=ne;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);if(re===null&&(P=se),f.baseState=P,f.firstBaseUpdate=$,f.lastBaseUpdate=re,i=f.shared.interleaved,i!==null){f=i;do E|=f.lane,f=f.next;while(f!==i)}else y===null&&(f.shared.lanes=0);Li|=E,n.lanes=E,n.memoizedState=se}}function Qm(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var d=n[i],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Va={},Ar=Ds(Va),Ua=Ds(Va),Fa=Ds(Va);function Di(n){if(n===Va)throw Error(t(174));return n}function $d(n,i){switch(rt(Fa,i),rt(Ua,n),rt(Ar,Va),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:_s(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=_s(i,n)}ct(Ar),rt(Ar,i)}function Do(){ct(Ar),ct(Ua),ct(Fa)}function Km(n){Di(Fa.current);var i=Di(Ar.current),a=_s(i,n.type);i!==a&&(rt(Ua,n),rt(Ar,a))}function Hd(n){Ua.current===n&&(ct(Ar),ct(Ua))}var ht=Ds(0);function xc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wd=[];function Gd(){for(var n=0;n<Wd.length;n++)Wd[n]._workInProgressVersionPrimary=null;Wd.length=0}var _c=Y.ReactCurrentDispatcher,Qd=Y.ReactCurrentBatchConfig,Mi=0,ft=null,At=null,Lt=null,wc=!1,Ba=!1,za=0,z1=0;function Yt(){throw Error(t(321))}function Kd(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!sr(n[a],i[a]))return!1;return!0}function Yd(n,i,a,d,f,y){if(Mi=y,ft=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,_c.current=n===null||n.memoizedState===null?W1:G1,n=a(d,f),Ba){y=0;do{if(Ba=!1,za=0,25<=y)throw Error(t(301));y+=1,Lt=At=null,i.updateQueue=null,_c.current=Q1,n=a(d,f)}while(Ba)}if(_c.current=Tc,i=At!==null&&At.next!==null,Mi=0,Lt=At=ft=null,wc=!1,i)throw Error(t(300));return n}function Xd(){var n=za!==0;return za=0,n}function Rr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ft.memoizedState=Lt=n:Lt=Lt.next=n,Lt}function Wn(){if(At===null){var n=ft.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var i=Lt===null?ft.memoizedState:Lt.next;if(i!==null)Lt=i,At=n;else{if(n===null)throw Error(t(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Lt===null?ft.memoizedState=Lt=n:Lt=Lt.next=n}return Lt}function qa(n,i){return typeof i=="function"?i(n):i}function Jd(n){var i=Wn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=At,f=d.baseQueue,y=a.pending;if(y!==null){if(f!==null){var E=f.next;f.next=y.next,y.next=E}d.baseQueue=f=y,a.pending=null}if(f!==null){y=f.next,d=d.baseState;var C=E=null,P=null,$=y;do{var re=$.lane;if((Mi&re)===re)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),d=$.hasEagerState?$.eagerState:n(d,$.action);else{var se={lane:re,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(C=P=se,E=d):P=P.next=se,ft.lanes|=re,Li|=re}$=$.next}while($!==null&&$!==y);P===null?E=d:P.next=C,sr(d,i.memoizedState)||(mn=!0),i.memoizedState=d,i.baseState=E,i.baseQueue=P,a.lastRenderedState=d}if(n=a.interleaved,n!==null){f=n;do y=f.lane,ft.lanes|=y,Li|=y,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Zd(n){var i=Wn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var d=a.dispatch,f=a.pending,y=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do y=n(y,E.action),E=E.next;while(E!==f);sr(y,i.memoizedState)||(mn=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),a.lastRenderedState=y}return[y,d]}function Ym(){}function Xm(n,i){var a=ft,d=Wn(),f=i(),y=!sr(d.memoizedState,f);if(y&&(d.memoizedState=f,mn=!0),d=d.queue,eh(eg.bind(null,a,d,n),[n]),d.getSnapshot!==i||y||Lt!==null&&Lt.memoizedState.tag&1){if(a.flags|=2048,$a(9,Zm.bind(null,a,d,f,i),void 0,null),Ot===null)throw Error(t(349));(Mi&30)!==0||Jm(a,i,f)}return f}function Jm(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Zm(n,i,a,d){i.value=a,i.getSnapshot=d,tg(i)&&ng(n)}function eg(n,i,a){return a(function(){tg(i)&&ng(n)})}function tg(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!sr(n,a)}catch{return!0}}function ng(n){var i=is(n,1);i!==null&&cr(i,n,1,-1)}function rg(n){var i=Rr();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},i.queue=n,n=n.dispatch=H1.bind(null,ft,n),[i.memoizedState,n]}function $a(n,i,a,d){return n={tag:n,create:i,destroy:a,deps:d,next:null},i=ft.updateQueue,i===null?(i={lastEffect:null,stores:null},ft.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(d=a.next,a.next=n,n.next=d,i.lastEffect=n)),n}function sg(){return Wn().memoizedState}function Ec(n,i,a,d){var f=Rr();ft.flags|=n,f.memoizedState=$a(1|i,a,void 0,d===void 0?null:d)}function bc(n,i,a,d){var f=Wn();d=d===void 0?null:d;var y=void 0;if(At!==null){var E=At.memoizedState;if(y=E.destroy,d!==null&&Kd(d,E.deps)){f.memoizedState=$a(i,a,y,d);return}}ft.flags|=n,f.memoizedState=$a(1|i,a,y,d)}function ig(n,i){return Ec(8390656,8,n,i)}function eh(n,i){return bc(2048,8,n,i)}function og(n,i){return bc(4,2,n,i)}function ag(n,i){return bc(4,4,n,i)}function lg(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function cg(n,i,a){return a=a!=null?a.concat([n]):null,bc(4,4,lg.bind(null,i,n),a)}function th(){}function ug(n,i){var a=Wn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Kd(i,d[1])?d[0]:(a.memoizedState=[n,i],n)}function dg(n,i){var a=Wn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&Kd(i,d[1])?d[0]:(n=n(),a.memoizedState=[n,i],n)}function hg(n,i,a){return(Mi&21)===0?(n.baseState&&(n.baseState=!1,mn=!0),n.memoizedState=a):(sr(a,i)||(a=ga(),ft.lanes|=a,Li|=a,n.baseState=!0),i)}function q1(n,i){var a=We;We=a!==0&&4>a?a:4,n(!0);var d=Qd.transition;Qd.transition={};try{n(!1),i()}finally{We=a,Qd.transition=d}}function fg(){return Wn().memoizedState}function $1(n,i,a){var d=zs(n);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},pg(n))mg(i,a);else if(a=Hm(n,i,a,d),a!==null){var f=cn();cr(a,n,d,f),gg(a,i,d)}}function H1(n,i,a){var d=zs(n),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(pg(n))mg(i,f);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var E=i.lastRenderedState,C=y(E,a);if(f.hasEagerState=!0,f.eagerState=C,sr(C,E)){var P=i.interleaved;P===null?(f.next=f,zd(i)):(f.next=P.next,P.next=f),i.interleaved=f;return}}catch{}finally{}a=Hm(n,i,f,d),a!==null&&(f=cn(),cr(a,n,d,f),gg(a,i,d))}}function pg(n){var i=n.alternate;return n===ft||i!==null&&i===ft}function mg(n,i){Ba=wc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function gg(n,i,a){if((a&4194240)!==0){var d=i.lanes;d&=n.pendingLanes,a|=d,i.lanes=a,va(n,a)}}var Tc={readContext:Hn,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},W1={readContext:Hn,useCallback:function(n,i){return Rr().memoizedState=[n,i===void 0?null:i],n},useContext:Hn,useEffect:ig,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Ec(4194308,4,lg.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Ec(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ec(4,2,n,i)},useMemo:function(n,i){var a=Rr();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var d=Rr();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},d.queue=n,n=n.dispatch=$1.bind(null,ft,n),[d.memoizedState,n]},useRef:function(n){var i=Rr();return n={current:n},i.memoizedState=n},useState:rg,useDebugValue:th,useDeferredValue:function(n){return Rr().memoizedState=n},useTransition:function(){var n=rg(!1),i=n[0];return n=q1.bind(null,n[1]),Rr().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var d=ft,f=Rr();if(ut){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Ot===null)throw Error(t(349));(Mi&30)!==0||Jm(d,i,a)}f.memoizedState=a;var y={value:a,getSnapshot:i};return f.queue=y,ig(eg.bind(null,d,y,n),[n]),d.flags|=2048,$a(9,Zm.bind(null,d,y,a,i),void 0,null),a},useId:function(){var n=Rr(),i=Ot.identifierPrefix;if(ut){var a=ss,d=rs;a=(d&~(1<<32-kn(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=za++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=z1++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},G1={readContext:Hn,useCallback:ug,useContext:Hn,useEffect:eh,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Jd,useRef:sg,useState:function(){return Jd(qa)},useDebugValue:th,useDeferredValue:function(n){var i=Wn();return hg(i,At.memoizedState,n)},useTransition:function(){var n=Jd(qa)[0],i=Wn().memoizedState;return[n,i]},useMutableSource:Ym,useSyncExternalStore:Xm,useId:fg,unstable_isNewReconciler:!1},Q1={readContext:Hn,useCallback:ug,useContext:Hn,useEffect:eh,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Zd,useRef:sg,useState:function(){return Zd(qa)},useDebugValue:th,useDeferredValue:function(n){var i=Wn();return At===null?i.memoizedState=n:hg(i,At.memoizedState,n)},useTransition:function(){var n=Zd(qa)[0],i=Wn().memoizedState;return[n,i]},useMutableSource:Ym,useSyncExternalStore:Xm,useId:fg,unstable_isNewReconciler:!1};function or(n,i){if(n&&n.defaultProps){i=G({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function nh(n,i,a,d){i=n.memoizedState,a=a(d,i),a=a==null?i:G({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Nc={isMounted:function(n){return(n=n._reactInternals)?nr(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var d=cn(),f=zs(n),y=os(d,f);y.payload=i,a!=null&&(y.callback=a),i=Vs(n,y,f),i!==null&&(cr(i,n,f,d),yc(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var d=cn(),f=zs(n),y=os(d,f);y.tag=1,y.payload=i,a!=null&&(y.callback=a),i=Vs(n,y,f),i!==null&&(cr(i,n,f,d),yc(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=cn(),d=zs(n),f=os(a,d);f.tag=2,i!=null&&(f.callback=i),i=Vs(n,f,d),i!==null&&(cr(i,n,d,a),yc(i,n,d))}};function yg(n,i,a,d,f,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,E):i.prototype&&i.prototype.isPureReactComponent?!Aa(a,d)||!Aa(f,y):!0}function vg(n,i,a){var d=!1,f=Ms,y=i.contextType;return typeof y=="object"&&y!==null?y=Hn(y):(f=pn(i)?Ai:Kt.current,d=i.contextTypes,y=(d=d!=null)?So(n,f):Ms),i=new i(a,y),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Nc,n.stateNode=i,i._reactInternals=n,d&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=y),i}function xg(n,i,a,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==n&&Nc.enqueueReplaceState(i,i.state,null)}function rh(n,i,a,d){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},qd(n);var y=i.contextType;typeof y=="object"&&y!==null?f.context=Hn(y):(y=pn(i)?Ai:Kt.current,f.context=So(n,y)),f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(nh(n,i,y,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Nc.enqueueReplaceState(f,f.state,null),vc(n,a,f,d),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Mo(n,i){try{var a="",d=i;do a+=_e(d),d=d.return;while(d);var f=a}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:i,stack:f,digest:null}}function sh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function ih(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var K1=typeof WeakMap=="function"?WeakMap:Map;function _g(n,i,a){a=os(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){Pc||(Pc=!0,_h=d),ih(n,i)},a}function wg(n,i,a){a=os(-1,a),a.tag=3;var d=n.type.getDerivedStateFromError;if(typeof d=="function"){var f=i.value;a.payload=function(){return d(f)},a.callback=function(){ih(n,i)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){ih(n,i),typeof d!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var E=i.stack;this.componentDidCatch(i.value,{componentStack:E!==null?E:""})}),a}function Eg(n,i,a){var d=n.pingCache;if(d===null){d=n.pingCache=new K1;var f=new Set;d.set(i,f)}else f=d.get(i),f===void 0&&(f=new Set,d.set(i,f));f.has(a)||(f.add(a),n=cw.bind(null,n,i,a),i.then(n,n))}function bg(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function Tg(n,i,a,d,f){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=os(-1,1),i.tag=2,Vs(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Y1=Y.ReactCurrentOwner,mn=!1;function ln(n,i,a,d){i.child=n===null?$m(i,null,a,d):Ro(i,n.child,a,d)}function Ng(n,i,a,d,f){a=a.render;var y=i.ref;return jo(i,f),d=Yd(n,i,a,d,y,f),a=Xd(),n!==null&&!mn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,as(n,i,f)):(ut&&a&&jd(i),i.flags|=1,ln(n,i,d,f),i.child)}function Ig(n,i,a,d,f){if(n===null){var y=a.type;return typeof y=="function"&&!Sh(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=y,Sg(n,i,y,d,f)):(n=Vc(a.type,null,d,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(y=n.child,(n.lanes&f)===0){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:Aa,a(E,d)&&n.ref===i.ref)return as(n,i,f)}return i.flags|=1,n=$s(y,d),n.ref=i.ref,n.return=i,i.child=n}function Sg(n,i,a,d,f){if(n!==null){var y=n.memoizedProps;if(Aa(y,d)&&n.ref===i.ref)if(mn=!1,i.pendingProps=d=y,(n.lanes&f)!==0)(n.flags&131072)!==0&&(mn=!0);else return i.lanes=n.lanes,as(n,i,f)}return oh(n,i,a,d,f)}function kg(n,i,a){var d=i.pendingProps,f=d.children,y=n!==null?n.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Oo,Mn),Mn|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,rt(Oo,Mn),Mn|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:a,rt(Oo,Mn),Mn|=d}else y!==null?(d=y.baseLanes|a,i.memoizedState=null):d=a,rt(Oo,Mn),Mn|=d;return ln(n,i,f,a),i.child}function Cg(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function oh(n,i,a,d,f){var y=pn(a)?Ai:Kt.current;return y=So(i,y),jo(i,f),a=Yd(n,i,a,d,y,f),d=Xd(),n!==null&&!mn?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,as(n,i,f)):(ut&&d&&jd(i),i.flags|=1,ln(n,i,a,f),i.child)}function Ag(n,i,a,d,f){if(pn(a)){var y=!0;cc(i)}else y=!1;if(jo(i,f),i.stateNode===null)Sc(n,i),vg(i,a,d),rh(i,a,d,f),d=!0;else if(n===null){var E=i.stateNode,C=i.memoizedProps;E.props=C;var P=E.context,$=a.contextType;typeof $=="object"&&$!==null?$=Hn($):($=pn(a)?Ai:Kt.current,$=So(i,$));var re=a.getDerivedStateFromProps,se=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function";se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==d||P!==$)&&xg(i,E,d,$),Os=!1;var ne=i.memoizedState;E.state=ne,vc(i,d,E,f),P=i.memoizedState,C!==d||ne!==P||fn.current||Os?(typeof re=="function"&&(nh(i,a,re,d),P=i.memoizedState),(C=Os||yg(i,a,C,d,ne,P,$))?(se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(i.flags|=4194308)):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=P),E.props=d,E.state=P,E.context=$,d=C):(typeof E.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{E=i.stateNode,Wm(n,i),C=i.memoizedProps,$=i.type===i.elementType?C:or(i.type,C),E.props=$,se=i.pendingProps,ne=E.context,P=a.contextType,typeof P=="object"&&P!==null?P=Hn(P):(P=pn(a)?Ai:Kt.current,P=So(i,P));var fe=a.getDerivedStateFromProps;(re=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==se||ne!==P)&&xg(i,E,d,P),Os=!1,ne=i.memoizedState,E.state=ne,vc(i,d,E,f);var xe=i.memoizedState;C!==se||ne!==xe||fn.current||Os?(typeof fe=="function"&&(nh(i,a,fe,d),xe=i.memoizedState),($=Os||yg(i,a,$,d,ne,xe,P)||!1)?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,xe,P),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,xe,P)),typeof E.componentDidUpdate=="function"&&(i.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=xe),E.props=d,E.state=xe,E.context=P,d=$):(typeof E.componentDidUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(i.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ne===n.memoizedState||(i.flags|=1024),d=!1)}return ah(n,i,a,d,y,f)}function ah(n,i,a,d,f,y){Cg(n,i);var E=(i.flags&128)!==0;if(!d&&!E)return f&&Mm(i,a,!1),as(n,i,y);d=i.stateNode,Y1.current=i;var C=E&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,n!==null&&E?(i.child=Ro(i,n.child,null,y),i.child=Ro(i,null,C,y)):ln(n,i,C,y),i.memoizedState=d.state,f&&Mm(i,a,!0),i.child}function Rg(n){var i=n.stateNode;i.pendingContext?jm(n,i.pendingContext,i.pendingContext!==i.context):i.context&&jm(n,i.context,!1),$d(n,i.containerInfo)}function Pg(n,i,a,d,f){return Ao(),Od(f),i.flags|=256,ln(n,i,a,d),i.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function ch(n){return{baseLanes:n,cachePool:null,transitions:null}}function jg(n,i,a){var d=i.pendingProps,f=ht.current,y=!1,E=(i.flags&128)!==0,C;if((C=E)||(C=n!==null&&n.memoizedState===null?!1:(f&2)!==0),C?(y=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),rt(ht,f&1),n===null)return Ld(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(E=d.children,n=d.fallback,y?(d=i.mode,y=i.child,E={mode:"hidden",children:E},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=E):y=Uc(E,d,0,null),n=Fi(n,d,a,null),y.return=i,n.return=i,y.sibling=n,i.child=y,i.child.memoizedState=ch(a),i.memoizedState=lh,n):uh(i,E));if(f=n.memoizedState,f!==null&&(C=f.dehydrated,C!==null))return X1(n,i,E,d,C,f,a);if(y){y=d.fallback,E=i.mode,f=n.child,C=f.sibling;var P={mode:"hidden",children:d.children};return(E&1)===0&&i.child!==f?(d=i.child,d.childLanes=0,d.pendingProps=P,i.deletions=null):(d=$s(f,P),d.subtreeFlags=f.subtreeFlags&14680064),C!==null?y=$s(C,y):(y=Fi(y,E,a,null),y.flags|=2),y.return=i,d.return=i,d.sibling=y,i.child=d,d=y,y=i.child,E=n.child.memoizedState,E=E===null?ch(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},y.memoizedState=E,y.childLanes=n.childLanes&~a,i.memoizedState=lh,d}return y=n.child,n=y.sibling,d=$s(y,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=d,i.memoizedState=null,d}function uh(n,i){return i=Uc({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Ic(n,i,a,d){return d!==null&&Od(d),Ro(i,n.child,null,a),n=uh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function X1(n,i,a,d,f,y,E){if(a)return i.flags&256?(i.flags&=-257,d=sh(Error(t(422))),Ic(n,i,E,d)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(y=d.fallback,f=i.mode,d=Uc({mode:"visible",children:d.children},f,0,null),y=Fi(y,f,E,null),y.flags|=2,d.return=i,y.return=i,d.sibling=y,i.child=d,(i.mode&1)!==0&&Ro(i,n.child,null,E),i.child.memoizedState=ch(E),i.memoizedState=lh,y);if((i.mode&1)===0)return Ic(n,i,E,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var C=d.dgst;return d=C,y=Error(t(419)),d=sh(y,d,void 0),Ic(n,i,E,d)}if(C=(E&n.childLanes)!==0,mn||C){if(d=Ot,d!==null){switch(E&-E){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|E))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,is(n,f),cr(d,n,f,-1))}return Ih(),d=sh(Error(t(421))),Ic(n,i,E,d)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=uw.bind(null,n),f._reactRetry=i,null):(n=y.treeContext,Dn=js(f.nextSibling),jn=i,ut=!0,ir=null,n!==null&&(qn[$n++]=rs,qn[$n++]=ss,qn[$n++]=Ri,rs=n.id,ss=n.overflow,Ri=i),i=uh(i,d.children),i.flags|=4096,i)}function Dg(n,i,a){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),Bd(n.return,i,a)}function dh(n,i,a,d,f){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(y.isBackwards=i,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=a,y.tailMode=f)}function Mg(n,i,a){var d=i.pendingProps,f=d.revealOrder,y=d.tail;if(ln(n,i,d.children,a),d=ht.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Dg(n,a,i);else if(n.tag===19)Dg(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}if(rt(ht,d),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&xc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),dh(i,!1,f,a,y);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&xc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}dh(i,!0,a,null,y);break;case"together":dh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Sc(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function as(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Li|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=$s(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=$s(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function J1(n,i,a){switch(i.tag){case 3:Rg(i),Ao();break;case 5:Km(i);break;case 1:pn(i.type)&&cc(i);break;case 4:$d(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,f=i.memoizedProps.value;rt(mc,d._currentValue),d._currentValue=f;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(rt(ht,ht.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?jg(n,i,a):(rt(ht,ht.current&1),n=as(n,i,a),n!==null?n.sibling:null);rt(ht,ht.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(n.flags&128)!==0){if(d)return Mg(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(ht,ht.current),d)break;return null;case 22:case 23:return i.lanes=0,kg(n,i,a)}return as(n,i,a)}var Lg,hh,Og,Vg;Lg=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},hh=function(){},Og=function(n,i,a,d){var f=n.memoizedProps;if(f!==d){n=i.stateNode,Di(Ar.current);var y=null;switch(a){case"input":f=bn(n,f),d=bn(n,d),y=[];break;case"select":f=G({},f,{value:void 0}),d=G({},d,{value:void 0}),y=[];break;case"textarea":f=Ct(n,f),d=Ct(n,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(n.onclick=oc)}hn(a,d);var E;a=null;for($ in f)if(!d.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var C=f[$];for(E in C)C.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in d){var P=d[$];if(C=f?.[$],d.hasOwnProperty($)&&P!==C&&(P!=null||C!=null))if($==="style")if(C){for(E in C)!C.hasOwnProperty(E)||P&&P.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in P)P.hasOwnProperty(E)&&C[E]!==P[E]&&(a||(a={}),a[E]=P[E])}else a||(y||(y=[]),y.push($,a)),a=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,C=C?C.__html:void 0,P!=null&&C!==P&&(y=y||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(y=y||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(P!=null&&$==="onScroll"&&lt("scroll",n),y||C===P||(y=[])):(y=y||[]).push($,P))}a&&(y=y||[]).push("style",a);var $=y;(i.updateQueue=$)&&(i.flags|=4)}},Vg=function(n,i,a,d){a!==d&&(i.flags|=4)};function Ha(n,i){if(!ut)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Xt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,d=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=d,n.childLanes=a,i}function Z1(n,i,a){var d=i.pendingProps;switch(Dd(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(i),null;case 1:return pn(i.type)&&lc(),Xt(i),null;case 3:return d=i.stateNode,Do(),ct(fn),ct(Kt),Gd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(fc(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ir!==null&&(bh(ir),ir=null))),hh(n,i),Xt(i),null;case 5:Hd(i);var f=Di(Fa.current);if(a=i.type,n!==null&&i.stateNode!=null)Og(n,i,a,d,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return Xt(i),null}if(n=Di(Ar.current),fc(i)){d=i.stateNode,a=i.type;var y=i.memoizedProps;switch(d[Cr]=i,d[Ma]=y,n=(i.mode&1)!==0,a){case"dialog":lt("cancel",d),lt("close",d);break;case"iframe":case"object":case"embed":lt("load",d);break;case"video":case"audio":for(f=0;f<Pa.length;f++)lt(Pa[f],d);break;case"source":lt("error",d);break;case"img":case"image":case"link":lt("error",d),lt("load",d);break;case"details":lt("toggle",d);break;case"input":ro(d,y),lt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},lt("invalid",d);break;case"textarea":Vn(d,y),lt("invalid",d)}hn(a,y),f=null;for(var E in y)if(y.hasOwnProperty(E)){var C=y[E];E==="children"?typeof C=="string"?d.textContent!==C&&(y.suppressHydrationWarning!==!0&&ic(d.textContent,C,n),f=["children",C]):typeof C=="number"&&d.textContent!==""+C&&(y.suppressHydrationWarning!==!0&&ic(d.textContent,C,n),f=["children",""+C]):o.hasOwnProperty(E)&&C!=null&&E==="onScroll"&&lt("scroll",d)}switch(a){case"input":Be(d),xs(d,y,!0);break;case"textarea":Be(d),pr(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=oc)}d=f,i.updateQueue=d,d!==null&&(i.flags|=4)}else{E=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=mr(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=E.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof d.is=="string"?n=E.createElement(a,{is:d.is}):(n=E.createElement(a),a==="select"&&(E=n,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):n=E.createElementNS(n,a),n[Cr]=i,n[Ma]=d,Lg(n,i,!1,!1),i.stateNode=n;e:{switch(E=Ts(a,d),a){case"dialog":lt("cancel",n),lt("close",n),f=d;break;case"iframe":case"object":case"embed":lt("load",n),f=d;break;case"video":case"audio":for(f=0;f<Pa.length;f++)lt(Pa[f],n);f=d;break;case"source":lt("error",n),f=d;break;case"img":case"image":case"link":lt("error",n),lt("load",n),f=d;break;case"details":lt("toggle",n),f=d;break;case"input":ro(n,d),f=bn(n,d),lt("invalid",n);break;case"option":f=d;break;case"select":n._wrapperState={wasMultiple:!!d.multiple},f=G({},d,{value:void 0}),lt("invalid",n);break;case"textarea":Vn(n,d),f=Ct(n,d),lt("invalid",n);break;default:f=d}hn(a,f),C=f;for(y in C)if(C.hasOwnProperty(y)){var P=C[y];y==="style"?Es(n,P):y==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&ws(n,P)):y==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&dn(n,P):typeof P=="number"&&dn(n,""+P):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?P!=null&&y==="onScroll"&&lt("scroll",n):P!=null&&ae(n,y,P,E))}switch(a){case"input":Be(n),xs(n,d,!1);break;case"textarea":Be(n),pr(n);break;case"option":d.value!=null&&n.setAttribute("value",""+Ee(d.value));break;case"select":n.multiple=!!d.multiple,y=d.value,y!=null?Nn(n,!!d.multiple,y,!1):d.defaultValue!=null&&Nn(n,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=oc)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Xt(i),null;case 6:if(n&&i.stateNode!=null)Vg(n,i,n.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=Di(Fa.current),Di(Ar.current),fc(i)){if(d=i.stateNode,a=i.memoizedProps,d[Cr]=i,(y=d.nodeValue!==a)&&(n=jn,n!==null))switch(n.tag){case 3:ic(d.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ic(d.nodeValue,a,(n.mode&1)!==0)}y&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[Cr]=i,i.stateNode=d}return Xt(i),null;case 13:if(ct(ht),d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ut&&Dn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Bm(),Ao(),i.flags|=98560,y=!1;else if(y=fc(i),d!==null&&d.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Cr]=i}else Ao(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Xt(i),y=!1}else ir!==null&&(bh(ir),ir=null),y=!0;if(!y)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(n!==null&&n.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(ht.current&1)!==0?Rt===0&&(Rt=3):Ih())),i.updateQueue!==null&&(i.flags|=4),Xt(i),null);case 4:return Do(),hh(n,i),n===null&&ja(i.stateNode.containerInfo),Xt(i),null;case 10:return Fd(i.type._context),Xt(i),null;case 17:return pn(i.type)&&lc(),Xt(i),null;case 19:if(ct(ht),y=i.memoizedState,y===null)return Xt(i),null;if(d=(i.flags&128)!==0,E=y.rendering,E===null)if(d)Ha(y,!1);else{if(Rt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(E=xc(n),E!==null){for(i.flags|=128,Ha(y,!1),d=E.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)y=a,n=d,y.flags&=14680066,E=y.alternate,E===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=E.childLanes,y.lanes=E.lanes,y.child=E.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=E.memoizedProps,y.memoizedState=E.memoizedState,y.updateQueue=E.updateQueue,y.type=E.type,n=E.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return rt(ht,ht.current&1|2),i.child}n=n.sibling}y.tail!==null&&at()>Vo&&(i.flags|=128,d=!0,Ha(y,!1),i.lanes=4194304)}else{if(!d)if(n=xc(E),n!==null){if(i.flags|=128,d=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ha(y,!0),y.tail===null&&y.tailMode==="hidden"&&!E.alternate&&!ut)return Xt(i),null}else 2*at()-y.renderingStartTime>Vo&&a!==1073741824&&(i.flags|=128,d=!0,Ha(y,!1),i.lanes=4194304);y.isBackwards?(E.sibling=i.child,i.child=E):(a=y.last,a!==null?a.sibling=E:i.child=E,y.last=E)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=at(),i.sibling=null,a=ht.current,rt(ht,d?a&1|2:a&1),i):(Xt(i),null);case 22:case 23:return Nh(),d=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(Mn&1073741824)!==0&&(Xt(i),i.subtreeFlags&6&&(i.flags|=8192)):Xt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function ew(n,i){switch(Dd(i),i.tag){case 1:return pn(i.type)&&lc(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Do(),ct(fn),ct(Kt),Gd(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return Hd(i),null;case 13:if(ct(ht),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ao()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ct(ht),null;case 4:return Do(),null;case 10:return Fd(i.type._context),null;case 22:case 23:return Nh(),null;case 24:return null;default:return null}}var kc=!1,Jt=!1,tw=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Lo(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){gt(n,i,d)}else a.current=null}function fh(n,i,a){try{a()}catch(d){gt(n,i,d)}}var Ug=!1;function nw(n,i){if(Nd=Jr,n=ym(),yd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,C=-1,P=-1,$=0,re=0,se=n,ne=null;t:for(;;){for(var fe;se!==a||f!==0&&se.nodeType!==3||(C=E+f),se!==y||d!==0&&se.nodeType!==3||(P=E+d),se.nodeType===3&&(E+=se.nodeValue.length),(fe=se.firstChild)!==null;)ne=se,se=fe;for(;;){if(se===n)break t;if(ne===a&&++$===f&&(C=E),ne===y&&++re===d&&(P=E),(fe=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=fe}a=C===-1||P===-1?null:{start:C,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Id={focusedElem:n,selectionRange:a},Jr=!1,ye=i;ye!==null;)if(i=ye,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ye=n;else for(;ye!==null;){i=ye;try{var xe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var we=xe.memoizedProps,_t=xe.memoizedState,F=i.stateNode,L=F.getSnapshotBeforeUpdate(i.elementType===i.type?we:or(i.type,we),_t);F.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){gt(i,i.return,le)}if(n=i.sibling,n!==null){n.return=i.return,ye=n;break}ye=i.return}return xe=Ug,Ug=!1,xe}function Wa(n,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&n)===n){var y=f.destroy;f.destroy=void 0,y!==void 0&&fh(i,a,y)}f=f.next}while(f!==d)}}function Cc(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function ph(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Fg(n){var i=n.alternate;i!==null&&(n.alternate=null,Fg(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Cr],delete i[Ma],delete i[Ad],delete i[V1],delete i[U1])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Bg(n){return n.tag===5||n.tag===3||n.tag===4}function zg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mh(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oc));else if(d!==4&&(n=n.child,n!==null))for(mh(n,i,a),n=n.sibling;n!==null;)mh(n,i,a),n=n.sibling}function gh(n,i,a){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(d!==4&&(n=n.child,n!==null))for(gh(n,i,a),n=n.sibling;n!==null;)gh(n,i,a),n=n.sibling}var zt=null,ar=!1;function Us(n,i,a){for(a=a.child;a!==null;)qg(n,i,a),a=a.sibling}function qg(n,i,a){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(_i,a)}catch{}switch(a.tag){case 5:Jt||Lo(a,i);case 6:var d=zt,f=ar;zt=null,Us(n,i,a),zt=d,ar=f,zt!==null&&(ar?(n=zt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):zt.removeChild(a.stateNode));break;case 18:zt!==null&&(ar?(n=zt,a=a.stateNode,n.nodeType===8?Cd(n.parentNode,a):n.nodeType===1&&Cd(n,a),Cs(n)):Cd(zt,a.stateNode));break;case 4:d=zt,f=ar,zt=a.stateNode.containerInfo,ar=!0,Us(n,i,a),zt=d,ar=f;break;case 0:case 11:case 14:case 15:if(!Jt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,E=y.destroy;y=y.tag,E!==void 0&&((y&2)!==0||(y&4)!==0)&&fh(a,i,E),f=f.next}while(f!==d)}Us(n,i,a);break;case 1:if(!Jt&&(Lo(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(C){gt(a,i,C)}Us(n,i,a);break;case 21:Us(n,i,a);break;case 22:a.mode&1?(Jt=(d=Jt)||a.memoizedState!==null,Us(n,i,a),Jt=d):Us(n,i,a);break;default:Us(n,i,a)}}function $g(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new tw),i.forEach(function(d){var f=dw.bind(null,n,d);a.has(d)||(a.add(d),d.then(f,f))})}}function lr(n,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var y=n,E=i,C=E;e:for(;C!==null;){switch(C.tag){case 5:zt=C.stateNode,ar=!1;break e;case 3:zt=C.stateNode.containerInfo,ar=!0;break e;case 4:zt=C.stateNode.containerInfo,ar=!0;break e}C=C.return}if(zt===null)throw Error(t(160));qg(y,E,f),zt=null,ar=!1;var P=f.alternate;P!==null&&(P.return=null),f.return=null}catch($){gt(f,i,$)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Hg(i,n),i=i.sibling}function Hg(n,i){var a=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(lr(i,n),Pr(n),d&4){try{Wa(3,n,n.return),Cc(3,n)}catch(we){gt(n,n.return,we)}try{Wa(5,n,n.return)}catch(we){gt(n,n.return,we)}}break;case 1:lr(i,n),Pr(n),d&512&&a!==null&&Lo(a,a.return);break;case 5:if(lr(i,n),Pr(n),d&512&&a!==null&&Lo(a,a.return),n.flags&32){var f=n.stateNode;try{dn(f,"")}catch(we){gt(n,n.return,we)}}if(d&4&&(f=n.stateNode,f!=null)){var y=n.memoizedProps,E=a!==null?a.memoizedProps:y,C=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{C==="input"&&y.type==="radio"&&y.name!=null&&Gr(f,y),Ts(C,E);var $=Ts(C,y);for(E=0;E<P.length;E+=2){var re=P[E],se=P[E+1];re==="style"?Es(f,se):re==="dangerouslySetInnerHTML"?ws(f,se):re==="children"?dn(f,se):ae(f,re,se,$)}switch(C){case"input":Tn(f,y);break;case"textarea":so(f,y);break;case"select":var ne=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?Nn(f,!!y.multiple,fe,!1):ne!==!!y.multiple&&(y.defaultValue!=null?Nn(f,!!y.multiple,y.defaultValue,!0):Nn(f,!!y.multiple,y.multiple?[]:"",!1))}f[Ma]=y}catch(we){gt(n,n.return,we)}}break;case 6:if(lr(i,n),Pr(n),d&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,y=n.memoizedProps;try{f.nodeValue=y}catch(we){gt(n,n.return,we)}}break;case 3:if(lr(i,n),Pr(n),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Cs(i.containerInfo)}catch(we){gt(n,n.return,we)}break;case 4:lr(i,n),Pr(n);break;case 13:lr(i,n),Pr(n),f=n.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(xh=at())),d&4&&$g(n);break;case 22:if(re=a!==null&&a.memoizedState!==null,n.mode&1?(Jt=($=Jt)||re,lr(i,n),Jt=$):lr(i,n),Pr(n),d&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!re&&(n.mode&1)!==0)for(ye=n,re=n.child;re!==null;){for(se=ye=re;ye!==null;){switch(ne=ye,fe=ne.child,ne.tag){case 0:case 11:case 14:case 15:Wa(4,ne,ne.return);break;case 1:Lo(ne,ne.return);var xe=ne.stateNode;if(typeof xe.componentWillUnmount=="function"){d=ne,a=ne.return;try{i=d,xe.props=i.memoizedProps,xe.state=i.memoizedState,xe.componentWillUnmount()}catch(we){gt(d,a,we)}}break;case 5:Lo(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Qg(se);continue}}fe!==null?(fe.return=ne,ye=fe):Qg(se)}re=re.sibling}e:for(re=null,se=n;;){if(se.tag===5){if(re===null){re=se;try{f=se.stateNode,$?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(C=se.stateNode,P=se.memoizedProps.style,E=P!=null&&P.hasOwnProperty("display")?P.display:null,C.style.display=gr("display",E))}catch(we){gt(n,n.return,we)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=$?"":se.memoizedProps}catch(we){gt(n,n.return,we)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===n)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===n)break e;for(;se.sibling===null;){if(se.return===null||se.return===n)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:lr(i,n),Pr(n),d&4&&$g(n);break;case 21:break;default:lr(i,n),Pr(n)}}function Pr(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Bg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(dn(f,""),d.flags&=-33);var y=zg(n);gh(n,y,f);break;case 3:case 4:var E=d.stateNode.containerInfo,C=zg(n);mh(n,C,E);break;default:throw Error(t(161))}}catch(P){gt(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function rw(n,i,a){ye=n,Wg(n)}function Wg(n,i,a){for(var d=(n.mode&1)!==0;ye!==null;){var f=ye,y=f.child;if(f.tag===22&&d){var E=f.memoizedState!==null||kc;if(!E){var C=f.alternate,P=C!==null&&C.memoizedState!==null||Jt;C=kc;var $=Jt;if(kc=E,(Jt=P)&&!$)for(ye=f;ye!==null;)E=ye,P=E.child,E.tag===22&&E.memoizedState!==null?Kg(f):P!==null?(P.return=E,ye=P):Kg(f);for(;y!==null;)ye=y,Wg(y),y=y.sibling;ye=f,kc=C,Jt=$}Gg(n)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,ye=y):Gg(n)}}function Gg(n){for(;ye!==null;){var i=ye;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Jt||Cc(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Jt)if(a===null)d.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:or(i.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=i.updateQueue;y!==null&&Qm(i,y,d);break;case 3:var E=i.updateQueue;if(E!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}Qm(i,E,a)}break;case 5:var C=i.stateNode;if(a===null&&i.flags&4){a=C;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var $=i.alternate;if($!==null){var re=$.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&Cs(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||i.flags&512&&ph(i)}catch(ne){gt(i,i.return,ne)}}if(i===n){ye=null;break}if(a=i.sibling,a!==null){a.return=i.return,ye=a;break}ye=i.return}}function Qg(n){for(;ye!==null;){var i=ye;if(i===n){ye=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ye=a;break}ye=i.return}}function Kg(n){for(;ye!==null;){var i=ye;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Cc(4,i)}catch(P){gt(i,a,P)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var f=i.return;try{d.componentDidMount()}catch(P){gt(i,f,P)}}var y=i.return;try{ph(i)}catch(P){gt(i,y,P)}break;case 5:var E=i.return;try{ph(i)}catch(P){gt(i,E,P)}}}catch(P){gt(i,i.return,P)}if(i===n){ye=null;break}var C=i.sibling;if(C!==null){C.return=i.return,ye=C;break}ye=i.return}}var sw=Math.ceil,Ac=Y.ReactCurrentDispatcher,yh=Y.ReactCurrentOwner,Gn=Y.ReactCurrentBatchConfig,Qe=0,Ot=null,Nt=null,qt=0,Mn=0,Oo=Ds(0),Rt=0,Ga=null,Li=0,Rc=0,vh=0,Qa=null,gn=null,xh=0,Vo=1/0,ls=null,Pc=!1,_h=null,Fs=null,jc=!1,Bs=null,Dc=0,Ka=0,wh=null,Mc=-1,Lc=0;function cn(){return(Qe&6)!==0?at():Mc!==-1?Mc:Mc=at()}function zs(n){return(n.mode&1)===0?1:(Qe&2)!==0&&qt!==0?qt&-qt:B1.transition!==null?(Lc===0&&(Lc=ga()),Lc):(n=We,n!==0||(n=window.event,n=n===void 0?16:fo(n.type)),n)}function cr(n,i,a,d){if(50<Ka)throw Ka=0,wh=null,Error(t(185));Ti(n,a,d),((Qe&2)===0||n!==Ot)&&(n===Ot&&((Qe&2)===0&&(Rc|=a),Rt===4&&qs(n,qt)),yn(n,d),a===1&&Qe===0&&(i.mode&1)===0&&(Vo=at()+500,uc&&Ls()))}function yn(n,i){var a=n.callbackNode;bi(n,i);var d=Kr(n,n===Ot?qt:0);if(d===0)a!==null&&io(a),n.callbackNode=null,n.callbackPriority=0;else if(i=d&-d,n.callbackPriority!==i){if(a!=null&&io(a),i===1)n.tag===0?F1(Xg.bind(null,n)):Lm(Xg.bind(null,n)),L1(function(){(Qe&6)===0&&Ls()}),a=null;else{switch(xr(d)){case 1:a=oo;break;case 4:a=fa;break;case 16:a=xi;break;case 536870912:a=ao;break;default:a=xi}a=iy(a,Yg.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Yg(n,i){if(Mc=-1,Lc=0,(Qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Uo()&&n.callbackNode!==a)return null;var d=Kr(n,n===Ot?qt:0);if(d===0)return null;if((d&30)!==0||(d&n.expiredLanes)!==0||i)i=Oc(n,d);else{i=d;var f=Qe;Qe|=2;var y=Zg();(Ot!==n||qt!==i)&&(ls=null,Vo=at()+500,Vi(n,i));do try{aw();break}catch(C){Jg(n,C)}while(!0);Ud(),Ac.current=y,Qe=f,Nt!==null?i=0:(Ot=null,qt=0,i=Rt)}if(i!==0){if(i===2&&(f=ma(n),f!==0&&(d=f,i=Eh(n,f))),i===1)throw a=Ga,Vi(n,0),qs(n,d),yn(n,at()),a;if(i===6)qs(n,d);else{if(f=n.current.alternate,(d&30)===0&&!iw(f)&&(i=Oc(n,d),i===2&&(y=ma(n),y!==0&&(d=y,i=Eh(n,y))),i===1))throw a=Ga,Vi(n,0),qs(n,d),yn(n,at()),a;switch(n.finishedWork=f,n.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:Ui(n,gn,ls);break;case 3:if(qs(n,d),(d&130023424)===d&&(i=xh+500-at(),10<i)){if(Kr(n,0)!==0)break;if(f=n.suspendedLanes,(f&d)!==d){cn(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=kd(Ui.bind(null,n,gn,ls),i);break}Ui(n,gn,ls);break;case 4:if(qs(n,d),(d&4194240)===d)break;for(i=n.eventTimes,f=-1;0<d;){var E=31-kn(d);y=1<<E,E=i[E],E>f&&(f=E),d&=~y}if(d=f,d=at()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*sw(d/1960))-d,10<d){n.timeoutHandle=kd(Ui.bind(null,n,gn,ls),d);break}Ui(n,gn,ls);break;case 5:Ui(n,gn,ls);break;default:throw Error(t(329))}}}return yn(n,at()),n.callbackNode===a?Yg.bind(null,n):null}function Eh(n,i){var a=Qa;return n.current.memoizedState.isDehydrated&&(Vi(n,i).flags|=256),n=Oc(n,i),n!==2&&(i=gn,gn=a,i!==null&&bh(i)),n}function bh(n){gn===null?gn=n:gn.push.apply(gn,n)}function iw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],y=f.getSnapshot;f=f.value;try{if(!sr(y(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qs(n,i){for(i&=~vh,i&=~Rc,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-kn(i),d=1<<a;n[a]=-1,i&=~d}}function Xg(n){if((Qe&6)!==0)throw Error(t(327));Uo();var i=Kr(n,0);if((i&1)===0)return yn(n,at()),null;var a=Oc(n,i);if(n.tag!==0&&a===2){var d=ma(n);d!==0&&(i=d,a=Eh(n,d))}if(a===1)throw a=Ga,Vi(n,0),qs(n,i),yn(n,at()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Ui(n,gn,ls),yn(n,at()),null}function Th(n,i){var a=Qe;Qe|=1;try{return n(i)}finally{Qe=a,Qe===0&&(Vo=at()+500,uc&&Ls())}}function Oi(n){Bs!==null&&Bs.tag===0&&(Qe&6)===0&&Uo();var i=Qe;Qe|=1;var a=Gn.transition,d=We;try{if(Gn.transition=null,We=1,n)return n()}finally{We=d,Gn.transition=a,Qe=i,(Qe&6)===0&&Ls()}}function Nh(){Mn=Oo.current,ct(Oo)}function Vi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,M1(a)),Nt!==null)for(a=Nt.return;a!==null;){var d=a;switch(Dd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&lc();break;case 3:Do(),ct(fn),ct(Kt),Gd();break;case 5:Hd(d);break;case 4:Do();break;case 13:ct(ht);break;case 19:ct(ht);break;case 10:Fd(d.type._context);break;case 22:case 23:Nh()}a=a.return}if(Ot=n,Nt=n=$s(n.current,null),qt=Mn=i,Rt=0,Ga=null,vh=Rc=Li=0,gn=Qa=null,ji!==null){for(i=0;i<ji.length;i++)if(a=ji[i],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,y=a.pending;if(y!==null){var E=y.next;y.next=f,d.next=E}a.pending=d}ji=null}return n}function Jg(n,i){do{var a=Nt;try{if(Ud(),_c.current=Tc,wc){for(var d=ft.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}wc=!1}if(Mi=0,Lt=At=ft=null,Ba=!1,za=0,yh.current=null,a===null||a.return===null){Rt=1,Ga=i,Nt=null;break}e:{var y=n,E=a.return,C=a,P=i;if(i=qt,C.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,re=C,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var fe=bg(E);if(fe!==null){fe.flags&=-257,Tg(fe,E,C,y,i),fe.mode&1&&Eg(y,$,i),i=fe,P=$;var xe=i.updateQueue;if(xe===null){var we=new Set;we.add(P),i.updateQueue=we}else xe.add(P);break e}else{if((i&1)===0){Eg(y,$,i),Ih();break e}P=Error(t(426))}}else if(ut&&C.mode&1){var _t=bg(E);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),Tg(_t,E,C,y,i),Od(Mo(P,C));break e}}y=P=Mo(P,C),Rt!==4&&(Rt=2),Qa===null?Qa=[y]:Qa.push(y),y=E;do{switch(y.tag){case 3:y.flags|=65536,i&=-i,y.lanes|=i;var F=_g(y,P,i);Gm(y,F);break e;case 1:C=P;var L=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Fs===null||!Fs.has(z)))){y.flags|=65536,i&=-i,y.lanes|=i;var le=wg(y,C,i);Gm(y,le);break e}}y=y.return}while(y!==null)}ty(a)}catch(be){i=be,Nt===a&&a!==null&&(Nt=a=a.return);continue}break}while(!0)}function Zg(){var n=Ac.current;return Ac.current=Tc,n===null?Tc:n}function Ih(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Ot===null||(Li&268435455)===0&&(Rc&268435455)===0||qs(Ot,qt)}function Oc(n,i){var a=Qe;Qe|=2;var d=Zg();(Ot!==n||qt!==i)&&(ls=null,Vi(n,i));do try{ow();break}catch(f){Jg(n,f)}while(!0);if(Ud(),Qe=a,Ac.current=d,Nt!==null)throw Error(t(261));return Ot=null,qt=0,Rt}function ow(){for(;Nt!==null;)ey(Nt)}function aw(){for(;Nt!==null&&!vi();)ey(Nt)}function ey(n){var i=sy(n.alternate,n,Mn);n.memoizedProps=n.pendingProps,i===null?ty(n):Nt=i,yh.current=null}function ty(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Z1(a,i,Mn),a!==null){Nt=a;return}}else{if(a=ew(a,i),a!==null){a.flags&=32767,Nt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Rt=6,Nt=null;return}}if(i=i.sibling,i!==null){Nt=i;return}Nt=i=n}while(i!==null);Rt===0&&(Rt=5)}function Ui(n,i,a){var d=We,f=Gn.transition;try{Gn.transition=null,We=1,lw(n,i,a,d)}finally{Gn.transition=f,We=d}return null}function lw(n,i,a,d){do Uo();while(Bs!==null);if((Qe&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(hd(n,y),n===Ot&&(Nt=Ot=null,qt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||jc||(jc=!0,iy(xi,function(){return Uo(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=Gn.transition,Gn.transition=null;var E=We;We=1;var C=Qe;Qe|=4,yh.current=null,nw(n,a),Hg(a,n),k1(Id),Jr=!!Nd,Id=Nd=null,n.current=a,rw(a),Qr(),Qe=C,We=E,Gn.transition=y}else n.current=a;if(jc&&(jc=!1,Bs=n,Dc=f),y=n.pendingLanes,y===0&&(Fs=null),$l(a.stateNode),yn(n,at()),i!==null)for(d=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Pc)throw Pc=!1,n=_h,_h=null,n;return(Dc&1)!==0&&n.tag!==0&&Uo(),y=n.pendingLanes,(y&1)!==0?n===wh?Ka++:(Ka=0,wh=n):Ka=0,Ls(),null}function Uo(){if(Bs!==null){var n=xr(Dc),i=Gn.transition,a=We;try{if(Gn.transition=null,We=16>n?16:n,Bs===null)var d=!1;else{if(n=Bs,Bs=null,Dc=0,(Qe&6)!==0)throw Error(t(331));var f=Qe;for(Qe|=4,ye=n.current;ye!==null;){var y=ye,E=y.child;if((ye.flags&16)!==0){var C=y.deletions;if(C!==null){for(var P=0;P<C.length;P++){var $=C[P];for(ye=$;ye!==null;){var re=ye;switch(re.tag){case 0:case 11:case 15:Wa(8,re,y)}var se=re.child;if(se!==null)se.return=re,ye=se;else for(;ye!==null;){re=ye;var ne=re.sibling,fe=re.return;if(Fg(re),re===$){ye=null;break}if(ne!==null){ne.return=fe,ye=ne;break}ye=fe}}}var xe=y.alternate;if(xe!==null){var we=xe.child;if(we!==null){xe.child=null;do{var _t=we.sibling;we.sibling=null,we=_t}while(we!==null)}}ye=y}}if((y.subtreeFlags&2064)!==0&&E!==null)E.return=y,ye=E;else e:for(;ye!==null;){if(y=ye,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Wa(9,y,y.return)}var F=y.sibling;if(F!==null){F.return=y.return,ye=F;break e}ye=y.return}}var L=n.current;for(ye=L;ye!==null;){E=ye;var z=E.child;if((E.subtreeFlags&2064)!==0&&z!==null)z.return=E,ye=z;else e:for(E=L;ye!==null;){if(C=ye,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:Cc(9,C)}}catch(be){gt(C,C.return,be)}if(C===E){ye=null;break e}var le=C.sibling;if(le!==null){le.return=C.return,ye=le;break e}ye=C.return}}if(Qe=f,Ls(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(_i,n)}catch{}d=!0}return d}finally{We=a,Gn.transition=i}}return!1}function ny(n,i,a){i=Mo(a,i),i=_g(n,i,1),n=Vs(n,i,1),i=cn(),n!==null&&(Ti(n,1,i),yn(n,i))}function gt(n,i,a){if(n.tag===3)ny(n,n,a);else for(;i!==null;){if(i.tag===3){ny(i,n,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Fs===null||!Fs.has(d))){n=Mo(a,n),n=wg(i,n,1),i=Vs(i,n,1),n=cn(),i!==null&&(Ti(i,1,n),yn(i,n));break}}i=i.return}}function cw(n,i,a){var d=n.pingCache;d!==null&&d.delete(i),i=cn(),n.pingedLanes|=n.suspendedLanes&a,Ot===n&&(qt&a)===a&&(Rt===4||Rt===3&&(qt&130023424)===qt&&500>at()-xh?Vi(n,0):vh|=a),yn(n,i)}function ry(n,i){i===0&&((n.mode&1)===0?i=1:(i=Is,Is<<=1,(Is&130023424)===0&&(Is=4194304)));var a=cn();n=is(n,i),n!==null&&(Ti(n,i,a),yn(n,a))}function uw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),ry(n,a)}function dw(n,i){var a=0;switch(n.tag){case 13:var d=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=n.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),ry(n,a)}var sy;sy=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||fn.current)mn=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return mn=!1,J1(n,i,a);mn=(n.flags&131072)!==0}else mn=!1,ut&&(i.flags&1048576)!==0&&Om(i,hc,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Sc(n,i),n=i.pendingProps;var f=So(i,Kt.current);jo(i,a),f=Yd(null,i,d,n,f,a);var y=Xd();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,pn(d)?(y=!0,cc(i)):y=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,qd(i),f.updater=Nc,i.stateNode=f,f._reactInternals=i,rh(i,d,n,a),i=ah(null,i,d,!0,y,a)):(i.tag=0,ut&&y&&jd(i),ln(null,i,f,a),i=i.child),i;case 16:d=i.elementType;e:{switch(Sc(n,i),n=i.pendingProps,f=d._init,d=f(d._payload),i.type=d,f=i.tag=fw(d),n=or(d,n),f){case 0:i=oh(null,i,d,n,a);break e;case 1:i=Ag(null,i,d,n,a);break e;case 11:i=Ng(null,i,d,n,a);break e;case 14:i=Ig(null,i,d,or(d.type,n),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:or(d,f),oh(n,i,d,f,a);case 1:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:or(d,f),Ag(n,i,d,f,a);case 3:e:{if(Rg(i),n===null)throw Error(t(387));d=i.pendingProps,y=i.memoizedState,f=y.element,Wm(n,i),vc(i,d,null,a);var E=i.memoizedState;if(d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){f=Mo(Error(t(423)),i),i=Pg(n,i,d,a,f);break e}else if(d!==f){f=Mo(Error(t(424)),i),i=Pg(n,i,d,a,f);break e}else for(Dn=js(i.stateNode.containerInfo.firstChild),jn=i,ut=!0,ir=null,a=$m(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ao(),d===f){i=as(n,i,a);break e}ln(n,i,d,a)}i=i.child}return i;case 5:return Km(i),n===null&&Ld(i),d=i.type,f=i.pendingProps,y=n!==null?n.memoizedProps:null,E=f.children,Sd(d,f)?E=null:y!==null&&Sd(d,y)&&(i.flags|=32),Cg(n,i),ln(n,i,E,a),i.child;case 6:return n===null&&Ld(i),null;case 13:return jg(n,i,a);case 4:return $d(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Ro(i,null,d,a):ln(n,i,d,a),i.child;case 11:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:or(d,f),Ng(n,i,d,f,a);case 7:return ln(n,i,i.pendingProps,a),i.child;case 8:return ln(n,i,i.pendingProps.children,a),i.child;case 12:return ln(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,f=i.pendingProps,y=i.memoizedProps,E=f.value,rt(mc,d._currentValue),d._currentValue=E,y!==null)if(sr(y.value,E)){if(y.children===f.children&&!fn.current){i=as(n,i,a);break e}}else for(y=i.child,y!==null&&(y.return=i);y!==null;){var C=y.dependencies;if(C!==null){E=y.child;for(var P=C.firstContext;P!==null;){if(P.context===d){if(y.tag===1){P=os(-1,a&-a),P.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var re=$.pending;re===null?P.next=P:(P.next=re.next,re.next=P),$.pending=P}}y.lanes|=a,P=y.alternate,P!==null&&(P.lanes|=a),Bd(y.return,a,i),C.lanes|=a;break}P=P.next}}else if(y.tag===10)E=y.type===i.type?null:y.child;else if(y.tag===18){if(E=y.return,E===null)throw Error(t(341));E.lanes|=a,C=E.alternate,C!==null&&(C.lanes|=a),Bd(E,a,i),E=y.sibling}else E=y.child;if(E!==null)E.return=y;else for(E=y;E!==null;){if(E===i){E=null;break}if(y=E.sibling,y!==null){y.return=E.return,E=y;break}E=E.return}y=E}ln(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,d=i.pendingProps.children,jo(i,a),f=Hn(f),d=d(f),i.flags|=1,ln(n,i,d,a),i.child;case 14:return d=i.type,f=or(d,i.pendingProps),f=or(d.type,f),Ig(n,i,d,f,a);case 15:return Sg(n,i,i.type,i.pendingProps,a);case 17:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:or(d,f),Sc(n,i),i.tag=1,pn(d)?(n=!0,cc(i)):n=!1,jo(i,a),vg(i,d,f),rh(i,d,f,a),ah(null,i,d,!0,n,a);case 19:return Mg(n,i,a);case 22:return kg(n,i,a)}throw Error(t(156,i.tag))};function iy(n,i){return ha(n,i)}function hw(n,i,a,d){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,i,a,d){return new hw(n,i,a,d)}function Sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function fw(n){if(typeof n=="function")return Sh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===Se)return 14}return 2}function $s(n,i){var a=n.alternate;return a===null?(a=Qn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Vc(n,i,a,d,f,y){var E=2;if(d=n,typeof n=="function")Sh(n)&&(E=1);else if(typeof n=="string")E=5;else e:switch(n){case R:return Fi(a.children,f,y,i);case I:E=8,f|=8;break;case A:return n=Qn(12,a,i,f|2),n.elementType=A,n.lanes=y,n;case T:return n=Qn(13,a,i,f),n.elementType=T,n.lanes=y,n;case ee:return n=Qn(19,a,i,f),n.elementType=ee,n.lanes=y,n;case De:return Uc(a,f,y,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:E=10;break e;case S:E=9;break e;case M:E=11;break e;case Se:E=14;break e;case Ne:E=16,d=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=Qn(E,a,i,f),i.elementType=n,i.type=d,i.lanes=y,i}function Fi(n,i,a,d){return n=Qn(7,n,d,i),n.lanes=a,n}function Uc(n,i,a,d){return n=Qn(22,n,d,i),n.elementType=De,n.lanes=a,n.stateNode={isHidden:!1},n}function kh(n,i,a){return n=Qn(6,n,null,i),n.lanes=a,n}function Ch(n,i,a){return i=Qn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function pw(n,i,a,d,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ya(0),this.expirationTimes=ya(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ya(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ah(n,i,a,d,f,y,E,C,P){return n=new pw(n,i,a,C,P),i===1?(i=1,y===!0&&(i|=8)):i=0,y=Qn(3,null,null,i),n.current=y,y.stateNode=n,y.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},qd(y),n}function mw(n,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:n,containerInfo:i,implementation:a}}function oy(n){if(!n)return Ms;n=n._reactInternals;e:{if(nr(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(pn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(pn(a))return Dm(n,a,i)}return i}function ay(n,i,a,d,f,y,E,C,P){return n=Ah(a,d,!0,n,f,y,E,C,P),n.context=oy(null),a=n.current,d=cn(),f=zs(a),y=os(d,f),y.callback=i??null,Vs(a,y,f),n.current.lanes=f,Ti(n,f,d),yn(n,d),n}function Fc(n,i,a,d){var f=i.current,y=cn(),E=zs(f);return a=oy(a),i.context===null?i.context=a:i.pendingContext=a,i=os(y,E),i.payload={element:n},d=d===void 0?null:d,d!==null&&(i.callback=d),n=Vs(f,i,E),n!==null&&(cr(n,f,E,y),yc(n,f,E)),E}function Bc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ly(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Rh(n,i){ly(n,i),(n=n.alternate)&&ly(n,i)}function gw(){return null}var cy=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ph(n){this._internalRoot=n}zc.prototype.render=Ph.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Fc(n,i,null,null)},zc.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Oi(function(){Fc(null,n,null,null)}),i[ts]=null}};function zc(n){this._internalRoot=n}zc.prototype.unstable_scheduleHydration=function(n){if(n){var i=wa();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Cn.length&&i!==0&&i<Cn[a].priority;a++);Cn.splice(a,0,n),a===0&&uo(n)}};function jh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function qc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function uy(){}function yw(n,i,a,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var $=Bc(E);y.call($)}}var E=ay(i,d,n,0,null,!1,!1,"",uy);return n._reactRootContainer=E,n[ts]=E.current,ja(n.nodeType===8?n.parentNode:n),Oi(),E}for(;f=n.lastChild;)n.removeChild(f);if(typeof d=="function"){var C=d;d=function(){var $=Bc(P);C.call($)}}var P=Ah(n,0,!1,null,null,!1,!1,"",uy);return n._reactRootContainer=P,n[ts]=P.current,ja(n.nodeType===8?n.parentNode:n),Oi(function(){Fc(i,P,a,d)}),P}function $c(n,i,a,d,f){var y=a._reactRootContainer;if(y){var E=y;if(typeof f=="function"){var C=f;f=function(){var P=Bc(E);C.call(P)}}Fc(i,E,n,f)}else E=yw(a,i,n,f,d);return Bc(E)}xa=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ye(i.pendingLanes);a!==0&&(va(i,a|1),yn(i,at()),(Qe&6)===0&&(Vo=at()+500,Ls()))}break;case 13:Oi(function(){var d=is(n,1);if(d!==null){var f=cn();cr(d,n,1,f)}}),Rh(n,1)}},lo=function(n){if(n.tag===13){var i=is(n,134217728);if(i!==null){var a=cn();cr(i,n,134217728,a)}Rh(n,134217728)}},_a=function(n){if(n.tag===13){var i=zs(n),a=is(n,i);if(a!==null){var d=cn();cr(a,n,i,d)}Rh(n,i)}},wa=function(){return We},Ea=function(n,i){var a=We;try{return We=n,i()}finally{We=a}},er=function(n,i,a){switch(i){case"input":if(Tn(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==n&&d.form===n.form){var f=ac(d);if(!f)throw Error(t(90));it(d),Tn(d,f)}}}break;case"textarea":so(n,a);break;case"select":i=a.value,i!=null&&Nn(n,!!a.multiple,i,!1)}},vt=Th,Dt=Oi;var vw={usingClientEntryPoint:!1,Events:[La,No,ac,Re,tt,Th]},Ya={findFiberByHostInstance:Ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xw={bundleType:Ya.bundleType,version:Ya.version,rendererPackageName:Ya.rendererPackageName,rendererConfig:Ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ql(n),n===null?null:n.stateNode},findFiberByHostInstance:Ya.findFiberByHostInstance||gw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{_i=Hc.inject(xw),Sn=Hc}catch{}}return vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vw,vn.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jh(i))throw Error(t(200));return mw(n,i,null,a)},vn.createRoot=function(n,i){if(!jh(n))throw Error(t(299));var a=!1,d="",f=cy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Ah(n,1,!1,null,null,a,!1,d,f),n[ts]=i.current,ja(n.nodeType===8?n.parentNode:n),new Ph(i)},vn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=ql(i),n=n===null?null:n.stateNode,n},vn.flushSync=function(n){return Oi(n)},vn.hydrate=function(n,i,a){if(!qc(i))throw Error(t(200));return $c(null,n,i,!0,a)},vn.hydrateRoot=function(n,i,a){if(!jh(n))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,y="",E=cy;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),i=ay(i,null,n,1,a??null,f,!1,y,E),n[ts]=i.current,ja(n),d)for(n=0;n<d.length;n++)a=d[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new zc(i)},vn.render=function(n,i,a){if(!qc(i))throw Error(t(200));return $c(null,n,i,!1,a)},vn.unmountComponentAtNode=function(n){if(!qc(n))throw Error(t(40));return n._reactRootContainer?(Oi(function(){$c(null,null,n,!1,function(){n._reactRootContainer=null,n[ts]=null})}),!0):!1},vn.unstable_batchedUpdates=Th,vn.unstable_renderSubtreeIntoContainer=function(n,i,a,d){if(!qc(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $c(n,i,a,!1,d)},vn.version="18.3.1-next-f1338f8080-20240426",vn}var vy;function bv(){if(vy)return Lh.exports;vy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Lh.exports=Iw(),Lh.exports}var xy;function Sw(){if(xy)return Wc;xy=1;var r=bv();return Wc.createRoot=r.createRoot,Wc.hydrateRoot=r.hydrateRoot,Wc}var kw=Sw(),te=Tl();const de=Qf(te);const Cw=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Aw=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),_y=r=>{const e=Aw(r);return e.charAt(0).toUpperCase()+e.slice(1)},Tv=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();var Rw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Pw=te.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:h,...p},m)=>te.createElement("svg",{ref:m,...Rw,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Tv("lucide",o),...p},[...h.map(([g,_])=>te.createElement(g,_)),...Array.isArray(c)?c:[c]]));const Ue=(r,e)=>{const t=te.forwardRef(({className:s,...o},c)=>te.createElement(Pw,{ref:c,iconNode:e,className:Tv(`lucide-${Cw(_y(r))}`,`lucide-${r}`,s),...o}));return t.displayName=_y(r),t};const jw=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Gc=Ue("activity",jw);const Dw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mw=Ue("arrow-left",Dw);const Lw=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],Xo=Ue("beaker",Lw);const Ow=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ff=Ue("bell",Ow);const Vw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kf=Ue("calendar",Vw);const Uw=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],wy=Ue("camera",Uw);const Fw=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bw=Ue("chevron-left",Fw);const zw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qw=Ue("chevron-right",zw);const $w=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Hw=Ue("circle-alert",$w);const Ww=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hl=Ue("circle-check-big",Ww);const Gw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Qw=Ue("clipboard-list",Gw);const Kw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Nv=Ue("clock",Kw);const Yw=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xw=Ue("copy",Yw);const Jw=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Iv=Ue("database",Jw);const Zw=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ey=Ue("download",Zw);const eE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tE=Ue("eye-off",eE);const nE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Sv=Ue("eye",nE);const rE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pf=Ue("file-text",rE);const sE=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],qi=Ue("flask-conical",sE);const iE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oE=Ue("info",iE);const aE=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],lE=Ue("layout-dashboard",aE);const cE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Yf=Ue("lock",cE);const uE=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Uh=Ue("log-in",uE);const dE=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ru=Ue("log-out",dE);const hE=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],kv=Ue("mail",hE);const fE=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],pE=Ue("menu",fE);const mE=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xs=Ue("package",mE);const gE=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],yE=Ue("pen",gE);const vE=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],xE=Ue("play",vE);const _E=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mf=Ue("plus",_E);const wE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],EE=Ue("qr-code",wE);const bE=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],sl=Ue("search",bE);const TE=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NE=Ue("settings",TE);const IE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Xf=Ue("shield",IE);const SE=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Jf=Ue("square-pen",SE);const kE=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Cv=Ue("trash-2",kE);const CE=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],gf=Ue("trending-up",CE);const AE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],il=Ue("triangle-alert",AE);const RE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],by=Ue("user-plus",RE);const PE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yf=Ue("user",PE);const jE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Av=Ue("users",jE);const DE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Rv=Ue("wrench",DE);const ME=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nn=Ue("x",ME);const LE=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],OE=Ue("zap",LE);function VE({onGetStarted:r}){return l.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm",children:l.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16 sm:h-20",children:[l.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 p-2 sm:p-2.5 rounded-xl shadow-lg group-hover:scale-110 transition-transform",children:l.jsx(Xo,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg sm:text-xl text-gray-900",children:"Wayamba University of Sri Lanka"}),l.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Laboratory Inventory Management System"})]})]}),l.jsx("button",{onClick:r,className:"px-5 sm:px-6 py-2.5 text-sm sm:text-base bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-200 hover:scale-105",children:"Sign In"})]})})})}function UE({onGetStarted:r}){return l.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-blue-50 via-white to-purple-50 overflow-x-hidden",children:[l.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm",children:l.jsx("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16 sm:h-20",children:[l.jsxs("div",{className:"flex items-center gap-2 group cursor-pointer",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-600 p-2 sm:p-2.5 rounded-xl shadow-lg group-hover:scale-110 transition-transform",children:l.jsx(Xo,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg sm:text-xl text-gray-900",children:"Wayamba University of Sri Lanka"}),l.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Laboratory Inventory Management System"})]})]}),l.jsx("button",{onClick:r,className:"px-5 sm:px-6 py-2.5 text-sm sm:text-base bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-200 hover:scale-105",children:"Sign In"})]})})}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("br",{}),l.jsx("main",{className:"flex-1 w-full pt-20 sm:pt-24",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 pb-20",children:[l.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12 sm:mb-16",children:[l.jsx("h2",{className:"text-4xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight text-blue-900 mb-6",children:"Welcome to Labventory"}),l.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 mb-8 leading-relaxed",children:"Modern laboratory inventory management system for efficient tracking of equipment, chemicals, and assets."}),l.jsx("button",{onClick:r,className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:shadow-2xl transition-all transform hover:scale-105 text-base font-medium",children:"Access Dashboard"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-xl transition-shadow h-full",children:[l.jsx("div",{className:"bg-blue-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 mx-auto",children:l.jsx(OE,{className:"w-6 h-6 text-blue-600"})}),l.jsx("h3",{className:"text-lg text-gray-900 mb-2 font-semibold text-center",children:"Real-Time Tracking"}),l.jsx("p",{className:"text-sm text-gray-600 leading-relaxed text-center",children:"Monitor inventory status with instant updates across all labs"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-xl transition-shadow h-full",children:[l.jsx("div",{className:"bg-purple-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 mx-auto",children:l.jsx(Xo,{className:"w-6 h-6 text-purple-600"})}),l.jsx("h3",{className:"text-lg text-gray-900 mb-2 font-semibold text-center",children:"QR Code System"}),l.jsx("p",{className:"text-sm text-gray-600 leading-relaxed text-center",children:"Quick check-in/out using QR code scanning technology"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-xl transition-shadow h-full",children:[l.jsx("div",{className:"bg-green-100 w-12 h-12 rounded-lg flex items-center justify-center mb-4 mx-auto",children:l.jsx(Xf,{className:"w-6 h-6 text-green-600"})}),l.jsx("h3",{className:"text-lg text-gray-900 mb-2 font-semibold text-center",children:"Secure Access"}),l.jsx("p",{className:"text-sm text-gray-600 leading-relaxed text-center",children:"Role-based permissions for administrators, teachers, and staff"})]})]}),l.jsx("br",{}),l.jsx("br",{}),l.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl shadow-xl p-8 lg:p-12 text-white text-center mb-16",children:[l.jsx("h3",{className:"text-2xl lg:text-3xl mb-4 font-bold",children:"For Wayamba University Labs"}),l.jsx("p",{className:"text-base lg:text-lg text-blue-100 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Designed specifically for the laboratory management needs of Wayamba University of Sri Lanka, supporting multiple departments and facilities."}),l.jsxs("div",{className:"flex flex-wrap justify-center gap-4 text-sm",children:[l.jsx("div",{className:"bg-white/10 backdrop-blur px-4 py-2 rounded-lg",children:"Science Faculty"}),l.jsx("div",{className:"bg-white/10 backdrop-blur px-4 py-2 rounded-lg",children:"Engineering Labs"}),l.jsx("div",{className:"bg-white/10 backdrop-blur px-4 py-2 rounded-lg",children:"Research Centers"})]})]})]})})]})}const FE=()=>{};var Ty={};const Pv=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},BE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[t++],h=r[t++],p=r[t++],m=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const c=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},jv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,p=h?r[o+1]:0,m=o+2<r.length,g=m?r[o+2]:0,_=c>>2,x=(c&3)<<4|p>>4;let b=(p&15)<<2|g>>6,k=g&63;m||(k=64,h||(b=64)),s.push(t[_],t[x],t[b],t[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Pv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):BE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=t[r.charAt(o++)],p=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const x=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||p==null||g==null||x==null)throw new zE;const b=c<<2|p>>4;if(s.push(b),g!==64){const k=p<<4&240|g>>2;if(s.push(k),x!==64){const j=g<<6&192|x;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class zE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qE=function(r){const e=Pv(r);return jv.encodeByteArray(e,!0)},pu=function(r){return qE(r).replace(/\./g,"")},Dv=function(r){try{return jv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $E(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const HE=()=>$E().__FIREBASE_DEFAULTS__,WE=()=>{if(typeof process>"u"||typeof Ty>"u")return;const r=Ty.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},GE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Dv(r[1]);return e&&JSON.parse(e)},Vu=()=>{try{return FE()||HE()||WE()||GE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Mv=r=>Vu()?.emulatorHosts?.[r],Lv=r=>{const e=Mv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Ov=()=>Vu()?.config,Vv=r=>Vu()?.[`_${r}`];class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function Ji(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Zf(r){return(await fetch(r,{credentials:"include"})).ok}function Uv(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[pu(JSON.stringify(t)),pu(JSON.stringify(h)),""].join(".")}const ol={};function KE(){const r={prod:[],emulator:[]};for(const e of Object.keys(ol))ol[e]?r.emulator.push(e):r.prod.push(e);return r}function YE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Ny=!1;function ep(r,e){if(typeof window>"u"||typeof document>"u"||!Ji(window.location.host)||ol[r]===e||ol[r]||Ny)return;ol[r]=e;function t(b){return`__firebase__banner__${b}`}const s="__firebase__banner",c=KE().prod.length>0;function h(){const b=document.getElementById(s);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,k){b.setAttribute("width","24"),b.setAttribute("id",k),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Ny=!0,h()},b}function _(b,k){b.setAttribute("id",k),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function x(){const b=YE(s),k=t("text"),j=document.getElementById(k)||document.createElement("span"),U=t("learnmore"),V=document.getElementById(U)||document.createElement("a"),q=t("preprendIcon"),J=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ae=b.element;p(ae),_(V,U);const Y=g();m(J,q),ae.append(J,j,V,Y),document.body.appendChild(ae)}c?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function JE(){const r=Vu()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function e2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function t2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function n2(){const r=rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function r2(){return!JE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s2(){try{return typeof indexedDB=="object"}catch{return!1}}function i2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const o2="FirebaseError";class Hr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=o2,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nl.prototype.create)}}class Nl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?a2(c,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Hr(o,p,s)}}function a2(r,e){return r.replace(l2,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const l2=/\{\$([^}]+)}/g;function c2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Wi(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=r[o],h=e[o];if(Iy(c)&&Iy(h)){if(!Wi(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Iy(r){return r!==null&&typeof r=="object"}function Il(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ja(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Za(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function u2(r,e){const t=new d2(r,e);return t.subscribe.bind(t)}class d2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");h2(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Fh),o.error===void 0&&(o.error=Fh),o.complete===void 0&&(o.complete=Fh);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Fh(){}function jt(r){return r&&r._delegate?r._delegate:r}class ri{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Bi="[DEFAULT]";class f2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m2(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);s===p&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:p2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p2(r){return r===Bi?void 0:r}function m2(r){return r.instantiationMode==="EAGER"}class g2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new f2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const y2={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},v2=qe.INFO,x2={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},_2=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=x2[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tp{constructor(e){this.name=e,this._logLevel=v2,this._logHandler=_2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?y2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const w2=(r,e)=>e.some(t=>r instanceof t);let Sy,ky;function E2(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b2(){return ky||(ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fv=new WeakMap,vf=new WeakMap,Bv=new WeakMap,Bh=new WeakMap,np=new WeakMap;function T2(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{t(Zs(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Fv.set(t,r)}).catch(()=>{}),np.set(e,r),e}function N2(r){if(vf.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});vf.set(r,e)}let xf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return vf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Bv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function I2(r){xf=r(xf)}function S2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(zh(this),e,...t);return Bv.set(s,e.sort?e.sort():[e]),Zs(s)}:b2().includes(r)?function(...e){return r.apply(zh(this),e),Zs(Fv.get(this))}:function(...e){return Zs(r.apply(zh(this),e))}}function k2(r){return typeof r=="function"?S2(r):(r instanceof IDBTransaction&&N2(r),w2(r,E2())?new Proxy(r,xf):r)}function Zs(r){if(r instanceof IDBRequest)return T2(r);if(Bh.has(r))return Bh.get(r);const e=k2(r);return e!==r&&(Bh.set(r,e),np.set(e,r)),e}const zh=r=>np.get(r);function C2(r,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,e),p=Zs(h);return s&&h.addEventListener("upgradeneeded",m=>{s(Zs(h.result),m.oldVersion,m.newVersion,Zs(h.transaction),m)}),t&&h.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),p.then(m=>{c&&m.addEventListener("close",()=>c()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const A2=["get","getKey","getAll","getAllKeys","count"],R2=["put","add","delete","clear"],qh=new Map;function Cy(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(qh.get(e))return qh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=R2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||A2.includes(t)))return;const c=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[t](...p),o&&m.done]))[0]};return qh.set(e,c),c}I2(r=>({...r,get:(e,t,s)=>Cy(e,t)||r.get(e,t,s),has:(e,t)=>!!Cy(e,t)||r.has(e,t)}));class P2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(j2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function j2(r){return r.getComponent()?.type==="VERSION"}const _f="@firebase/app",Ay="0.14.6";const fs=new tp("@firebase/app"),D2="@firebase/app-compat",M2="@firebase/analytics-compat",L2="@firebase/analytics",O2="@firebase/app-check-compat",V2="@firebase/app-check",U2="@firebase/auth",F2="@firebase/auth-compat",B2="@firebase/database",z2="@firebase/data-connect",q2="@firebase/database-compat",$2="@firebase/functions",H2="@firebase/functions-compat",W2="@firebase/installations",G2="@firebase/installations-compat",Q2="@firebase/messaging",K2="@firebase/messaging-compat",Y2="@firebase/performance",X2="@firebase/performance-compat",J2="@firebase/remote-config",Z2="@firebase/remote-config-compat",eb="@firebase/storage",tb="@firebase/storage-compat",nb="@firebase/firestore",rb="@firebase/ai",sb="@firebase/firestore-compat",ib="firebase",ob="12.6.0";const wf="[DEFAULT]",ab={[_f]:"fire-core",[D2]:"fire-core-compat",[L2]:"fire-analytics",[M2]:"fire-analytics-compat",[V2]:"fire-app-check",[O2]:"fire-app-check-compat",[U2]:"fire-auth",[F2]:"fire-auth-compat",[B2]:"fire-rtdb",[z2]:"fire-data-connect",[q2]:"fire-rtdb-compat",[$2]:"fire-fn",[H2]:"fire-fn-compat",[W2]:"fire-iid",[G2]:"fire-iid-compat",[Q2]:"fire-fcm",[K2]:"fire-fcm-compat",[Y2]:"fire-perf",[X2]:"fire-perf-compat",[J2]:"fire-rc",[Z2]:"fire-rc-compat",[eb]:"fire-gcs",[tb]:"fire-gcs-compat",[nb]:"fire-fst",[sb]:"fire-fst-compat",[rb]:"fire-vertex","fire-js":"fire-js",[ib]:"fire-js-all"};const mu=new Map,lb=new Map,Ef=new Map;function Ry(r,e){try{r.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Gi(r){const e=r.name;if(Ef.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Ef.set(e,r);for(const t of mu.values())Ry(t,r);for(const t of lb.values())Ry(t,r);return!0}function Uu(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ln(r){return r==null?!1:r.settings!==void 0}const cb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new Nl("app","Firebase",cb);class ub{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}const Zi=ob;function zv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:wf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ei.create("bad-app-name",{appName:String(o)});if(t||(t=Ov()),!t)throw ei.create("no-options");const c=mu.get(o);if(c){if(Wi(t,c.options)&&Wi(s,c.config))return c;throw ei.create("duplicate-app",{appName:o})}const h=new g2(o);for(const m of Ef.values())h.addComponent(m);const p=new ub(t,s,h);return mu.set(o,p),p}function rp(r=wf){const e=mu.get(r);if(!e&&r===wf&&Ov())return zv();if(!e)throw ei.create("no-app",{appName:r});return e}function Lr(r,e,t){let s=ab[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(h.join(" "));return}Gi(new ri(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const db="firebase-heartbeat-database",hb=1,fl="firebase-heartbeat-store";let $h=null;function qv(){return $h||($h=C2(db,hb,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(fl)}catch(t){console.warn(t)}}}}).catch(r=>{throw ei.create("idb-open",{originalErrorMessage:r.message})})),$h}async function fb(r){try{const t=(await qv()).transaction(fl),s=await t.objectStore(fl).get($v(r));return await t.done,s}catch(e){if(e instanceof Hr)fs.warn(e.message);else{const t=ei.create("idb-get",{originalErrorMessage:e?.message});fs.warn(t.message)}}}async function Py(r,e){try{const s=(await qv()).transaction(fl,"readwrite");await s.objectStore(fl).put(e,$v(r)),await s.done}catch(t){if(t instanceof Hr)fs.warn(t.message);else{const s=ei.create("idb-set",{originalErrorMessage:t?.message});fs.warn(s.message)}}}function $v(r){return`${r.name}!${r.options.appId}`}const pb=1024,mb=30;class gb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vb(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>mb){const o=xb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jy(),{heartbeatsToSend:t,unsentEntries:s}=yb(this._heartbeatsCache.heartbeats),o=pu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return fs.warn(e),""}}}function jy(){return new Date().toISOString().substring(0,10)}function yb(r,e=pb){const t=[];let s=r.slice();for(const o of r){const c=t.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),Dy(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Dy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class vb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s2()?i2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Py(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Py(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dy(r){return pu(JSON.stringify({version:2,heartbeats:r})).length}function xb(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}function _b(r){Gi(new ri("platform-logger",e=>new P2(e),"PRIVATE")),Gi(new ri("heartbeat",e=>new gb(e),"PRIVATE")),Lr(_f,Ay,r),Lr(_f,Ay,"esm2020"),Lr("fire-js","")}_b("");function Hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=Hv,Wv=new Nl("auth","Firebase",Hv());const gu=new tp("@firebase/auth");function Eb(r,...e){gu.logLevel<=qe.WARN&&gu.warn(`Auth (${Zi}): ${r}`,...e)}function su(r,...e){gu.logLevel<=qe.ERROR&&gu.error(`Auth (${Zi}): ${r}`,...e)}function hr(r,...e){throw sp(r,...e)}function Or(r,...e){return sp(r,...e)}function Gv(r,e,t){const s={...wb(),[e]:t};return new Nl("auth","Firebase",s).create(e,{appName:r.name})}function ds(r){return Gv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Wv.create(r,...e)}function Pe(r,e,...t){if(!r)throw sp(e,...t)}function cs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw su(e),new Error(e)}function ps(r,e){r||cs(e)}function bf(){return typeof self<"u"&&self.location?.href||""}function bb(){return My()==="http:"||My()==="https:"}function My(){return typeof self<"u"&&self.location?.protocol||null}function Tb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bb()||e2()||"connection"in navigator)?navigator.onLine:!0}function Nb(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Sl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=XE()||t2()}get(){return Tb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ip(r,e){ps(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Qv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ib={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Sb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kb=new Sl(3e4,6e4);function ui(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function di(r,e,t,s,o={}){return Kv(r,o,async()=>{let c={},h={};s&&(e==="GET"?h=s:c={body:JSON.stringify(s)});const p=Il({key:r.config.apiKey,...h}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:m,...c};return ZE()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Ji(r.emulatorConfig.host)&&(g.credentials="include"),Qv.fetch()(await Yv(r,r.config.apiHost,t,p),g)})}async function Kv(r,e,t){r._canInitEmulator=!1;const s={...Ib,...e};try{const o=new Ab(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Qc(r,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qc(r,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw Qc(r,"email-already-in-use",h);if(m==="USER_DISABLED")throw Qc(r,"user-disabled",h);const _=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Gv(r,_,g);hr(r,_)}}catch(o){if(o instanceof Hr)throw o;hr(r,"network-request-failed",{message:String(o)})}}async function kl(r,e,t,s,o={}){const c=await di(r,e,t,s,o);return"mfaPendingCredential"in c&&hr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Yv(r,e,t,s){const o=`${e}${t}?${s}`,c=r,h=c.config.emulator?ip(r.config,o):`${r.config.apiScheme}://${o}`;return Sb.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function Cb(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ab{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Or(this.auth,"network-request-failed")),kb.get())})}}function Qc(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Or(r,e,s);return o.customData._tokenResponse=t,o}function Ly(r){return r!==void 0&&r.enterprise!==void 0}class Rb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Cb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Pb(r,e){return di(r,"GET","/v2/recaptchaConfig",ui(r,e))}async function jb(r,e){return di(r,"POST","/v1/accounts:delete",e)}async function yu(r,e){return di(r,"POST","/v1/accounts:lookup",e)}function al(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Db(r,e=!1){const t=jt(r),s=await t.getIdToken(e),o=op(s);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:s,authTime:al(Hh(o.auth_time)),issuedAtTime:al(Hh(o.iat)),expirationTime:al(Hh(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Hh(r){return Number(r)*1e3}function op(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const o=Dv(t);return o?JSON.parse(o):(su("Failed to decode base64 JWT payload"),null)}catch(o){return su("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Oy(r){const e=op(r);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pl(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Hr&&Mb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Mb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Lb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Tf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=al(this.lastLoginAt),this.creationTime=al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vu(r){const e=r.auth,t=await r.getIdToken(),s=await pl(r,yu(e,{idToken:t}));Pe(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?Xv(o.providerUserInfo):[],h=Vb(r.providerData,c),p=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!h?.length,g=p?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Tf(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,_)}async function Ob(r){const e=jt(r);await vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Vb(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Xv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Ub(r,e){const t=await Kv(r,{},async()=>{const s=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,h=await Yv(r,o,"/v1/token",`key=${c}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return r.emulatorConfig&&Ji(r.emulatorConfig.host)&&(m.credentials="include"),Qv.fetch()(h,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Fb(r,e){return di(r,"POST","/v2/accounts:revokeToken",ui(r,e))}class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Oy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Oy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await Ub(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,h=new Go;return s&&(Pe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Pe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Pe(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return cs("not implemented")}}function Ws(r,e){Pe(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ur{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Lb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await pl(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Db(this,e)}reload(){return Ob(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ur({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await vu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(ds(this.auth));const e=await this.getIdToken();return await pl(this,jb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:x,emailVerified:b,isAnonymous:k,providerData:j,stsTokenManager:U}=t;Pe(x&&U,e,"internal-error");const V=Go.fromJSON(this.name,U);Pe(typeof x=="string",e,"internal-error"),Ws(s,e.name),Ws(o,e.name),Pe(typeof b=="boolean",e,"internal-error"),Pe(typeof k=="boolean",e,"internal-error"),Ws(c,e.name),Ws(h,e.name),Ws(p,e.name),Ws(m,e.name),Ws(g,e.name),Ws(_,e.name);const q=new ur({uid:x,auth:e,email:o,emailVerified:b,displayName:s,isAnonymous:k,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:V,createdAt:g,lastLoginAt:_});return j&&Array.isArray(j)&&(q.providerData=j.map(J=>({...J}))),m&&(q._redirectEventId=m),q}static async _fromIdTokenResponse(e,t,s=!1){const o=new Go;o.updateFromServerResponse(t);const c=new ur({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await vu(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Xv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,p=new Go;p.updateFromIdToken(s);const m=new ur({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(m,g),m}}const Vy=new Map;function us(r){ps(r instanceof Function,"Expected a class definition");let e=Vy.get(r);return e?(ps(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Vy.set(r,e),e)}class Jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Jv.type="NONE";const Uy=Jv;function iu(r,e,t){return`firebase:${r}:${e}:${t}`}class Qo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=iu(this.userKey,o.apiKey,c),this.fullPersistenceKey=iu("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yu(this.auth,{idToken:e}).catch(()=>{});return t?ur._fromGetAccountInfoResponse(this.auth,t,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Qo(us(Uy),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||us(Uy);const h=iu(s,e.config.apiKey,e.name);let p=null;for(const g of t)try{const _=await g._get(h);if(_){let x;if(typeof _=="string"){const b=await yu(e,{idToken:_}).catch(()=>{});if(!b)break;x=await ur._fromGetAccountInfoResponse(e,b,_)}else x=ur._fromJSON(e,_);g!==c&&(p=x),c=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new Qo(c,e,s):(c=m[0],p&&await c._set(h,p.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(h)}catch{}})),new Qo(c,e,s))}}function Fy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sx(e))return"Blackberry";if(ix(e))return"Webos";if(ex(e))return"Safari";if((e.includes("chrome/")||tx(e))&&!e.includes("edge/"))return"Chrome";if(rx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if(s?.length===2)return s[1]}return"Other"}function Zv(r=rn()){return/firefox\//i.test(r)}function ex(r=rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tx(r=rn()){return/crios\//i.test(r)}function nx(r=rn()){return/iemobile/i.test(r)}function rx(r=rn()){return/android/i.test(r)}function sx(r=rn()){return/blackberry/i.test(r)}function ix(r=rn()){return/webos/i.test(r)}function ap(r=rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Bb(r=rn()){return ap(r)&&!!window.navigator?.standalone}function zb(){return n2()&&document.documentMode===10}function ox(r=rn()){return ap(r)||rx(r)||ix(r)||sx(r)||/windows phone/i.test(r)||nx(r)}function ax(r,e=[]){let t;switch(r){case"Browser":t=Fy(rn());break;case"Worker":t=`${Fy(rn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zi}/${s}`}class qb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((h,p)=>{try{const m=e(c);h(m)}catch(m){p(m)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function $b(r,e={}){return di(r,"GET","/v2/passwordPolicy",ui(r,e))}const Hb=6;class Wb{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Hb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Gb{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new By(this),this.idTokenSubscription=new By(this),this.beforeStateQueue=new qb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=us(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yu(this,{idToken:e}),s=await ur._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ln(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(ds(this));const t=e?jt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $b(this),t=new Wb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Fb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&us(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,o);return()=>{h=!0,m()}}else{const m=e.addObserver(t);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ax(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Eb(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eo(r){return jt(r)}class By{constructor(e){this.auth=e,this.observer=null,this.addObserver=u2(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qb(r){Fu=r}function lx(r){return Fu.loadJS(r)}function Kb(){return Fu.recaptchaEnterpriseScript}function Yb(){return Fu.gapiScript}function Xb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Jb{constructor(){this.enterprise=new Zb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Zb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eT="recaptcha-enterprise",cx="NO_RECAPTCHA";class tT{constructor(e){this.type=eT,this.auth=eo(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{Pb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new Rb(m);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,h(g.siteKey)}}).catch(m=>{p(m)})})}function o(c,h,p){const m=window.grecaptcha;Ly(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(g=>{h(g)}).catch(()=>{h(cx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Jb().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{s(this.auth).then(p=>{if(!t&&Ly(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Kb();m.length!==0&&(m+=p),lx(m).then(()=>{o(p,c,h)}).catch(g=>{h(g)})}}).catch(p=>{h(p)})})}}async function zy(r,e,t,s=!1,o=!1){const c=new tT(r);let h;if(o)h=cx;else try{h=await c.verify(t)}catch{h=await c.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Nf(r,e,t,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await zy(r,e,t,t==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await zy(r,e,t,t==="getOobCode");return s(r,h)}else return Promise.reject(c)})}function nT(r,e){const t=Uu(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Wi(c,e??{}))return o;hr(o,"already-initialized")}return t.initialize({options:e})}function rT(r,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(us);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function sT(r,e,t){const s=eo(r);Pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=ux(e),{host:h,port:p}=iT(e),m=p===null?"":`:${p}`,g={url:`${c}//${h}${m}/`},_=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Pe(Wi(g,s.config.emulator)&&Wi(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Ji(h)?(Zf(`${c}//${h}${m}`),ep("Auth",!0)):oT()}function ux(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function iT(r){const e=ux(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:qy(s.substr(c.length+1))}}else{const[c,h]=s.split(":");return{host:c,port:qy(h)}}}function qy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function oT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class lp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,t){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}async function aT(r,e){return di(r,"POST","/v1/accounts:signUp",e)}async function lT(r,e){return kl(r,"POST","/v1/accounts:signInWithPassword",ui(r,e))}async function cT(r,e){return kl(r,"POST","/v1/accounts:signInWithEmailLink",ui(r,e))}async function uT(r,e){return kl(r,"POST","/v1/accounts:signInWithEmailLink",ui(r,e))}class ml extends lp{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ml(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new ml(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nf(e,t,"signInWithPassword",lT);case"emailLink":return cT(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nf(e,s,"signUpPassword",aT);case"emailLink":return uT(e,{idToken:t,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ko(r,e){return kl(r,"POST","/v1/accounts:signInWithIdp",ui(r,e))}const dT="http://localhost";class Qi extends lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=t;if(!s||!o)return null;const h=new Qi(s,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Ko(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ko(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ko(e,t)}buildRequest(){const e={requestUri:dT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Il(t)}return e}}function hT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fT(r){const e=Ja(Za(r)).link,t=e?Ja(Za(e)).deep_link_id:null,s=Ja(Za(r)).deep_link_id;return(s?Ja(Za(s)).link:null)||s||t||e||r}class cp{constructor(e){const t=Ja(Za(e)),s=t.apiKey??null,o=t.oobCode??null,c=hT(t.mode??null);Pe(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=fT(e);try{return new cp(t)}catch{return null}}}class sa{constructor(){this.providerId=sa.PROVIDER_ID}static credential(e,t){return ml._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=cp.parseLink(t);return Pe(s,"argument-error"),ml._fromEmailAndCode(e,s.code,s.tenantId)}}sa.PROVIDER_ID="password";sa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Cl extends dx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Gs extends Cl{constructor(){super("facebook.com")}static credential(e){return Qi._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";class Qs extends Cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qi._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Qs.credential(t,s)}catch{return null}}}Qs.GOOGLE_SIGN_IN_METHOD="google.com";Qs.PROVIDER_ID="google.com";class Ks extends Cl{constructor(){super("github.com")}static credential(e){return Qi._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";class Ys extends Cl{constructor(){super("twitter.com")}static credential(e,t){return Qi._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ys.credential(t,s)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";async function pT(r,e){return kl(r,"POST","/v1/accounts:signUp",ui(r,e))}class Ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await ur._fromIdTokenResponse(e,s,o),h=$y(s);return new Ki({user:c,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=$y(s);return new Ki({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function $y(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class xu extends Hr{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new xu(e,t,s,o)}}function hx(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?xu._fromErrorAndOperation(r,c,e,s):c})}async function mT(r,e,t=!1){const s=await pl(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ki._forOperation(r,"link",s)}async function gT(r,e,t=!1){const{auth:s}=r;if(Ln(s.app))return Promise.reject(ds(s));const o="reauthenticate";try{const c=await pl(r,hx(s,o,e,r),t);Pe(c.idToken,s,"internal-error");const h=op(c.idToken);Pe(h,s,"internal-error");const{sub:p}=h;return Pe(r.uid===p,s,"user-mismatch"),Ki._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&hr(s,"user-mismatch"),c}}async function fx(r,e,t=!1){if(Ln(r.app))return Promise.reject(ds(r));const s="signIn",o=await hx(r,s,e),c=await Ki._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(c.user),c}async function yT(r,e){return fx(eo(r),e)}async function px(r){const e=eo(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vT(r,e,t){if(Ln(r.app))return Promise.reject(ds(r));const s=eo(r),h=await Nf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pT).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&px(r),m}),p=await Ki._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(p.user),p}function xT(r,e,t){return Ln(r.app)?Promise.reject(ds(r)):yT(jt(r),sa.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&px(r),s})}function _T(r,e,t,s){return jt(r).onIdTokenChanged(e,t,s)}function wT(r,e,t){return jt(r).beforeAuthStateChanged(e,t)}function ET(r,e,t,s){return jt(r).onAuthStateChanged(e,t,s)}const _u="__sak";class mx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_u,"1"),this.storage.removeItem(_u),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const bT=1e3,TT=10;class gx extends mx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ox(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},c=this.storage.getItem(s);zb()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TT):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},bT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gx.type="LOCAL";const NT=gx;class yx extends mx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yx.type="SESSION";const vx=yx;function IT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Bu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Bu(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async g=>g(t.origin,c)),m=await IT(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bu.receivers=[];function up(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}class ST{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,m)=>{const g=up("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(x){const b=x;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(b.data.response);break;default:clearTimeout(_),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Vr(){return window}function kT(r){Vr().location.href=r}function xx(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function CT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AT(){return navigator?.serviceWorker?.controller||null}function RT(){return xx()?self:null}const _x="firebaseLocalStorageDb",PT=1,wu="firebaseLocalStorage",wx="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zu(r,e){return r.transaction([wu],e?"readwrite":"readonly").objectStore(wu)}function jT(){const r=indexedDB.deleteDatabase(_x);return new Al(r).toPromise()}function If(){const r=indexedDB.open(_x,PT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(wu,{keyPath:wx})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(wu)?e(s):(s.close(),await jT(),e(await If()))})})}async function Hy(r,e,t){const s=zu(r,!0).put({[wx]:e,value:t});return new Al(s).toPromise()}async function DT(r,e){const t=zu(r,!1).get(e),s=await new Al(t).toPromise();return s===void 0?null:s.value}function Wy(r,e){const t=zu(r,!0).delete(e);return new Al(t).toPromise()}const MT=800,LT=3;class Ex{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>LT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bu._getInstance(RT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CT(),!this.activeServiceWorker)return;this.sender=new ST(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Hy(e,_u,"1"),await Wy(e,_u),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>DT(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=zu(o,!1).getAll();return new Al(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ex.type="LOCAL";const OT=Ex;new Sl(3e4,6e4);function VT(r,e){return e?us(e):(Pe(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class dp extends lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UT(r){return fx(r.auth,new dp(r),r.bypassAuthState)}function FT(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),gT(t,new dp(r),r.bypassAuthState)}async function BT(r){const{auth:e,user:t}=r;return Pe(t,e,"internal-error"),mT(t,new dp(r),r.bypassAuthState)}class bx{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UT;case"linkViaPopup":case"linkViaRedirect":return BT;case"reauthViaPopup":case"reauthViaRedirect":return FT;default:hr(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zT=new Sl(2e3,1e4);class Ho extends bx{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ho.currentPopupAction&&Ho.currentPopupAction.cancel(),Ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zT.get())};e()}}Ho.currentPopupAction=null;const qT="pendingRedirect",ou=new Map;class $T extends bx{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ou.get(this.auth._key());if(!e){try{const s=await HT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ou.set(this.auth._key(),e)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HT(r,e){const t=QT(e),s=GT(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function WT(r,e){ou.set(r._key(),e)}function GT(r){return us(r._redirectPersistence)}function QT(r){return iu(qT,r.config.apiKey,r.name)}async function KT(r,e,t=!1){if(Ln(r.app))return Promise.reject(ds(r));const s=eo(r),o=VT(s,e),h=await new $T(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const YT=600*1e3;class XT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Tx(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Or(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}}function Gy(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Tx({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function JT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tx(r);default:return!1}}async function ZT(r,e={}){return di(r,"GET","/v1/projects",e)}const eN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tN=/^https?/;async function nN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ZT(r);for(const t of e)try{if(rN(t))return}catch{}hr(r,"unauthorized-domain")}function rN(r){const e=bf(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!tN.test(t))return!1;if(eN.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const sN=new Sl(3e4,6e4);function Qy(){const r=Vr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function iN(r){return new Promise((e,t)=>{function s(){Qy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qy(),t(Or(r,"network-request-failed"))},timeout:sN.get()})}if(Vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vr().gapi?.load)s();else{const o=Xb("iframefcb");return Vr()[o]=()=>{gapi.load?s():t(Or(r,"network-request-failed"))},lx(`${Yb()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw au=null,e})}let au=null;function oN(r){return au=au||iN(r),au}const aN=new Sl(5e3,15e3),lN="__/auth/iframe",cN="emulator/auth/iframe",uN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hN(r){const e=r.config;Pe(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?ip(e,cN):`https://${r.config.authDomain}/${lN}`,s={apiKey:e.apiKey,appName:r.name,v:Zi},o=dN.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${Il(s).slice(1)}`}async function fN(r){const e=await oN(r),t=Vr().gapi;return Pe(t,r,"internal-error"),e.open({where:document.body,url:hN(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uN,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const h=Or(r,"network-request-failed"),p=Vr().setTimeout(()=>{c(h)},aN.get());function m(){Vr().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{c(h)})}))}const pN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mN=500,gN=600,yN="_blank",vN="http://localhost";class Ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xN(r,e,t,s=mN,o=gN){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m={...pN,width:s.toString(),height:o.toString(),top:c,left:h},g=rn().toLowerCase();t&&(p=tx(g)?yN:t),Zv(g)&&(e=e||vN,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[k,j])=>`${b}${k}=${j},`,"");if(Bb(g)&&p!=="_self")return _N(e||"",p),new Ky(null);const x=window.open(e||"",p,_);Pe(x,r,"popup-blocked");try{x.focus()}catch{}return new Ky(x)}function _N(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const wN="__/auth/handler",EN="emulator/auth/handler",bN=encodeURIComponent("fac");async function Yy(r,e,t,s,o,c){Pe(r.config.authDomain,r,"auth-domain-config-required"),Pe(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Zi,eventId:o};if(e instanceof dx){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",c2(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,x]of Object.entries({}))h[_]=x}if(e instanceof Cl){const _=e.getScopes().filter(x=>x!=="");_.length>0&&(h.scopes=_.join(","))}r.tenantId&&(h.tid=r.tenantId);const p=h;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const m=await r._getAppCheckToken(),g=m?`#${bN}=${encodeURIComponent(m)}`:"";return`${TN(r)}?${Il(p).slice(1)}${g}`}function TN({config:r}){return r.emulator?ip(r,EN):`https://${r.authDomain}/${wN}`}const Wh="webStorageSupport";class NN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vx,this._completeRedirectFn=KT,this._overrideRedirectResult=WT}async _openPopup(e,t,s,o){ps(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Yy(e,t,s,bf(),o);return xN(e,c,up())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await Yy(e,t,s,bf(),o);return kT(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(ps(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await fN(e),s=new XT(e);return t.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wh,{type:Wh},o=>{const c=o?.[0]?.[Wh];c!==void 0&&t(!!c),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ox()||ex()||ap()}}const IN=NN;var Xy="@firebase/auth",Jy="1.11.1";class SN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function kN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CN(r){Gi(new ri("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;Pe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ax(r)},g=new Gb(s,o,c,m);return rT(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Gi(new ri("auth-internal",e=>{const t=eo(e.getProvider("auth").getImmediate());return(s=>new SN(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(Xy,Jy,kN(r)),Lr(Xy,Jy,"esm2020")}const AN=300,RN=Vv("authIdTokenMaxAge")||AN;let Zy=null;const PN=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>RN)return;const o=t?.token;Zy!==o&&(Zy=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function jN(r=rp()){const e=Uu(r,"auth");if(e.isInitialized())return e.getImmediate();const t=nT(r,{popupRedirectResolver:IN,persistence:[OT,NT,vx]}),s=Vv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const h=PN(c.toString());wT(t,h,()=>h(t.currentUser)),_T(t,p=>h(p))}}const o=Mv("auth");return o&&sT(t,`http://${o}`),t}function DN(){return document.getElementsByTagName("head")?.[0]??document}Qb({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Or("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",DN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CN("Browser");var MN="firebase",LN="12.6.0";Lr(MN,LN,"app");var e0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ti,Nx;(function(){var r;function e(R,I){function A(){}A.prototype=I.prototype,R.F=I.prototype,R.prototype=new A,R.prototype.constructor=R,R.D=function(D,S,M){for(var T=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)T[ee-2]=arguments[ee];return I.prototype[S].apply(D,T)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,I,A){A||(A=0);const D=Array(16);if(typeof I=="string")for(var S=0;S<16;++S)D[S]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(S=0;S<16;++S)D[S]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=R.g[0],A=R.g[1],S=R.g[2];let M=R.g[3],T;T=I+(M^A&(S^M))+D[0]+3614090360&4294967295,I=A+(T<<7&4294967295|T>>>25),T=M+(S^I&(A^S))+D[1]+3905402710&4294967295,M=I+(T<<12&4294967295|T>>>20),T=S+(A^M&(I^A))+D[2]+606105819&4294967295,S=M+(T<<17&4294967295|T>>>15),T=A+(I^S&(M^I))+D[3]+3250441966&4294967295,A=S+(T<<22&4294967295|T>>>10),T=I+(M^A&(S^M))+D[4]+4118548399&4294967295,I=A+(T<<7&4294967295|T>>>25),T=M+(S^I&(A^S))+D[5]+1200080426&4294967295,M=I+(T<<12&4294967295|T>>>20),T=S+(A^M&(I^A))+D[6]+2821735955&4294967295,S=M+(T<<17&4294967295|T>>>15),T=A+(I^S&(M^I))+D[7]+4249261313&4294967295,A=S+(T<<22&4294967295|T>>>10),T=I+(M^A&(S^M))+D[8]+1770035416&4294967295,I=A+(T<<7&4294967295|T>>>25),T=M+(S^I&(A^S))+D[9]+2336552879&4294967295,M=I+(T<<12&4294967295|T>>>20),T=S+(A^M&(I^A))+D[10]+4294925233&4294967295,S=M+(T<<17&4294967295|T>>>15),T=A+(I^S&(M^I))+D[11]+2304563134&4294967295,A=S+(T<<22&4294967295|T>>>10),T=I+(M^A&(S^M))+D[12]+1804603682&4294967295,I=A+(T<<7&4294967295|T>>>25),T=M+(S^I&(A^S))+D[13]+4254626195&4294967295,M=I+(T<<12&4294967295|T>>>20),T=S+(A^M&(I^A))+D[14]+2792965006&4294967295,S=M+(T<<17&4294967295|T>>>15),T=A+(I^S&(M^I))+D[15]+1236535329&4294967295,A=S+(T<<22&4294967295|T>>>10),T=I+(S^M&(A^S))+D[1]+4129170786&4294967295,I=A+(T<<5&4294967295|T>>>27),T=M+(A^S&(I^A))+D[6]+3225465664&4294967295,M=I+(T<<9&4294967295|T>>>23),T=S+(I^A&(M^I))+D[11]+643717713&4294967295,S=M+(T<<14&4294967295|T>>>18),T=A+(M^I&(S^M))+D[0]+3921069994&4294967295,A=S+(T<<20&4294967295|T>>>12),T=I+(S^M&(A^S))+D[5]+3593408605&4294967295,I=A+(T<<5&4294967295|T>>>27),T=M+(A^S&(I^A))+D[10]+38016083&4294967295,M=I+(T<<9&4294967295|T>>>23),T=S+(I^A&(M^I))+D[15]+3634488961&4294967295,S=M+(T<<14&4294967295|T>>>18),T=A+(M^I&(S^M))+D[4]+3889429448&4294967295,A=S+(T<<20&4294967295|T>>>12),T=I+(S^M&(A^S))+D[9]+568446438&4294967295,I=A+(T<<5&4294967295|T>>>27),T=M+(A^S&(I^A))+D[14]+3275163606&4294967295,M=I+(T<<9&4294967295|T>>>23),T=S+(I^A&(M^I))+D[3]+4107603335&4294967295,S=M+(T<<14&4294967295|T>>>18),T=A+(M^I&(S^M))+D[8]+1163531501&4294967295,A=S+(T<<20&4294967295|T>>>12),T=I+(S^M&(A^S))+D[13]+2850285829&4294967295,I=A+(T<<5&4294967295|T>>>27),T=M+(A^S&(I^A))+D[2]+4243563512&4294967295,M=I+(T<<9&4294967295|T>>>23),T=S+(I^A&(M^I))+D[7]+1735328473&4294967295,S=M+(T<<14&4294967295|T>>>18),T=A+(M^I&(S^M))+D[12]+2368359562&4294967295,A=S+(T<<20&4294967295|T>>>12),T=I+(A^S^M)+D[5]+4294588738&4294967295,I=A+(T<<4&4294967295|T>>>28),T=M+(I^A^S)+D[8]+2272392833&4294967295,M=I+(T<<11&4294967295|T>>>21),T=S+(M^I^A)+D[11]+1839030562&4294967295,S=M+(T<<16&4294967295|T>>>16),T=A+(S^M^I)+D[14]+4259657740&4294967295,A=S+(T<<23&4294967295|T>>>9),T=I+(A^S^M)+D[1]+2763975236&4294967295,I=A+(T<<4&4294967295|T>>>28),T=M+(I^A^S)+D[4]+1272893353&4294967295,M=I+(T<<11&4294967295|T>>>21),T=S+(M^I^A)+D[7]+4139469664&4294967295,S=M+(T<<16&4294967295|T>>>16),T=A+(S^M^I)+D[10]+3200236656&4294967295,A=S+(T<<23&4294967295|T>>>9),T=I+(A^S^M)+D[13]+681279174&4294967295,I=A+(T<<4&4294967295|T>>>28),T=M+(I^A^S)+D[0]+3936430074&4294967295,M=I+(T<<11&4294967295|T>>>21),T=S+(M^I^A)+D[3]+3572445317&4294967295,S=M+(T<<16&4294967295|T>>>16),T=A+(S^M^I)+D[6]+76029189&4294967295,A=S+(T<<23&4294967295|T>>>9),T=I+(A^S^M)+D[9]+3654602809&4294967295,I=A+(T<<4&4294967295|T>>>28),T=M+(I^A^S)+D[12]+3873151461&4294967295,M=I+(T<<11&4294967295|T>>>21),T=S+(M^I^A)+D[15]+530742520&4294967295,S=M+(T<<16&4294967295|T>>>16),T=A+(S^M^I)+D[2]+3299628645&4294967295,A=S+(T<<23&4294967295|T>>>9),T=I+(S^(A|~M))+D[0]+4096336452&4294967295,I=A+(T<<6&4294967295|T>>>26),T=M+(A^(I|~S))+D[7]+1126891415&4294967295,M=I+(T<<10&4294967295|T>>>22),T=S+(I^(M|~A))+D[14]+2878612391&4294967295,S=M+(T<<15&4294967295|T>>>17),T=A+(M^(S|~I))+D[5]+4237533241&4294967295,A=S+(T<<21&4294967295|T>>>11),T=I+(S^(A|~M))+D[12]+1700485571&4294967295,I=A+(T<<6&4294967295|T>>>26),T=M+(A^(I|~S))+D[3]+2399980690&4294967295,M=I+(T<<10&4294967295|T>>>22),T=S+(I^(M|~A))+D[10]+4293915773&4294967295,S=M+(T<<15&4294967295|T>>>17),T=A+(M^(S|~I))+D[1]+2240044497&4294967295,A=S+(T<<21&4294967295|T>>>11),T=I+(S^(A|~M))+D[8]+1873313359&4294967295,I=A+(T<<6&4294967295|T>>>26),T=M+(A^(I|~S))+D[15]+4264355552&4294967295,M=I+(T<<10&4294967295|T>>>22),T=S+(I^(M|~A))+D[6]+2734768916&4294967295,S=M+(T<<15&4294967295|T>>>17),T=A+(M^(S|~I))+D[13]+1309151649&4294967295,A=S+(T<<21&4294967295|T>>>11),T=I+(S^(A|~M))+D[4]+4149444226&4294967295,I=A+(T<<6&4294967295|T>>>26),T=M+(A^(I|~S))+D[11]+3174756917&4294967295,M=I+(T<<10&4294967295|T>>>22),T=S+(I^(M|~A))+D[2]+718787259&4294967295,S=M+(T<<15&4294967295|T>>>17),T=A+(M^(S|~I))+D[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,R.g[2]=R.g[2]+S&4294967295,R.g[3]=R.g[3]+M&4294967295}s.prototype.v=function(R,I){I===void 0&&(I=R.length);const A=I-this.blockSize,D=this.C;let S=this.h,M=0;for(;M<I;){if(S==0)for(;M<=A;)o(this,R,M),M+=this.blockSize;if(typeof R=="string"){for(;M<I;)if(D[S++]=R.charCodeAt(M++),S==this.blockSize){o(this,D),S=0;break}}else for(;M<I;)if(D[S++]=R[M++],S==this.blockSize){o(this,D),S=0;break}}this.h=S,this.o+=I},s.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var A=R.length-8;A<R.length;++A)R[A]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,A=0;A<4;++A)for(let D=0;D<32;D+=8)R[I++]=this.g[A]>>>D&255;return R};function c(R,I){var A=p;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=I(R)}function h(R,I){this.h=I;const A=[];let D=!0;for(let S=R.length-1;S>=0;S--){const M=R[S]|0;D&&M==I||(A[S]=M,D=!1)}this.g=A}var p={};function m(R){return-128<=R&&R<128?c(R,function(I){return new h([I|0],I<0?-1:0)}):new h([R|0],R<0?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return x;if(R<0)return V(g(-R));const I=[];let A=1;for(let D=0;R>=A;D++)I[D]=R/A|0,A*=4294967296;return new h(I,0)}function _(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return V(_(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(I,8));let D=x;for(let M=0;M<R.length;M+=8){var S=Math.min(8,R.length-M);const T=parseInt(R.substring(M,M+S),I);S<8?(S=g(Math.pow(I,S)),D=D.j(S).add(g(T))):(D=D.j(A),D=D.add(g(T)))}return D}var x=m(0),b=m(1),k=m(16777216);r=h.prototype,r.m=function(){if(U(this))return-V(this).m();let R=0,I=1;for(let A=0;A<this.g.length;A++){const D=this.i(A);R+=(D>=0?D:4294967296+D)*I,I*=4294967296}return R},r.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(j(this))return"0";if(U(this))return"-"+V(this).toString(R);const I=g(Math.pow(R,6));var A=this;let D="";for(;;){const S=Y(A,I).g;A=q(A,S.j(I));let M=((A.g.length>0?A.g[0]:A.h)>>>0).toString(R);if(A=S,j(A))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},r.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function j(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function U(R){return R.h==-1}r.l=function(R){return R=q(this,R),U(R)?-1:j(R)?0:1};function V(R){const I=R.g.length,A=[];for(let D=0;D<I;D++)A[D]=~R.g[D];return new h(A,~R.h).add(b)}r.abs=function(){return U(this)?V(this):this},r.add=function(R){const I=Math.max(this.g.length,R.g.length),A=[];let D=0;for(let S=0;S<=I;S++){let M=D+(this.i(S)&65535)+(R.i(S)&65535),T=(M>>>16)+(this.i(S)>>>16)+(R.i(S)>>>16);D=T>>>16,M&=65535,T&=65535,A[S]=T<<16|M}return new h(A,A[A.length-1]&-2147483648?-1:0)};function q(R,I){return R.add(V(I))}r.j=function(R){if(j(this)||j(R))return x;if(U(this))return U(R)?V(this).j(V(R)):V(V(this).j(R));if(U(R))return V(this.j(V(R)));if(this.l(k)<0&&R.l(k)<0)return g(this.m()*R.m());const I=this.g.length+R.g.length,A=[];for(var D=0;D<2*I;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(let S=0;S<R.g.length;S++){const M=this.i(D)>>>16,T=this.i(D)&65535,ee=R.i(S)>>>16,Se=R.i(S)&65535;A[2*D+2*S]+=T*Se,J(A,2*D+2*S),A[2*D+2*S+1]+=M*Se,J(A,2*D+2*S+1),A[2*D+2*S+1]+=T*ee,J(A,2*D+2*S+1),A[2*D+2*S+2]+=M*ee,J(A,2*D+2*S+2)}for(R=0;R<I;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=I;R<2*I;R++)A[R]=0;return new h(A,0)};function J(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function ae(R,I){this.g=R,this.h=I}function Y(R,I){if(j(I))throw Error("division by zero");if(j(R))return new ae(x,x);if(U(R))return I=Y(V(R),I),new ae(V(I.g),V(I.h));if(U(I))return I=Y(R,V(I)),new ae(V(I.g),I.h);if(R.g.length>30){if(U(R)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var A=b,D=I;D.l(R)<=0;)A=W(A),D=W(D);var S=ie(A,1),M=ie(D,1);for(D=ie(D,2),A=ie(A,2);!j(D);){var T=M.add(D);T.l(R)<=0&&(S=S.add(A),M=T),D=ie(D,1),A=ie(A,1)}return I=q(R,S.j(I)),new ae(S,I)}for(S=x;R.l(I)>=0;){for(A=Math.max(1,Math.floor(R.m()/I.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=g(A),T=M.j(I);U(T)||T.l(R)>0;)A-=D,M=g(A),T=M.j(I);j(M)&&(M=b),S=S.add(M),R=q(R,T)}return new ae(S,R)}r.B=function(R){return Y(this,R).h},r.and=function(R){const I=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)&R.i(D);return new h(A,this.h&R.h)},r.or=function(R){const I=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)|R.i(D);return new h(A,this.h|R.h)},r.xor=function(R){const I=Math.max(this.g.length,R.g.length),A=[];for(let D=0;D<I;D++)A[D]=this.i(D)^R.i(D);return new h(A,this.h^R.h)};function W(R){const I=R.g.length+1,A=[];for(let D=0;D<I;D++)A[D]=R.i(D)<<1|R.i(D-1)>>>31;return new h(A,R.h)}function ie(R,I){const A=I>>5;I%=32;const D=R.g.length-A,S=[];for(let M=0;M<D;M++)S[M]=I>0?R.i(M+A)>>>I|R.i(M+A+1)<<32-I:R.i(M+A);return new h(S,R.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Nx=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,ti=h}).apply(typeof e0<"u"?e0:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ix,el,Sx,lu,Sf,kx,Cx,Ax;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var v=0;v<u.length;++v){var w=u[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function o(u,v){if(v)e:{var w=s;u=u.split(".");for(var N=0;N<u.length-1;N++){var B=u[N];if(!(B in w))break e;w=w[B]}u=u[u.length-1],N=w[u],v=v(N),v!=N&&v!=null&&e(w,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});var c=c||{},h=this||self;function p(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function m(u,v,w){return u.call.apply(u.bind,arguments)}function g(u,v,w){return g=m,g.apply(null,arguments)}function _(u,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function x(u,v){function w(){}w.prototype=v.prototype,u.Z=v.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(N,B,H){for(var ue=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ue[Oe-2]=arguments[Oe];return v.prototype[B].apply(N,ue)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function k(u){const v=u.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=u[N];return w}return[]}function j(u,v){for(let N=1;N<arguments.length;N++){const B=arguments[N];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=u.length||0;const H=B.length||0;u.length=w+H;for(let ue=0;ue<H;ue++)u[w+ue]=B[ue]}else u.push(B)}}class U{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(u){h.setTimeout(()=>{throw u},0)}function q(){var u=R;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class J{constructor(){this.h=this.g=null}add(v,w){const N=ae.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var ae=new U(()=>new Y,u=>u.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let W,ie=!1,R=new J,I=()=>{const u=Promise.resolve(void 0);W=()=>{u.then(A)}};function A(){for(var u;u=q();){try{u.h.call(u.g)}catch(w){V(w)}var v=ae;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}ie=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};h.addEventListener("test",w,v),h.removeEventListener("test",w,v)}catch{}return u})();function T(u){return/^[\s\xa0]*$/.test(u)}function ee(u,v){S.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}x(ee,S),ee.prototype.init=function(u,v){const w=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(w=="mouseover"?v=u.fromElement:w=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function De(u,v,w,N,B){this.listener=u,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=B,this.key=++Ne,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,v,w){for(const N in u)v.call(w,u[N],N,u)}function G(u,v){for(const w in u)v.call(void 0,u[w],w,u)}function O(u){const v={};for(const w in u)v[w]=u[w];return v}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(u,v){let w,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(w in N)u[w]=N[w];for(let H=0;H<X.length;H++)w=X[H],Object.prototype.hasOwnProperty.call(N,w)&&(u[w]=N[w])}}function ge(u){this.src=u,this.g={},this.h=0}ge.prototype.add=function(u,v,w,N,B){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const ue=Ae(u,v,N,B);return ue>-1?(v=u[ue],w||(v.fa=!1)):(v=new De(v,this.src,H,!!N,B),v.fa=w,u.push(v)),v};function _e(u,v){const w=v.type;if(w in u.g){var N=u.g[w],B=Array.prototype.indexOf.call(N,v,void 0),H;(H=B>=0)&&Array.prototype.splice.call(N,B,1),H&&(oe(v),u.g[w].length==0&&(delete u.g[w],u.h--))}}function Ae(u,v,w,N){for(let B=0;B<u.length;++B){const H=u[B];if(!H.da&&H.listener==v&&H.capture==!!w&&H.ha==N)return B}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ee={};function Q(u,v,w,N,B){if(Array.isArray(v)){for(let H=0;H<v.length;H++)Q(u,v[H],w,N,B);return null}return w=xs(w),u&&u[Se]?u.J(v,w,p(N)?!!N.capture:!1,B):ve(u,v,w,!1,N,B)}function ve(u,v,w,N,B,H){if(!v)throw Error("Invalid event type");const ue=p(B)?!!B.capture:!!B;let Oe=Gr(u);if(Oe||(u[Fe]=Oe=new ge(u)),w=Oe.add(v,w,N,ue,H),w.proxy)return w;if(N=Be(),w.proxy=N,N.src=u,N.listener=w,u.addEventListener)M||(B=ue),B===void 0&&(B=!1),u.addEventListener(v.toString(),N,B);else if(u.attachEvent)u.attachEvent(bn(v.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Be(){function u(w){return v.call(u.src,u.listener,w)}const v=ro;return u}function it(u,v,w,N,B){if(Array.isArray(v))for(var H=0;H<v.length;H++)it(u,v[H],w,N,B);else N=p(N)?!!N.capture:!!N,w=xs(w),u&&u[Se]?(u=u.i,H=String(v).toString(),H in u.g&&(v=u.g[H],w=Ae(v,w,N,B),w>-1&&(oe(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete u.g[H],u.h--)))):u&&(u=Gr(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ae(v,w,N,B)),(w=u>-1?v[u]:null)&&sn(w))}function sn(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[Se])_e(v.i,u);else{var w=u.type,N=u.proxy;v.removeEventListener?v.removeEventListener(w,N,u.capture):v.detachEvent?v.detachEvent(bn(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=Gr(v))?(_e(w,u),w.h==0&&(w.src=null,v[Fe]=null)):oe(u)}}}function bn(u){return u in Ee?Ee[u]:Ee[u]="on"+u}function ro(u,v){if(u.da)u=!0;else{v=new ee(v,this);const w=u.listener,N=u.ha||u.src;u.fa&&sn(u),u=w.call(N,v)}return u}function Gr(u){return u=u[Fe],u instanceof ge?u:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function xs(u){return typeof u=="function"?u:(u[Tn]||(u[Tn]=function(v){return u.handleEvent(v)}),u[Tn])}function Xe(){D.call(this),this.i=new ge(this),this.M=this,this.G=null}x(Xe,D),Xe.prototype[Se]=!0,Xe.prototype.removeEventListener=function(u,v,w,N){it(this,u,v,w,N)};function dt(u,v){var w,N=u.G;if(N)for(w=[];N;N=N.G)w.push(N);if(u=u.M,N=v.type||v,typeof v=="string")v=new S(v,u);else if(v instanceof S)v.target=v.target||u;else{var B=v;v=new S(N,u),ce(v,B)}B=!0;let H,ue;if(w)for(ue=w.length-1;ue>=0;ue--)H=v.g=w[ue],B=Nn(H,N,!0,v)&&B;if(H=v.g=u,B=Nn(H,N,!0,v)&&B,B=Nn(H,N,!1,v)&&B,w)for(ue=0;ue<w.length;ue++)H=v.g=w[ue],B=Nn(H,N,!1,v)&&B}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const w=u.g[v];for(let N=0;N<w.length;N++)oe(w[N]);delete u.g[v],u.h--}}this.G=null},Xe.prototype.J=function(u,v,w,N){return this.i.add(String(u),v,!1,w,N)},Xe.prototype.K=function(u,v,w,N){return this.i.add(String(u),v,!0,w,N)};function Nn(u,v,w,N){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let H=0;H<v.length;++H){const ue=v[H];if(ue&&!ue.da&&ue.capture==w){const Oe=ue.listener,xt=ue.ha||ue.src;ue.fa&&_e(u.i,ue),B=Oe.call(xt,N)!==!1&&B}}return B&&!N.defaultPrevented}function Ct(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(u,v||0)}function Vn(u){u.g=Ct(()=>{u.g=null,u.i&&(u.i=!1,Vn(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class so extends D{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pr(u){D.call(this),this.h=u,this.g={}}x(pr,D);var mr=[];function _s(u){pe(u.g,function(v,w){this.g.hasOwnProperty(w)&&sn(v)},u),u.g={}}pr.prototype.N=function(){pr.Z.N.call(this),_s(this)},pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=h.JSON.stringify,ws=h.JSON.parse,dn=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Jn(){}function Zn(){}var gr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Es(){S.call(this,"d")}x(Es,S);function bs(){S.call(this,"c")}x(bs,S);var hn={},Ts=null;function Un(){return Ts=Ts||new Xe}hn.Ia="serverreachability";function on(u){S.call(this,hn.Ia,u)}x(on,S);function er(u){const v=Un();dt(v,new on(v))}hn.STAT_EVENT="statevent";function tr(u,v){S.call(this,hn.STAT_EVENT,u),this.stat=v}x(tr,S);function ot(u){const v=Un();dt(v,new tr(v,u))}hn.Ja="timingevent";function Ns(u,v){S.call(this,hn.Ja,u),this.size=v}x(Ns,S);function Re(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},v)}function tt(){this.g=!0}tt.prototype.ua=function(){this.g=!1};function vt(u,v,w,N,B,H){u.info(function(){if(u.g)if(H){var ue="",Oe=H.split("&");for(let Ze=0;Ze<Oe.length;Ze++){var xt=Oe[Ze].split("=");if(xt.length>1){const Tt=xt[0];xt=xt[1];const Pn=Tt.split("_");ue=Pn.length>=2&&Pn[1]=="type"?ue+(Tt+"="+xt+"&"):ue+(Tt+"=redacted&")}}}else ue=null;else ue=H;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+v+`
`+w+`
`+ue})}function Dt(u,v,w,N,B,H,ue){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+v+`
`+w+`
`+H+" "+ue})}function an(u,v,w,N){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Et(u,w)+(N?" "+N:"")})}function mt(u,v){u.info(function(){return"TIMEOUT: "+v})}tt.prototype.info=function(){};function Et(u,v){if(!u.g)return v;if(!v)return null;try{const H=JSON.parse(v);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var w=H[u];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ue=1;ue<N.length;ue++)N[ue]=""}}}}return Xn(H)}catch{return v}}var In={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gt;function Fn(){}x(Fn,Jn),Fn.prototype.g=function(){return new XMLHttpRequest},Gt=new Fn;function Mt(u){return encodeURIComponent(String(u))}function gi(u){var v=1;u=u.split(":");const w=[];for(;v>0&&u.length;)w.push(u.shift()),v--;return u.length&&w.push(u.join(":")),w}function Bn(u,v,w,N){this.j=u,this.i=v,this.l=w,this.S=N||1,this.V=new pr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ul}function Ul(){this.i=null,this.g="",this.h=!1}var Fl={},ua={};function nr(u,v,w){u.M=1,u.A=Kr(zn(v)),u.u=w,u.R=!0,da(u,null)}function da(u,v){u.F=Date.now(),yi(u),u.B=zn(u.A);var w=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),wa(w.i,"t",N),u.C=0,w=u.j.L,u.h=new Ul,u.g=Yl(u.j,w?v:null,!u.u),u.P>0&&(u.O=new so(g(u.Y,u,u.g),u.P)),v=u.V,w=u.g,N=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(mr[0]=B.toString()),B=mr);for(let H=0;H<B.length;H++){const ue=Q(w,B[H],N||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),er(),vt(u.i,u.v,u.B,u.l,u.S,u.u)}Bn.prototype.ba=function(u){u=u.target;const v=this.O;v&&br(u)==3?v.j():this.Y(u)},Bn.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=br(this.g),xt=this.g.ya(),Ze=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Ql(this.g)))){this.K||Oe!=4||xt==7||(xt==8||Ze<=0?er(3):er(2)),io(this);var v=this.g.ca();this.X=v;var w=Bl(this);if(this.o=v==200,Dt(this.i,this.v,this.B,this.l,this.S,Oe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(N)){var H=N;break t}}H=null}if(u=H)an(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,at(this,u);else{this.o=!1,this.m=3,ot(12),Qr(this),vi(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<w.length;)if(Tt=ql(this,w),Tt==ua){Oe==4&&(this.m=4,ot(14),u=!1),an(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Fl){this.m=4,ot(15),an(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else an(this.i,this.l,Tt,null),at(this,Tt);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,ot(16),u=!1),this.o=this.o&&u,!u)an(this.i,this.l,w,"[Invalid Chunked Response]"),Qr(this),vi(this);else if(w.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Si(ue),ue.P=!0,ot(11))}}else an(this.i,this.l,w,null),at(this,w);Oe==4&&Qr(this),this.o&&!this.K&&(Oe==4?go(this.j,this):(this.o=!1,yi(this)))}else ba(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),Qr(this),vi(this)}}}catch{}finally{}};function Bl(u){if(!zl(u))return u.g.la();const v=Ql(u.g);if(v==="")return"";let w="";const N=v.length,B=br(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Qr(u),vi(u),"";u.h.i=new h.TextDecoder}for(let H=0;H<N;H++)u.h.h=!0,w+=u.h.i.decode(v[H],{stream:!(B&&H==N-1)});return v.length=0,u.h.g+=w,u.C=0,u.h.g}function zl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function ql(u,v){var w=u.C,N=v.indexOf(`
`,w);return N==-1?ua:(w=Number(v.substring(w,N)),isNaN(w)?Fl:(N+=1,N+w>v.length?ua:(v=v.slice(N,N+w),u.C=N+w,v)))}Bn.prototype.cancel=function(){this.K=!0,Qr(this)};function yi(u){u.T=Date.now()+u.H,ha(u,u.H)}function ha(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Re(g(u.aa,u),v)}function io(u){u.D&&(h.clearTimeout(u.D),u.D=null)}Bn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(mt(this.i,this.B),this.M!=2&&(er(),ot(17)),Qr(this),this.m=2,vi(this)):ha(this,this.T-u)};function vi(u){u.j.I==0||u.K||go(u.j,u)}function Qr(u){io(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,_s(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function at(u,v){try{var w=u.j;if(w.I!=0&&(w.g==u||pa(w.h,u))){if(!u.L&&pa(w.h,u)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)mo(w),An(w);else break e;Ir(w),ot(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Re(g(w.Va,w),6e3));xi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Rn(w,11)}else if((u.L||w.g==u)&&mo(w),!T(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let Ze=B[v];const Tt=Ze[0];if(!(Tt<=w.K))if(w.K=Tt,Ze=Ze[1],w.I==2)if(Ze[0]=="c"){w.M=Ze[1],w.ba=Ze[2];const Pn=Ze[3];Pn!=null&&(w.ka=Pn,w.j.info("VER="+w.ka));const es=Ze[4];es!=null&&(w.za=es,w.j.info("SVER="+w.za));const Sr=Ze[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(N=1.5*Sr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const kr=u.g;if(kr){const xo=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xo){var H=N.h;H.g||xo.indexOf("spdy")==-1&&xo.indexOf("quic")==-1&&xo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ao(H,H.h),H.h=null))}if(N.G){const Ia=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ia&&(N.wa=Ia,Ye(N.J,N.G,Ia))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var ue=u;if(N.na=Na(N,N.L?N.ba:null,N.W),ue.L){_i(N.h,ue);var Oe=ue,xt=N.O;xt&&(Oe.H=xt),Oe.D&&(io(Oe),yi(Oe)),N.g=ue}else Qt(N);w.i.length>0&&Zr(w)}else Ze[0]!="stop"&&Ze[0]!="close"||Rn(w,7);else w.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Rn(w,7):fo(w):Ze[0]!="noop"&&w.l&&w.l.qa(Ze),w.A=0)}}er(4)}catch{}}var dd=class{constructor(u,v){this.g=u,this.map=v}};function oo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xi(u){return u.h?1:u.g?u.g.size:0}function pa(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function ao(u,v){u.g?u.g.add(v):u.h=v}function _i(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}oo.prototype.cancel=function(){if(this.i=Sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Sn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const w of u.g.values())v=v.concat(w.G);return v}return k(u.i)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kn(u,v){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const N=u[w].indexOf("=");let B,H=null;N>=0?(B=u[w].substring(0,N),H=u[w].substring(N+1)):B=u[w],v(B,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function yr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof yr?(this.l=u.l,wi(this,u.j),this.o=u.o,this.g=u.g,vr(this,u.u),this.h=u.h,Is(this,Ea(u.i)),this.m=u.m):u&&(v=String(u).match($l))?(this.l=!1,wi(this,v[1]||"",!0),this.o=Ei(v[2]||""),this.g=Ei(v[3]||"",!0),vr(this,v[4]),this.h=Ei(v[5]||"",!0),Is(this,v[6]||"",!0),this.m=Ei(v[7]||"")):(this.l=!1,this.i=new We(null,this.l))}yr.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(bi(v,ga,!0),":");var w=this.g;return(w||v=="file")&&(u.push("//"),(v=this.o)&&u.push(bi(v,ga,!0),"@"),u.push(Mt(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(bi(w,w.charAt(0)=="/"?Ti:ya,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",bi(w,va)),u.join("")},yr.prototype.resolve=function(u){const v=zn(this);let w=!!u.j;w?wi(v,u.j):w=!!u.o,w?v.o=u.o:w=!!u.g,w?v.g=u.g:w=u.u!=null;var N=u.h;if(w)vr(v,u.u);else if(w=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=v.h.lastIndexOf("/");B!=-1&&(N=v.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const H=[];for(let ue=0;ue<B.length;){const Oe=B[ue++];Oe=="."?N&&ue==B.length&&H.push(""):Oe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),N&&ue==B.length&&H.push("")):(H.push(Oe),N=!0)}N=H.join("/")}else N=B}return w?v.h=N:w=u.i.toString()!=="",w?Is(v,Ea(u.i)):w=!!u.m,w&&(v.m=u.m),v};function zn(u){return new yr(u)}function wi(u,v,w){u.j=w?Ei(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function vr(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function Is(u,v,w){v instanceof We?(u.i=v,co(u.i,u.l)):(w||(v=bi(v,hd)),u.i=new We(v,u.l))}function Ye(u,v,w){u.i.set(v,w)}function Kr(u){return Ye(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ei(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bi(u,v,w){return typeof u=="string"?(u=encodeURI(u).replace(v,ma),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ma(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ga=/[#\/\?@]/g,ya=/[#\?:]/g,Ti=/[#\?]/g,hd=/[#\?@]/g,va=/#/g;function We(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function xr(u){u.g||(u.g=new Map,u.h=0,u.i&&kn(u.i,function(v,w){u.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=We.prototype,r.add=function(u,v){xr(this),this.i=null,u=_r(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(v),this.h+=1,this};function xa(u,v){xr(u),v=_r(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function lo(u,v){return xr(u),v=_r(u,v),u.g.has(v)}r.forEach=function(u,v){xr(this),this.g.forEach(function(w,N){w.forEach(function(B){u.call(v,B,N,this)},this)},this)};function _a(u,v){xr(u);let w=[];if(typeof v=="string")lo(u,v)&&(w=w.concat(u.g.get(_r(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)w=w.concat(u[v]);return w}r.set=function(u,v){return xr(this),this.i=null,u=_r(this,u),lo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},r.get=function(u,v){return u?(u=_a(this,u),u.length>0?String(u[0]):v):v};function wa(u,v,w){xa(u,v),w.length>0&&(u.i=null,u.g.set(_r(u,v),k(w)),u.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const B=Mt(w);w=_a(this,w);for(let H=0;H<w.length;H++){let ue=B;w[H]!==""&&(ue+="="+Mt(w[H])),u.push(ue)}}return this.i=u.join("&")};function Ea(u){const v=new We;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function _r(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function co(u,v){v&&!u.j&&(xr(u),u.i=null,u.g.forEach(function(w,N){const B=N.toLowerCase();N!=B&&(xa(this,N),wa(this,B,w))},u)),u.j=v}function wr(u,v){const w=new tt;if(h.Image){const N=new Image;N.onload=_(Ft,w,"TestLoadImage: loaded",!0,v,N),N.onerror=_(Ft,w,"TestLoadImage: error",!1,v,N),N.onabort=_(Ft,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=_(Ft,w,"TestLoadImage: timeout",!1,v,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else v(!1)}function Er(u,v){const w=new tt,N=new AbortController,B=setTimeout(()=>{N.abort(),Ft(w,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:N.signal}).then(H=>{clearTimeout(B),H.ok?Ft(w,"TestPingServer: ok",!0,v):Ft(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Ft(w,"TestPingServer: error",!1,v)})}function Ft(u,v,w,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(w)}catch{}}function Ni(){this.g=new dn}function Yr(u){this.i=u.Sb||null,this.h=u.ab||!1}x(Yr,Jn),Yr.prototype.g=function(){return new Cn(this.i,this.h)};function Cn(u,v){Xe.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(Cn,Xe),r=Cn.prototype,r.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,rr(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Ss(this):rr(this),this.readyState==3&&Hl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Ss(this))},r.Na=function(u){this.g&&(this.response=u,Ss(this))},r.ga=function(){this.g&&Ss(this)};function Ss(u){u.readyState=4,u.l=null,u.j=null,u.B=null,rr(u)}r.setRequestHeader=function(u,v){this.A.append(u,v)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=v.next();return u.join(`\r
`)};function rr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Wl(u){let v="";return pe(u,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function uo(u,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=Wl(w),typeof u=="string"?w!=null&&Mt(w):Ye(u,v,w))}function nt(u){Xe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(nt,Xe);var Gl=/^https?$/i,fd=["POST","PUT"];r=nt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gt.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(H){ks(this,H);return}if(u=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)w.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const H of N.keys())w.set(H,N.get(H));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(fd,v,void 0)>=0)||N||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ue]of w)this.g.setRequestHeader(H,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){ks(this,H)}};function ks(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,Cs(u),Jr(u)}function Cs(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,dt(this,"complete"),dt(this,"abort"),Jr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),nt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Xr(this):this.Xa())},r.Xa=function(){Xr(this)};function Xr(u){if(u.h&&typeof c<"u"){if(u.v&&br(u)==4)setTimeout(u.Ca.bind(u),0);else if(dt(u,"readystatechange"),br(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=H===0){let ue=String(u.D).match($l)[1]||null;!ue&&h.self&&h.self.location&&(ue=h.self.location.protocol.slice(0,-1)),N=!Gl.test(ue?ue.toLowerCase():"")}w=N}if(w)dt(u,"complete"),dt(u,"success");else{u.o=6;try{var B=br(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",Cs(u)}}finally{Jr(u)}}}}function Jr(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,v||dt(u,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function br(u){return u.g?u.g.readyState:0}r.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),ws(v)}};function Ql(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ba(u){const v={};u=(u.g&&br(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(T(u[N]))continue;var w=gi(u[N]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=v[B]||[];v[B]=H,H.push(w)}G(v,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(u,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||v}function ho(u){this.za=0,this.i=[],this.j=new tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,u),this.Za=Tr("retryDelaySeedMs",1e4,u),this.Ta=Tr("forwardChannelMaxRetries",2,u),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new oo(u&&u.concurrentRequestLimit),this.Ba=new Ni,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ho.prototype,r.ka=8,r.I=1,r.connect=function(u,v,w,N){ot(0),this.W=u,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=Na(this,null,this.W),Zr(this)};function fo(u){if(po(u),u.I==3){var v=u.V++,w=zn(u.J);if(Ye(w,"SID",u.M),Ye(w,"RID",v),Ye(w,"TYPE","terminate"),Nr(u,w),v=new Bn(u,u.j,v),v.M=2,v.A=Kr(zn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&h.Image&&(new Image().src=v.A,w=!0),w||(v.g=Yl(v.j,null),v.g.ea(v.A)),v.F=Date.now(),yi(v)}ki(u)}function An(u){u.g&&(Si(u),u.g.cancel(),u.g=null)}function po(u){An(u),u.v&&(h.clearTimeout(u.v),u.v=null),mo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Zr(u){if(!fa(u.h)&&!u.m){u.m=!0;var v=u.Ea;W||I(),ie||(W(),ie=!0),R.add(v,u),u.D=0}}function Kl(u,v){return xi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Re(g(u.Ea,u,v),yo(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Bn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=O(H),ce(H,this.U)):H=this.U),this.u!==null||this.R||(B.J=H,H=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Ta(this,B,v),w=zn(this.J),Ye(w,"RID",u),Ye(w,"CVER",22),this.G&&Ye(w,"X-HTTP-Session-Id",this.G),Nr(this,w),H&&(this.R?v="headers="+Mt(Wl(H))+"&"+v:this.u&&uo(w,this.u,H)),ao(this.h,B),this.Ra&&Ye(w,"TYPE","init"),this.S?(Ye(w,"$req",v),Ye(w,"SID","null"),B.U=!0,nr(B,w,null)):nr(B,w,v),this.I=2}}else this.I==3&&(u?Ii(this,u):this.i.length==0||fa(this.h)||Ii(this))};function Ii(u,v){var w;v?w=v.l:w=u.V++;const N=zn(u.J);Ye(N,"SID",u.M),Ye(N,"RID",w),Ye(N,"AID",u.K),Nr(u,N),u.u&&u.o&&uo(N,u.u,u.o),w=new Bn(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),v&&(u.i=v.G.concat(u.i)),v=Ta(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ao(u.h,w),nr(w,N,v)}function Nr(u,v){u.H&&pe(u.H,function(w,N){Ye(v,N,w)}),u.l&&pe({},function(w,N){Ye(v,N,w)})}function Ta(u,v,w){w=Math.min(u.i.length,w);const N=u.l?g(u.l.Ka,u.l,u):null;e:{var B=u.i;let Oe=-1;for(;;){const xt=["count="+w];Oe==-1?w>0?(Oe=B[0].g,xt.push("ofs="+Oe)):Oe=0:xt.push("ofs="+Oe);let Ze=!0;for(let Tt=0;Tt<w;Tt++){var H=B[Tt].g;const Pn=B[Tt].map;if(H-=Oe,H<0)Oe=Math.max(0,B[Tt].g-100),Ze=!1;else try{H="req"+H+"_"||"";try{var ue=Pn instanceof Map?Pn:Object.entries(Pn);for(const[es,Sr]of ue){let kr=Sr;p(Sr)&&(kr=Xn(Sr)),xt.push(H+es+"="+encodeURIComponent(kr))}}catch(es){throw xt.push(H+"type="+encodeURIComponent("_badmap")),es}}catch{N&&N(Pn)}}if(Ze){ue=xt.join("&");break e}}ue=void 0}return u=u.i.splice(0,w),v.G=u,ue}function Qt(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;W||I(),ie||(W(),ie=!0),R.add(v,u),u.A=0}}function Ir(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Re(g(u.Da,u),yo(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,As(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Re(g(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),An(this),As(this))};function Si(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function As(u){u.g=new Bn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=zn(u.na);Ye(v,"RID","rpc"),Ye(v,"SID",u.M),Ye(v,"AID",u.K),Ye(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ye(v,"TO",u.ia),Ye(v,"TYPE","xmlhttp"),Nr(u,v),u.u&&u.o&&uo(v,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=Kr(zn(v)),w.u=null,w.R=!0,da(w,u)}r.Va=function(){this.C!=null&&(this.C=null,An(this),Ir(this),ot(19))};function mo(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function go(u,v){var w=null;if(u.g==v){mo(u),Si(u),u.g=null;var N=2}else if(pa(u.h,v))w=v.G,_i(u.h,v),N=1;else return;if(u.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=u.D;N=Un(),dt(N,new Ns(N,w)),Zr(u)}else Qt(u);else if(B=v.m,B==3||B==0&&v.X>0||!(N==1&&Kl(u,v)||N==2&&Ir(u)))switch(w&&w.length>0&&(v=u.h,v.i=v.i.concat(w)),B){case 1:Rn(u,5);break;case 4:Rn(u,10);break;case 3:Rn(u,6);break;default:Rn(u,2)}}}function yo(u,v){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*v}function Rn(u,v){if(u.j.info("Error code "+v),v==2){var w=g(u.bb,u),N=u.Ua;const B=!N;N=new yr(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||wi(N,"https"),Kr(N),B?wr(N.toString(),w):Er(N.toString(),w)}else ot(2);u.I=0,u.l&&u.l.pa(v),ki(u),po(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function ki(u){if(u.I=0,u.ja=[],u.l){const v=Sn(u.h);(v.length!=0||u.i.length!=0)&&(j(u.ja,v),j(u.ja,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.oa()}}function Na(u,v,w){var N=w instanceof yr?zn(w):new yr(w);if(N.g!="")v&&(N.g=v+"."+N.g),vr(N,N.u);else{var B=h.location;N=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const H=new yr(null);N&&wi(H,N),v&&(H.g=v),B&&vr(H,B),w&&(H.h=w),N=H}return w=u.G,v=u.wa,w&&v&&Ye(N,w,v),Ye(N,"VER",u.ka),Nr(u,N),N}function Yl(u,v,w){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new nt(new Yr({ab:w})):new nt(u.ma),v.Fa(u.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}r=Xl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function vo(){}vo.prototype.g=function(u,v){return new Bt(u,v)};function Bt(u,v){Xe.call(this),this.g=new ho(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!T(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!T(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Rs(this)}x(Bt,Xe),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){fo(this.g)},Bt.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=Xn(u),u=w);v.i.push(new dd(v.Ya++,u)),v.I==3&&Zr(v)},Bt.prototype.N=function(){this.g.l=null,delete this.j,fo(this.g),delete this.g,Bt.Z.N.call(this)};function Jl(u){Es.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const w in v){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}x(Jl,Es);function Zl(){bs.call(this),this.status=1}x(Zl,bs);function Rs(u){this.g=u}x(Rs,Xl),Rs.prototype.ra=function(){dt(this.g,"a")},Rs.prototype.qa=function(u){dt(this.g,new Jl(u))},Rs.prototype.pa=function(u){dt(this.g,new Zl)},Rs.prototype.oa=function(){dt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Ax=function(){return new vo},Cx=function(){return Un()},kx=hn,Sf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,lu=In,bt.COMPLETE="complete",Sx=bt,Zn.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,el=Zn,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,Ix=nt}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const t0="@firebase/firestore",n0="4.9.2";class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");let ia="12.3.0";const Yi=new tp("@firebase/firestore");function Bo(){return Yi.logLevel}function me(r,...e){if(Yi.logLevel<=qe.DEBUG){const t=e.map(hp);Yi.debug(`Firestore (${ia}): ${r}`,...t)}}function ms(r,...e){if(Yi.logLevel<=qe.ERROR){const t=e.map(hp);Yi.error(`Firestore (${ia}): ${r}`,...t)}}function Jo(r,...e){if(Yi.logLevel<=qe.WARN){const t=e.map(hp);Yi.warn(`Firestore (${ia}): ${r}`,...t)}}function hp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function je(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Rx(r,s,t)}function Rx(r,e,t){let s=`FIRESTORE (${ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ms(s),new Error(s)}function Je(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||Rx(e,o,s)}function Ve(r,e){return r}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Px{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ON{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class VN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UN{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let c=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new hs,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new hs)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new Px(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class FN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BN{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new FN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class r0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=c=>{c.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new r0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new r0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}class fp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=qN(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function $e(r,e){return r<e?-1:r>e?1:0}function kf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return Gh(o)===Gh(c)?$e(o,c):Gh(o)?1:-1}return $e(r.length,e.length)}const $N=55296,HN=57343;function Gh(r){const e=r.charCodeAt(0);return e>=$N&&e<=HN}function Zo(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}const s0="__name__";class Dr{constructor(e,t,s){t===void 0?t=0:t>e.length&&je(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&je(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=Dr.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return $e(e.length,t.length)}static compareSegments(e,t){const s=Dr.isNumericId(e),o=Dr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Dr.extractNumericId(e).compare(Dr.extractNumericId(t)):kf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class st extends Dr{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const WN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Dr{construct(e,t,s){return new Ht(e,t,s)}static isValidIdentifier(e){return WN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s0}static keyField(){return new Ht([s0])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new he(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new he(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(c(),o++)}if(c(),h)throw new he(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(st.fromString(e))}static fromName(e){return new Ie(st.fromString(e).popFirst(5))}static empty(){return new Ie(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new st(e.slice()))}}function jx(r,e,t){if(!t)throw new he(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function GN(r,e,t,s){if(e===!0&&s===!0)throw new he(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function i0(r){if(!Ie.isDocumentKey(r))throw new he(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function o0(r){if(Ie.isDocumentKey(r))throw new he(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Dx(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function qu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":je(12329,{type:typeof r})}function En(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qu(r);throw new he(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function QN(r,e){if(e<=0)throw new he(K.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Rl(r,e){if(!Dx(r))throw new he(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new he(K.INVALID_ARGUMENT,t);return!0}const a0=-62135596800,l0=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*l0);return new et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a0)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l0}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:kt("string",et._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new et(0,0))}static max(){return new Le(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gl=-1;function KN(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(s===1e9?new et(t+1,0):new et(t,s));return new si(o,Ie.empty(),e)}function YN(r){return new si(r.readTime,r.key,gl)}class si{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new si(Le.min(),Ie.empty(),gl)}static max(){return new si(Le.max(),Ie.empty(),gl)}}function XN(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}const JN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function oa(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==JN)throw r;me("LocalStore","Unexpectedly lost primary lease")}class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,s)=>{t(e)}))}static reject(e){return new Z(((t,s)=>{s(e)}))}static waitFor(e){return new Z(((t,s)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&t()}),(m=>s(m)))})),h=!0,c===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next((o=>o?Z.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,c)=>{s.push(t.call(this,o,c))})),this.waitFor(s)}static mapArray(e,t){return new Z(((s,o)=>{const c=e.length,h=new Array(c);let p=0;for(let m=0;m<c;m++){const g=m;t(e[g]).next((_=>{h[g]=_,++p,p===c&&s(h)}),(_=>o(_)))}}))}static doWhile(e,t){return new Z(((s,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):s()};c()}))}}function eI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(r){return r.name==="IndexedDbTransactionError"}class $u{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$u.ce=-1;const pp=-1;function Hu(r){return r==null}function Eu(r){return r===0&&1/r==-1/0}function tI(r){return typeof r=="number"&&Number.isInteger(r)&&!Eu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Mx="";function nI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=c0(e)),e=rI(r.get(t),e);return c0(e)}function rI(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":t+="";break;case Mx:t+="";break;default:t+=c}}return t}function c0(r){return r+Mx+""}function u0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function hi(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Lx(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class pt{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yc(this.root,e,this.comparator,!0)}}class Yc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??$t.RED,this.left=o??$t.EMPTY,this.right=c??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new $t(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return $t.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d0(this.data.getIterator())}getIteratorFrom(e){return new d0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class d0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class On{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new On([])}unionWith(e){let t=new Pt(Ht.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class Ox extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ox("Invalid base64 string: "+c):c}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const sI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(r){if(Je(!!r,39018),typeof r=="string"){let e=0;const t=sI.exec(r);if(Je(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(r.seconds),nanos:wt(r.nanos)}}function wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function oi(r){return typeof r=="string"?Wt.fromBase64String(r):Wt.fromUint8Array(r)}const Vx="server_timestamp",Ux="__type__",Fx="__previous_value__",Bx="__local_write_time__";function mp(r){return(r?.mapValue?.fields||{})[Ux]?.stringValue===Vx}function Wu(r){const e=r.mapValue.fields[Fx];return mp(e)?Wu(e):e}function yl(r){const e=ii(r.mapValue.fields[Bx].timestampValue);return new et(e.seconds,e.nanos)}class iI{constructor(e,t,s,o,c,h,p,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const bu="(default)";class vl{constructor(e,t){this.projectId=e,this.database=t||bu}static empty(){return new vl("","")}get isDefaultDatabase(){return this.database===bu}isEqual(e){return e instanceof vl&&e.projectId===this.projectId&&e.database===this.database}}const zx="__type__",oI="__max__",Xc={mapValue:{}},qx="__vector__",Tu="value";function ai(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?mp(r)?4:lI(r)?9007199254740991:aI(r)?10:11:je(28295,{value:r})}function qr(r,e){if(r===e)return!0;const t=ai(r);if(t!==ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return yl(r).isEqual(yl(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ii(o.timestampValue),p=ii(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return oi(o.bytesValue).isEqual(oi(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return wt(o.geoPointValue.latitude)===wt(c.geoPointValue.latitude)&&wt(o.geoPointValue.longitude)===wt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return wt(o.integerValue)===wt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=wt(o.doubleValue),p=wt(c.doubleValue);return h===p?Eu(h)===Eu(p):isNaN(h)&&isNaN(p)}return!1})(r,e);case 9:return Zo(r.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(u0(h)!==u0(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!qr(h[m],p[m])))return!1;return!0})(r,e);default:return je(52216,{left:r})}}function xl(r,e){return(r.values||[]).find((t=>qr(t,e)))!==void 0}function ea(r,e){if(r===e)return 0;const t=ai(r),s=ai(e);if(t!==s)return $e(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=wt(c.integerValue||c.doubleValue),m=wt(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(r,e);case 3:return h0(r.timestampValue,e.timestampValue);case 4:return h0(yl(r),yl(e));case 5:return kf(r.stringValue,e.stringValue);case 6:return(function(c,h){const p=oi(c),m=oi(h);return p.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),m=h.split("/");for(let g=0;g<p.length&&g<m.length;g++){const _=$e(p[g],m[g]);if(_!==0)return _}return $e(p.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=$e(wt(c.latitude),wt(h.latitude));return p!==0?p:$e(wt(c.longitude),wt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return f0(r.arrayValue,e.arrayValue);case 10:return(function(c,h){const p=c.fields||{},m=h.fields||{},g=p[Tu]?.arrayValue,_=m[Tu]?.arrayValue,x=$e(g?.values?.length||0,_?.values?.length||0);return x!==0?x:f0(g,_)})(r.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Xc.mapValue&&h===Xc.mapValue)return 0;if(c===Xc.mapValue)return 1;if(h===Xc.mapValue)return-1;const p=c.fields||{},m=Object.keys(p),g=h.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let x=0;x<m.length&&x<_.length;++x){const b=kf(m[x],_[x]);if(b!==0)return b;const k=ea(p[m[x]],g[_[x]]);if(k!==0)return k}return $e(m.length,_.length)})(r.mapValue,e.mapValue);default:throw je(23264,{he:t})}}function h0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=ii(r),s=ii(e),o=$e(t.seconds,s.seconds);return o!==0?o:$e(t.nanos,s.nanos)}function f0(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=ea(t[o],s[o]);if(c)return c}return $e(t.length,s.length)}function ta(r){return Cf(r)}function Cf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ii(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ie.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=Cf(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${Cf(t.fields[h])}`;return o+"}"})(r.mapValue):je(61005,{value:r})}function cu(r){switch(ai(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wu(r);return e?16+cu(e):16;case 5:return 2*r.stringValue.length;case 6:return oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+cu(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return hi(s.fields,((c,h)=>{o+=c.length+cu(h)})),o})(r.mapValue);default:throw je(13486,{value:r})}}function p0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Af(r){return!!r&&"integerValue"in r}function gp(r){return!!r&&"arrayValue"in r}function m0(r){return!!r&&"nullValue"in r}function g0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uu(r){return!!r&&"mapValue"in r}function aI(r){return(r?.mapValue?.fields||{})[zx]?.stringValue===qx}function ll(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return hi(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ll(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(r.arrayValue.values[t]);return e}return{...r}}function lI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===oI}class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!uu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=Ht.emptyPath(),s={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,s,o),s={},o=[],t=p.popLast()}h?s[p.lastSegment()]=ll(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());uu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];uu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){hi(t,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new wn(ll(this.value))}}function $x(r){const e=[];return hi(r.fields,((t,s)=>{const o=new Ht([t]);if(uu(s)){const c=$x(s.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new On(e)}class tn{constructor(e,t,s,o,c,h,p){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new tn(e,0,Le.min(),Le.min(),Le.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new tn(e,1,t,Le.min(),s,o,0)}static newNoDocument(e,t){return new tn(e,2,t,Le.min(),Le.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Le.min(),Le.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function y0(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],h=r.position[o];if(c.field.isKeyField()?s=Ie.comparator(Ie.fromName(h.referenceValue),t.key):s=ea(h,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function v0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!qr(r.position[t],e.position[t]))return!1;return!0}class _l{constructor(e,t="asc"){this.field=e,this.dir=t}}function cI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Hx{}class St extends Hx{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new dI(e,t,s):t==="array-contains"?new pI(e,s):t==="in"?new mI(e,s):t==="not-in"?new gI(e,s):t==="array-contains-any"?new yI(e,s):new St(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new hI(e,s):new fI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ea(t,this.value)):t!==null&&ai(this.value)===ai(t)&&this.matchesComparison(ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends Hx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fr(e,t)}matches(e){return Wx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wx(r){return r.op==="and"}function Gx(r){return uI(r)&&Wx(r)}function uI(r){for(const e of r.filters)if(e instanceof fr)return!1;return!0}function Rf(r){if(r instanceof St)return r.field.canonicalString()+r.op.toString()+ta(r.value);if(Gx(r))return r.filters.map((e=>Rf(e))).join(",");{const e=r.filters.map((t=>Rf(t))).join(",");return`${r.op}(${e})`}}function Qx(r,e){return r instanceof St?(function(s,o){return o instanceof St&&s.op===o.op&&s.field.isEqual(o.field)&&qr(s.value,o.value)})(r,e):r instanceof fr?(function(s,o){return o instanceof fr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,h,p)=>c&&Qx(h,o.filters[p])),!0):!1})(r,e):void je(19439)}function Kx(r){return r instanceof St?(function(t){return`${t.field.canonicalString()} ${t.op} ${ta(t.value)}`})(r):r instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kx).join(" ,")+"}"})(r):"Filter"}class dI extends St{constructor(e,t,s){super(e,t,s),this.key=Ie.fromName(s.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class hI extends St{constructor(e,t){super(e,"in",t),this.keys=Yx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fI extends St{constructor(e,t){super(e,"not-in",t),this.keys=Yx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yx(r,e){return(e.arrayValue?.values||[]).map((t=>Ie.fromName(t.referenceValue)))}class pI extends St{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gp(t)&&xl(t.arrayValue,this.value)}}class mI extends St{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xl(this.value.arrayValue,t)}}class gI extends St{constructor(e,t){super(e,"not-in",t)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xl(this.value.arrayValue,t)}}class yI extends St{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>xl(this.value.arrayValue,s)))}}class vI{constructor(e,t=null,s=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function x0(r,e=null,t=[],s=[],o=null,c=null,h=null){return new vI(r,e,t,s,o,c,h)}function yp(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Rf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Hu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ta(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ta(s))).join(",")),e.Te=t}return e.Te}function vp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!cI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Qx(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!v0(r.startAt,e.startAt)&&v0(r.endAt,e.endAt)}function Pf(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class la{constructor(e,t=null,s=[],o=[],c=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xI(r,e,t,s,o,c,h,p){return new la(r,e,t,s,o,c,h,p)}function Gu(r){return new la(r)}function _0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Xx(r){return r.collectionGroup!==null}function cl(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Pt(Ht.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new _l(c,s))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new _l(Ht.keyField(),s))}return e.Ie}function Ur(r){const e=Ve(r);return e.Ee||(e.Ee=_I(e,cl(r))),e.Ee}function _I(r,e){if(r.limitType==="F")return x0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new _l(o.field,c)}));const t=r.endAt?new Nu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Nu(r.startAt.position,r.startAt.inclusive):null;return x0(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function jf(r,e){const t=r.filters.concat([e]);return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Iu(r,e,t){return new la(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Qu(r,e){return vp(Ur(r),Ur(e))&&r.limitType===e.limitType}function Jx(r){return`${yp(Ur(r))}|lt:${r.limitType}`}function zo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Kx(o))).join(", ")}]`),Hu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ta(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ta(o))).join(",")),`Target(${s})`})(Ur(r))}; limitType=${r.limitType})`}function Ku(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ie.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of cl(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,p,m){const g=y0(h,p,m);return h.inclusive?g<=0:g<0})(s.startAt,cl(s),o)||s.endAt&&!(function(h,p,m){const g=y0(h,p,m);return h.inclusive?g>=0:g>0})(s.endAt,cl(s),o))})(r,e)}function wI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Zx(r){return(e,t)=>{let s=!1;for(const o of cl(r)){const c=EI(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function EI(r,e,t){const s=r.field.isKeyField()?Ie.comparator(e.key,t.key):(function(c,h,p){const m=h.data.field(c),g=p.data.field(c);return m!==null&&g!==null?ea(m,g):je(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return je(19790,{direction:r.dir})}}class to{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,((t,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return Lx(this.inner)}size(){return this.innerSize}}const bI=new pt(Ie.comparator);function gs(){return bI}const e_=new pt(Ie.comparator);function tl(...r){let e=e_;for(const t of r)e=e.insert(t.key,t);return e}function t_(r){let e=e_;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function zi(){return ul()}function n_(){return ul()}function ul(){return new to((r=>r.toString()),((r,e)=>r.isEqual(e)))}const TI=new pt(Ie.comparator),NI=new Pt(Ie.comparator);function He(...r){let e=NI;for(const t of r)e=e.add(t);return e}const II=new Pt($e);function SI(){return II}function xp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function r_(r){return{integerValue:""+r}}function kI(r,e){return tI(e)?r_(e):xp(r,e)}class Yu{constructor(){this._=void 0}}function CI(r,e,t){return r instanceof Su?(function(o,c){const h={fields:{[Ux]:{stringValue:Vx},[Bx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&mp(c)&&(c=Wu(c)),c&&(h.fields[Fx]=c),{mapValue:h}})(t,e):r instanceof wl?i_(r,e):r instanceof El?o_(r,e):(function(o,c){const h=s_(o,c),p=w0(h)+w0(o.Ae);return Af(h)&&Af(o.Ae)?r_(p):xp(o.serializer,p)})(r,e)}function AI(r,e,t){return r instanceof wl?i_(r,e):r instanceof El?o_(r,e):t}function s_(r,e){return r instanceof ku?(function(s){return Af(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Su extends Yu{}class wl extends Yu{constructor(e){super(),this.elements=e}}function i_(r,e){const t=a_(e);for(const s of r.elements)t.some((o=>qr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class El extends Yu{constructor(e){super(),this.elements=e}}function o_(r,e){let t=a_(e);for(const s of r.elements)t=t.filter((o=>!qr(o,s)));return{arrayValue:{values:t}}}class ku extends Yu{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function w0(r){return wt(r.integerValue||r.doubleValue)}function a_(r){return gp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function RI(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof wl&&o instanceof wl||s instanceof El&&o instanceof El?Zo(s.elements,o.elements,qr):s instanceof ku&&o instanceof ku?qr(s.Ae,o.Ae):s instanceof Su&&o instanceof Su})(r.transform,e.transform)}class PI{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function du(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xu{}function l_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new _p(r.key,Yn.none()):new Pl(r.key,r.data,Yn.none());{const t=r.data,s=wn.empty();let o=new Pt(Ht.comparator);for(let c of e.fields)if(!o.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new fi(r.key,s,new On(o.toArray()),Yn.none())}}function jI(r,e,t){r instanceof Pl?(function(o,c,h){const p=o.value.clone(),m=b0(o.fieldTransforms,c,h.transformResults);p.setAll(m),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,t):r instanceof fi?(function(o,c,h){if(!du(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=b0(o.fieldTransforms,c,h.transformResults),m=c.data;m.setAll(c_(o)),m.setAll(p),c.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function dl(r,e,t,s){return r instanceof Pl?(function(c,h,p,m){if(!du(c.precondition,h))return p;const g=c.value.clone(),_=T0(c.fieldTransforms,m,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(r,e,t,s):r instanceof fi?(function(c,h,p,m){if(!du(c.precondition,h))return p;const g=T0(c.fieldTransforms,m,h),_=h.data;return _.setAll(c_(c)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((x=>x.field)))})(r,e,t,s):(function(c,h,p){return du(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(r,e,t)}function DI(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=s_(s.transform,o||null);c!=null&&(t===null&&(t=wn.empty()),t.set(s.field,c))}return t||null}function E0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Zo(s,o,((c,h)=>RI(c,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Pl extends Xu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fi extends Xu{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function c_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function b0(r,e,t){const s=new Map;Je(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const c=r[o],h=c.transform,p=e.data.field(c.field);s.set(c.field,AI(h,p,t[o]))}return s}function T0(r,e,t){const s=new Map;for(const o of r){const c=o.transform,h=t.data.field(o.field);s.set(o.field,CI(c,h,e))}return s}class _p extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MI extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LI{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&jI(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=dl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=dl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=n_();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=t.has(o.key)?null:p;const m=l_(h,p);m!==null&&s.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,((t,s)=>E0(t,s)))&&Zo(this.baseMutations,e.baseMutations,((t,s)=>E0(t,s)))}}class wp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return TI})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new wp(e,t,s,o)}}class OI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class VI{constructor(e,t){this.count=e,this.unchangedNames=t}}var It,Ge;function UI(r){switch(r){case K.OK:return je(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return je(15467,{code:r})}}function u_(r){if(r===void 0)return ms("GRPC error has no .code"),K.UNKNOWN;switch(r){case It.OK:return K.OK;case It.CANCELLED:return K.CANCELLED;case It.UNKNOWN:return K.UNKNOWN;case It.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case It.INTERNAL:return K.INTERNAL;case It.UNAVAILABLE:return K.UNAVAILABLE;case It.UNAUTHENTICATED:return K.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case It.NOT_FOUND:return K.NOT_FOUND;case It.ALREADY_EXISTS:return K.ALREADY_EXISTS;case It.PERMISSION_DENIED:return K.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case It.ABORTED:return K.ABORTED;case It.OUT_OF_RANGE:return K.OUT_OF_RANGE;case It.UNIMPLEMENTED:return K.UNIMPLEMENTED;case It.DATA_LOSS:return K.DATA_LOSS;default:return je(39323,{code:r})}}(Ge=It||(It={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";function FI(){return new TextEncoder}const BI=new ti([4294967295,4294967295],0);function N0(r){const e=FI().encode(r),t=new Nx;return t.update(e),new Uint8Array(t.digest())}function I0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ti([t,s],0),new ti([o,c],0)]}class Ep{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new nl(`Invalid padding: ${t}`);if(s<0)throw new nl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new nl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ti.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(ti.fromNumber(s)));return o.compare(BI)===1&&(o=new ti([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=N0(e),[s,o]=I0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Ep(c,o,t);return s.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=N0(e),[s,o]=I0(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ju{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ju(Le.min(),o,new pt($e),gs(),He())}}class jl{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new jl(s,t,He(),He(),He())}}class hu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class d_{constructor(e,t){this.targetId=e,this.Ce=t}}class h_{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class S0{constructor(){this.ve=0,this.Fe=k0(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),s=He();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:je(38017,{changeType:c})}})),new jl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=k0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zI{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Jc(),this.He=Jc(),this.Ye=new pt($e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Pf(c))if(s===0){const h=new Ie(c.path);this.et(t,h,tn.newNoDocument(h,Le.min()))}else Je(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const p=this.ut(e),m=p?this.ct(p,e,h):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let h,p;try{h=oi(s).toUint8Array()}catch(m){if(m instanceof Ox)return Jo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new Ep(h,o,c)}catch(m){return Jo(m instanceof nl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&Pf(p.target)){const m=new Ie(p.target.path);this.It(m).has(h)||this.Et(h,m)||this.et(h,m,tn.newNoDocument(m,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let s=He();this.He.forEach(((c,h)=>{let p=!0;h.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Ju(e,t,this.Ye,this.je,s);return this.je=gs(),this.Je=Jc(),this.He=Jc(),this.Ye=new pt($e),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new S0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pt($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pt($e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jc(){return new pt(Ie.comparator)}function k0(){return new pt(Ie.comparator)}const qI={asc:"ASCENDING",desc:"DESCENDING"},$I={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HI={and:"AND",or:"OR"};class WI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Df(r,e){return r.useProto3Json||Hu(e)?e:{value:e}}function Cu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function GI(r,e){return Cu(r,e.toTimestamp())}function Fr(r){return Je(!!r,49232),Le.fromTimestamp((function(t){const s=ii(t);return new et(s.seconds,s.nanos)})(r))}function bp(r,e){return Mf(r,e).canonicalString()}function Mf(r,e){const t=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function p_(r){const e=st.fromString(r);return Je(x_(e),10190,{key:e.toString()}),e}function Lf(r,e){return bp(r.databaseId,e.path)}function Qh(r,e){const t=p_(e);if(t.get(1)!==r.databaseId.projectId)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ie(g_(t))}function m_(r,e){return bp(r.databaseId,e)}function QI(r){const e=p_(r);return e.length===4?st.emptyPath():g_(e)}function Of(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function g_(r){return Je(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function C0(r,e,t){return{name:Lf(r,e),fields:t.value.mapValue.fields}}function KI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:je(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,_){return g.useProto3Json?(Je(_===void 0||typeof _=="string",58123),Wt.fromBase64String(_||"")):(Je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Wt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(g){const _=g.code===void 0?K.UNKNOWN:u_(g.code);return new he(_,g.message||"")})(h);t=new h_(s,o,c,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Qh(r,s.document.name),c=Fr(s.document.updateTime),h=s.document.createTime?Fr(s.document.createTime):Le.min(),p=new wn({mapValue:{fields:s.document.fields}}),m=tn.newFoundDocument(o,c,h,p),g=s.targetIds||[],_=s.removedTargetIds||[];t=new hu(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Qh(r,s.document),c=s.readTime?Fr(s.readTime):Le.min(),h=tn.newNoDocument(o,c),p=s.removedTargetIds||[];t=new hu([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Qh(r,s.document),c=s.removedTargetIds||[];t=new hu([],c,o,null)}else{if(!("filter"in e))return je(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new VI(o,c),p=s.targetId;t=new d_(p,h)}}return t}function YI(r,e){let t;if(e instanceof Pl)t={update:C0(r,e.key,e.value)};else if(e instanceof _p)t={delete:Lf(r,e.key)};else if(e instanceof fi)t={update:C0(r,e.key,e.data),updateMask:iS(e.fieldMask)};else{if(!(e instanceof MI))return je(16599,{Vt:e.type});t={verify:Lf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(c,h){const p=h.transform;if(p instanceof Su)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof wl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof El)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof ku)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw je(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:GI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:je(27497)})(r,e.precondition)),t}function XI(r,e){return r&&r.length>0?(Je(e!==void 0,14353),r.map((t=>(function(o,c){let h=o.updateTime?Fr(o.updateTime):Fr(c);return h.isEqual(Le.min())&&(h=Fr(c)),new PI(h,o.transformResults||[])})(t,e)))):[]}function JI(r,e){return{documents:[m_(r,e.path)]}}function ZI(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=m_(r,o);const c=(function(g){if(g.length!==0)return v_(fr.create(g,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:qo(b.field),direction:nS(b.dir)}})(_)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=Df(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function eS(r){let e=QI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Je(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=(function(x){const b=y_(x);return b instanceof fr&&Gx(b)?b.getFilters():[b]})(t.where));let h=[];t.orderBy&&(h=(function(x){return x.map((b=>(function(j){return new _l($o(j.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(b)))})(t.orderBy));let p=null;t.limit&&(p=(function(x){let b;return b=typeof x=="object"?x.value:x,Hu(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(x){const b=!!x.before,k=x.values||[];return new Nu(k,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(x){const b=!x.before,k=x.values||[];return new Nu(k,b)})(t.endAt)),xI(e,o,h,c,p,"F",m,g)}function tS(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function y_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=$o(t.unaryFilter.field);return St.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=$o(t.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=$o(t.unaryFilter.field);return St.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=$o(t.unaryFilter.field);return St.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(r):r.fieldFilter!==void 0?(function(t){return St.create($o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map((s=>y_(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(t.compositeFilter.op))})(r):je(30097,{filter:r})}function nS(r){return qI[r]}function rS(r){return $I[r]}function sS(r){return HI[r]}function qo(r){return{fieldPath:r.canonicalString()}}function $o(r){return Ht.fromServerFormat(r.fieldPath)}function v_(r){return r instanceof St?(function(t){if(t.op==="=="){if(g0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(t.field),op:rS(t.op),value:t.value}}})(r):r instanceof fr?(function(t){const s=t.getFilters().map((o=>v_(o)));return s.length===1?s[0]:{compositeFilter:{op:sS(t.op),filters:s}}})(r):je(54877,{filter:r})}function iS(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function x_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Js{constructor(e,t,s,o,c=Le.min(),h=Le.min(),p=Wt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oS{constructor(e){this.yt=e}}function aS(r){const e=eS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Iu(e,e.limit,"L"):e}class lS{constructor(){this.Cn=new cS}addToCollectionParentIndex(e,t){return this.Cn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(si.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class cS{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Pt(st.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Pt(st.comparator)).toArray()}}const A0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},__=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(__,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);class na{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new na(0)}static cr(){return new na(-1)}}const R0="LruGarbageCollector",uS=1048576;function P0([r,e],[t,s]){const o=$e(r,t);return o===0?$e(e,s):o}class dS{constructor(e){this.Ir=e,this.buffer=new Pt(P0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();P0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hS{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(R0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?me(R0,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Vr(3e5)}))}}class fS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve($u.ce);const s=new dS(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(A0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,c,h,p,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,h=Date.now(),this.nthSequenceNumber(e,o)))).next((x=>(s=x,p=Date.now(),this.removeTargets(e,s,t)))).next((x=>(c=x,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((x=>(g=Date.now(),Bo()<=qe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(m-p)+`ms
	Removed ${x} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:x}))))}}function pS(r,e){return new fS(r,e)}class mS{constructor(){this.changes=new to((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yS{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&dl(s.mutation,o,On.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=He()){const o=zi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((c=>{let h=tl();return c.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=zi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,He())))}populateOverlays(e,t,s){const o=[];return s.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,s,o){let c=gs();const h=ul(),p=(function(){return ul()})();return t.forEach(((m,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof fi)?c=c.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),dl(_.mutation,g,_.mutation.getFieldMask(),et.now())):h.set(g.key,On.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((g,_)=>h.set(g,_))),t.forEach(((g,_)=>p.set(g,new gS(_,h.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=ul();let o=new pt(((h,p)=>h-p)),c=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let _=s.get(m)||On.empty();_=p.applyToLocalView(g,_),s.set(m,_);const x=(o.get(p.batchId)||He()).add(m);o=o.insert(p.batchId,x)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),g=m.key,_=m.value,x=n_();_.forEach((b=>{if(!c.has(b)){const k=l_(t.get(b),s.get(b));k!==null&&x.set(b,k),c=c.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,x))}return Z.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return Ie.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):Z.resolve(zi());let p=gl,m=c;return h.next((g=>Z.forEach(g,((_,x)=>(p<x.largestBatchId&&(p=x.largestBatchId),c.get(_)?Z.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,m,g,He()))).next((_=>({batchId:p,changes:t_(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((s=>{let o=tl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let h=tl();return this.indexManager.getCollectionParents(e,c).next((p=>Z.forEach(p,(m=>{const g=(function(x,b){return new la(b,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((x,b)=>{h=h.insert(x,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o)))).next((h=>{c.forEach(((m,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,tn.newInvalidDocument(_)))}));let p=tl();return h.forEach(((m,g)=>{const _=c.get(m);_!==void 0&&dl(_.mutation,g,On.empty(),et.now()),Ku(t,g)&&(p=p.insert(m,g))})),p}))}}class vS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Fr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:aS(o.bundledQuery),readTime:Fr(o.readTime)}})(t)),Z.resolve()}}class xS{constructor(){this.overlays=new pt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zi();return Z.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,c)=>{this.St(e,t,c)})),Z.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const o=zi(),c=t.length+1,h=new Ie(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&m.largestBatchId>s&&o.set(m.getKey(),m)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new pt(((g,_)=>g-_));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=c.get(g.largestBatchId);_===null&&(_=zi(),c=c.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const p=zi(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>p.set(g,_))),!(p.size()>=o)););return Z.resolve(p)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new OI(t,s));let c=this.qr.get(t);c===void 0&&(c=He(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}class _S{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}class Tp{constructor(){this.Qr=new Pt(Ut.$r),this.Ur=new Pt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ut(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ut(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ie(new st([])),s=new Ut(t,e),o=new Ut(t,e+1),c=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new st([])),s=new Ut(t,e),o=new Ut(t,e+1);let c=He();return this.Ur.forEachInRange([s,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new Ut(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ut{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}class wS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pt(Ut.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new LI(c,t,s,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Ut(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(h)}lookupMutationBatch(e,t){return Z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),c=o<0?0:o;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?pp:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ut(t,0),o=new Ut(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(h=>{const p=this.Xr(h.Yr);c.push(p)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pt($e);return t.forEach((o=>{const c=new Ut(o,0),h=new Ut(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(p=>{s=s.add(p.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;Ie.isDocumentKey(c)||(c=c.child(""));const h=new Ut(new Ie(c),0);let p=new Pt($e);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(p=p.add(m.Yr)),!0)}),h),Z.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(t.mutations,(o=>{const c=new Ut(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ut(t,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ES{constructor(e){this.ri=e,this.docs=(function(){return new pt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let s=gs();return t.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():tn.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=gs();const h=t.path,p=new Ie(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||XN(YN(_),s)<=0||(o.has(_.key)||Ku(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,t,s,o){je(9500)}ii(e,t){return Z.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new bS(this)}getSize(e){return Z.resolve(this.size)}}class bS extends mS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class TS{constructor(e){this.persistence=e,this.si=new to((t=>yp(t)),vp),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new Tp,this.targetCount=0,this.ai=na.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new na(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.Pr(t),Z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Z.waitFor(c).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this._i.containsKey(t))}}class w_{constructor(e,t){this.ui={},this.overlays={},this.ci=new $u(0),this.li=!1,this.li=!0,this.hi=new _S,this.referenceDelegate=e(this),this.Pi=new TS(this),this.indexManager=new lS,this.remoteDocumentCache=(function(o){return new ES(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new oS(t),this.Ii=new vS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new wS(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){me("MemoryPersistence","Starting transaction:",e);const o=new NS(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class NS extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class Np{constructor(e){this.persistence=e,this.Ri=new Tp,this.Vi=null}static mi(e){return new Np(e)}get fi(){if(this.Vi)return this.Vi;throw je(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const o=Ie.fromPath(s);return this.gi(e,o).next((c=>{c||t.removeEntry(o,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Au{constructor(e,t){this.persistence=e,this.pi=new to((s=>nI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=pS(this,t)}static mi(e,t){return new Au(e,t)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Z.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?Z.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((p=>{p||(s++,c.removeEntry(h,Le.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=cu(e.data.value)),t}br(e,t,s){return Z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ip{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=He(),o=He();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ip(e,t.fromCache,s,o)}}class IS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class SS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return r2()?8:eI(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,o,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new IS;return this.Ss(e,t,h).next((p=>{if(c.result=p,this.Vs)return this.bs(e,t,h,p.size)}))})).next((()=>c.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Bo()<=qe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",zo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Bo()<=qe.DEBUG&&me("QueryEngine","Query:",zo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Bo()<=qe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",zo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):Z.resolve())}ys(e,t){if(_0(t))return Z.resolve(null);let s=Ur(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Iu(t,null,"F"),s=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const h=He(...c);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.Ds(t,p);return this.Cs(t,g,h,m.readTime)?this.ys(e,Iu(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,s,o){return _0(t)||o.isEqual(Le.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,s,o)?Z.resolve(null):(Bo()<=qe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zo(t)),this.vs(e,h,t,KN(o,gl)).next((p=>p)))}))}Ds(e,t){let s=new Pt(Zx(e));return t.forEach(((o,c)=>{Ku(e,c)&&(s=s.add(c))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,s){return Bo()<=qe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",zo(t)),this.ps.getDocumentsMatchingQuery(e,t,si.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const Sp="LocalStore",kS=3e8;class CS{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new pt($e),this.xs=new to((c=>yp(c)),vp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AS(r,e,t,s){return new CS(r,e,t,s)}async function E_(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],p=[];let m=He();for(const g of o){h.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of c){p.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(s,m).next((g=>({Ls:g,removedBatchIds:h,addedBatchIds:p})))}))}))}function RS(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,m,g,_){const x=g.batch,b=x.keys();let k=Z.resolve();return b.forEach((j=>{k=k.next((()=>_.getEntry(m,j))).next((U=>{const V=g.docVersions.get(j);Je(V!==null,48541),U.version.compareTo(V)<0&&(x.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))}))})),k.next((()=>p.mutationQueue.removeMutationBatch(m,x)))})(t,s,e,c).next((()=>c.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let m=He();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(m=m.add(p.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function b_(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function PS(r,e){const t=Ve(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((_,x)=>{const b=o.get(x);if(!b)return;p.push(t.Pi.removeMatchingKeys(c,_.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(c,_.addedDocuments,x))));let k=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(x)!==null?k=k.withResumeToken(Wt.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,s)),o=o.insert(x,k),(function(U,V,q){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=kS?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(b,k,_)&&p.push(t.Pi.updateTargetData(c,k))}));let m=gs(),g=He();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))})),p.push(jS(c,h,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!s.isEqual(Le.min())){const _=t.Pi.getLastRemoteSnapshotVersion(c).next((x=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));p.push(_)}return Z.waitFor(p).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,m,g))).next((()=>m))})).then((c=>(t.Ms=o,c)))}function jS(r,e,t){let s=He(),o=He();return t.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let h=gs();return t.forEach(((p,m)=>{const g=c.get(p);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Le.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):me(Sp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",m.version)})),{ks:h,qs:o}}))}function DS(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=pp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function MS(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((c=>c?(o=c,Z.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Js(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Vf(r,e,t){const s=Ve(r),o=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!aa(h))throw h;me(Sp,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function j0(r,e,t){const s=Ve(r);let o=Le.min(),c=He();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,g,_){const x=Ve(m),b=x.xs.get(_);return b!==void 0?Z.resolve(x.Ms.get(b)):x.Pi.getTargetData(g,_)})(s,h,Ur(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,p.targetId).next((m=>{c=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Le.min(),t?c:He()))).next((p=>(LS(s,wI(e),p),{documents:p,Qs:c})))))}function LS(r,e,t){let s=r.Os.get(e)||Le.min();t.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class D0{constructor(){this.activeTargetIds=SI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OS{constructor(){this.Mo=new D0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new D0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class VS{Oo(e){}shutdown(){}}const M0="ConnectivityMonitor";class L0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(M0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(M0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zc=null;function Uf(){return Zc===null?Zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zc++,"0x"+Zc.toString(16)}const Kh="RestConnection",US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===bu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,c){const h=Uf(),p=this.zo(e,t.toUriEncodedString());me(Kh,`Sending RPC '${e}' ${h}:`,p,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,c);const{host:g}=new URL(p),_=Ji(g);return this.Jo(e,p,m,s,_).then((x=>(me(Kh,`Received RPC '${e}' ${h}: `,x),x)),(x=>{throw Jo(Kh,`RPC '${e}' ${h} failed with error: `,x,"url: ",p,"request:",s),x}))}Ho(e,t,s,o,c,h){return this.Go(e,t,s,o,c)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ia})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const s=US[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class BS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Zt="WebChannelConnection";class zS extends FS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,c){const h=Uf();return new Promise(((p,m)=>{const g=new Ix;g.setWithCredentials(!0),g.listenOnce(Sx.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case lu.NO_ERROR:const x=g.getResponseJson();me(Zt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(x)),p(x);break;case lu.TIMEOUT:me(Zt,`RPC '${e}' ${h} timed out`),m(new he(K.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:const b=g.getStatus();if(me(Zt,`RPC '${e}' ${h} failed with status:`,b,"response text:",g.getResponseText()),b>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const j=k?.error;if(j&&j.status&&j.message){const U=(function(q){const J=q.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(J)>=0?J:K.UNKNOWN})(j.status);m(new he(U,j.message))}else m(new he(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new he(K.UNAVAILABLE,"Connection failed."));break;default:je(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(Zt,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);me(Zt,`RPC '${e}' ${h} sending request:`,o),g.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=Uf(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Ax(),p=Cx(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const _=c.join("");me(Zt,`Creating RPC '${e}' stream ${o}: ${_}`,m);const x=h.createWebChannel(_,m);this.I_(x);let b=!1,k=!1;const j=new BS({Yo:V=>{k?me(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(b||(me(Zt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),b=!0),me(Zt,`RPC '${e}' stream ${o} sending:`,V),x.send(V))},Zo:()=>x.close()}),U=(V,q,J)=>{V.listen(q,(ae=>{try{J(ae)}catch(Y){setTimeout((()=>{throw Y}),0)}}))};return U(x,el.EventType.OPEN,(()=>{k||(me(Zt,`RPC '${e}' stream ${o} transport opened.`),j.o_())})),U(x,el.EventType.CLOSE,(()=>{k||(k=!0,me(Zt,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(x))})),U(x,el.EventType.ERROR,(V=>{k||(k=!0,Jo(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),j.a_(new he(K.UNAVAILABLE,"The operation could not be completed")))})),U(x,el.EventType.MESSAGE,(V=>{if(!k){const q=V.data[0];Je(!!q,16349);const J=q,ae=J?.error||J[0]?.error;if(ae){me(Zt,`RPC '${e}' stream ${o} received error:`,ae);const Y=ae.status;let W=(function(I){const A=It[I];if(A!==void 0)return u_(A)})(Y),ie=ae.message;W===void 0&&(W=K.INTERNAL,ie="Unknown error status: "+Y+" with message "+ae.message),k=!0,j.a_(new he(W,ie)),x.close()}else me(Zt,`RPC '${e}' stream ${o} received:`,q),j.u_(q)}})),U(p,kx.STAT_EVENT,(V=>{V.stat===Sf.PROXY?me(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Sf.NOPROXY&&me(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Yh(){return typeof document<"u"?document:null}function Zu(r){return new WI(r,!0)}class T_{constructor(e,t,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const O0="PersistentStream";class N_{constructor(e,t,s,o,c,h,p,m){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new T_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(ms(t.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(O0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(me(O0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qS extends N_{constructor(e,t,s,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Le.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Le.min():h.readTime?Fr(h.readTime):Le.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Of(this.serializer),t.addTarget=(function(c,h){let p;const m=h.target;if(p=Pf(m)?{documents:JI(c,m)}:{query:ZI(c,m).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=f_(c,h.resumeToken);const g=Df(c,h.expectedCount);g!==null&&(p.expectedCount=g)}else if(h.snapshotVersion.compareTo(Le.min())>0){p.readTime=Cu(c,h.snapshotVersion.toTimestamp());const g=Df(c,h.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=tS(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Of(this.serializer),t.removeTarget=e,this.q_(t)}}class $S extends N_{constructor(e,t,s,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=XI(e.writeResults,e.commitTime),s=Fr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Of(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>YI(this.serializer,s)))};this.q_(t)}}class HS{}class WS extends HS{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Mf(t,s),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(K.UNKNOWN,c.toString())}))}Ho(e,t,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,Mf(t,s),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Xi="RemoteStore";class QS{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{no(this)&&(me(Xi,"Restarting streams for network reachability change."),await(async function(m){const g=Ve(m);g.Ea.add(4),await Dl(g),g.Ra.set("Unknown"),g.Ea.delete(4),await ed(g)})(this))}))})),this.Ra=new GS(s,o)}}async function ed(r){if(no(r))for(const e of r.da)await e(!0)}async function Dl(r){for(const e of r.da)await e(!1)}function I_(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Rp(t)?Ap(t):ca(t).O_()&&Cp(t,e))}function kp(r,e){const t=Ve(r),s=ca(t);t.Ia.delete(e),s.O_()&&S_(t,e),t.Ia.size===0&&(s.O_()?s.L_():no(t)&&t.Ra.set("Unknown"))}function Cp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(r).Y_(e)}function S_(r,e){r.Va.Ue(e),ca(r).Z_(e)}function Ap(r){r.Va=new zI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ca(r).start(),r.Ra.ua()}function Rp(r){return no(r)&&!ca(r).x_()&&r.Ia.size>0}function no(r){return Ve(r).Ea.size===0}function k_(r){r.Va=void 0}async function KS(r){r.Ra.set("Online")}async function YS(r){r.Ia.forEach(((e,t)=>{Cp(r,e)}))}async function XS(r,e){k_(r),Rp(r)?(r.Ra.ha(e),Ap(r)):r.Ra.set("Unknown")}async function JS(r,e,t){if(r.Ra.set("Online"),e instanceof h_&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(s){me(Xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ru(r,s)}else if(e instanceof hu?r.Va.Ze(e):e instanceof d_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Le.min()))try{const s=await b_(r.localStore);t.compareTo(s)>=0&&await(function(c,h){const p=c.Va.Tt(h);return p.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=c.Ia.get(g);_&&c.Ia.set(g,_.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,g)=>{const _=c.Ia.get(m);if(!_)return;c.Ia.set(m,_.withResumeToken(Wt.EMPTY_BYTE_STRING,_.snapshotVersion)),S_(c,m);const x=new Js(_.target,m,g,_.sequenceNumber);Cp(c,x)})),c.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(s){me(Xi,"Failed to raise snapshot:",s),await Ru(r,s)}}async function Ru(r,e,t){if(!aa(e))throw e;r.Ea.add(1),await Dl(r),r.Ra.set("Offline"),t||(t=()=>b_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{me(Xi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ed(r)}))}function C_(r,e){return e().catch((t=>Ru(r,t,e)))}async function td(r){const e=Ve(r),t=li(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pp;for(;ZS(e);)try{const o=await DS(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,ek(e,o)}catch(o){await Ru(e,o)}A_(e)&&R_(e)}function ZS(r){return no(r)&&r.Ta.length<10}function ek(r,e){r.Ta.push(e);const t=li(r);t.O_()&&t.X_&&t.ea(e.mutations)}function A_(r){return no(r)&&!li(r).x_()&&r.Ta.length>0}function R_(r){li(r).start()}async function tk(r){li(r).ra()}async function nk(r){const e=li(r);for(const t of r.Ta)e.ea(t.mutations)}async function rk(r,e,t){const s=r.Ta.shift(),o=wp.from(s,e,t);await C_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await td(r)}async function sk(r,e){e&&li(r).X_&&await(async function(s,o){if((function(h){return UI(h)&&h!==K.ABORTED})(o.code)){const c=s.Ta.shift();li(s).B_(),await C_(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await td(s)}})(r,e),A_(r)&&R_(r)}async function V0(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),me(Xi,"RemoteStore received new credentials");const s=no(t);t.Ea.add(3),await Dl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ed(t)}async function ik(r,e){const t=Ve(r);e?(t.Ea.delete(2),await ed(t)):e||(t.Ea.add(2),await Dl(t),t.Ra.set("Unknown"))}function ca(r){return r.ma||(r.ma=(function(t,s,o){const c=Ve(t);return c.sa(),new qS(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:KS.bind(null,r),t_:YS.bind(null,r),r_:XS.bind(null,r),H_:JS.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Rp(r)?Ap(r):r.Ra.set("Unknown")):(await r.ma.stop(),k_(r))}))),r.ma}function li(r){return r.fa||(r.fa=(function(t,s,o){const c=Ve(t);return c.sa(),new $S(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:tk.bind(null,r),r_:sk.bind(null,r),ta:nk.bind(null,r),na:rk.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await td(r)):(await r.fa.stop(),r.Ta.length>0&&(me(Xi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Pp{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const h=Date.now()+s,p=new Pp(e,t,h,o,c);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(r,e){if(ms("AsyncQueue",`${e}: ${r}`),aa(r))return new he(K.UNAVAILABLE,`${e}: ${r}`);throw r}class Yo{static emptySet(e){return new Yo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ie.comparator(t.key,s.key):(t,s)=>Ie.comparator(t.key,s.key),this.keyedMap=tl(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Yo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class U0{constructor(){this.ga=new pt(Ie.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):je(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ra{constructor(e,t,s,o,c,h,p,m,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,c){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new ra(e,t,Yo.emptySet(t),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}class ok{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ak{constructor(){this.queries=F0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Ve(t),c=o.queries;o.queries=F0(),c.forEach(((h,p)=>{for(const m of p.Sa)m.onError(s)}))})(this,new he(K.ABORTED,"Firestore shutting down"))}}function F0(){return new to((r=>Jx(r)),Qu)}async function Dp(r,e){const t=Ve(r);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new ok,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=jp(h,`Initialization of query '${zo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Lp(t)}async function Mp(r,e){const t=Ve(r),s=e.query;let o=3;const c=t.queries.get(s);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function lk(r,e){const t=Ve(r);let s=!1;for(const o of e){const c=o.query,h=t.queries.get(c);if(h){for(const p of h.Sa)p.Fa(o)&&(s=!0);h.wa=o}}s&&Lp(t)}function ck(r,e,t){const s=Ve(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);s.queries.delete(e)}function Lp(r){r.Ca.forEach((e=>{e.next()}))}var Ff,B0;(B0=Ff||(Ff={})).Ma="default",B0.Cache="cache";class Op{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ra(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ff.Cache}}class P_{constructor(e){this.key=e}}class j_{constructor(e){this.key=e}}class uk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=Zx(e),this.tu=new Yo(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new U0,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,x)=>{const b=o.get(_),k=Ku(this.query,x)?x:null,j=!!b&&this.mutatedKeys.has(b.key),U=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let V=!1;b&&k?b.data.isEqual(k.data)?j!==U&&(s.track({type:3,doc:k}),V=!0):this.su(b,k)||(s.track({type:2,doc:k}),V=!0,(m&&this.eu(k,m)>0||g&&this.eu(k,g)<0)&&(p=!0)):!b&&k?(s.track({type:0,doc:k}),V=!0):b&&!k&&(s.track({type:1,doc:b}),V=!0,(m||g)&&(p=!0)),V&&(k?(h=h.add(k),c=U?c.add(_):c.delete(_)):(h=h.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{tu:h,iu:s,Cs:p,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,x)=>(function(k,j){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{Rt:V})}};return U(k)-U(j)})(_.type,x.type)||this.eu(_.doc,x.doc))),this.ou(s),o=o??!1;const p=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,g=m!==this.Za;return this.Za=m,h.length!==0||g?{snapshot:new ra(this.query,e.tu,c,h,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new j_(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new P_(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ra.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vp="SyncEngine";class dk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class hk{constructor(e){this.key=e,this.hu=!1}}class fk{constructor(e,t,s,o,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new to((p=>Jx(p)),Qu),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ie.comparator),this.Au=new Map,this.Ru=new Tp,this.Vu={},this.mu=new Map,this.fu=na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pk(r,e,t=!0){const s=U_(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await D_(s,e,t,!0),o}async function mk(r,e){const t=U_(r);await D_(t,e,!0,!1)}async function D_(r,e,t,s){const o=await MS(r.localStore,Ur(e)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,t);let p;return s&&(p=await gk(r,e,c,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&I_(r.remoteStore,o),p}async function gk(r,e,t,s,o){r.pu=(x,b,k)=>(async function(U,V,q,J){let ae=V.view.ru(q);ae.Cs&&(ae=await j0(U.localStore,V.query,!1).then((({documents:R})=>V.view.ru(R,ae))));const Y=J&&J.targetChanges.get(V.targetId),W=J&&J.targetMismatches.get(V.targetId)!=null,ie=V.view.applyChanges(ae,U.isPrimaryClient,Y,W);return q0(U,V.targetId,ie.au),ie.snapshot})(r,x,b,k);const c=await j0(r.localStore,e,!0),h=new uk(e,c.Qs),p=h.ru(c.documents),m=jl.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),g=h.applyChanges(p,r.isPrimaryClient,m);q0(r,t,g.au);const _=new dk(e,t,h);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function yk(r,e,t){const s=Ve(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((h=>!Qu(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Vf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&kp(s.remoteStore,o.targetId),Bf(s,o.targetId)})).catch(oa)):(Bf(s,o.targetId),await Vf(s.localStore,o.targetId,!0))}async function vk(r,e){const t=Ve(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),kp(t.remoteStore,s.targetId))}async function xk(r,e,t){const s=Ik(r);try{const o=await(function(h,p){const m=Ve(h),g=et.now(),_=p.reduce(((k,j)=>k.add(j.key)),He());let x,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let j=gs(),U=He();return m.Ns.getEntries(k,_).next((V=>{j=V,j.forEach(((q,J)=>{J.isValidDocument()||(U=U.add(q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(k,j))).next((V=>{x=V;const q=[];for(const J of p){const ae=DI(J,x.get(J.key).overlayedDocument);ae!=null&&q.push(new fi(J.key,ae,$x(ae.value.mapValue),Yn.exists(!0)))}return m.mutationQueue.addMutationBatch(k,g,q,p)})).next((V=>{b=V;const q=V.applyToLocalDocumentSet(x,U);return m.documentOverlayCache.saveOverlays(k,V.batchId,q)}))})).then((()=>({batchId:b.batchId,changes:t_(x)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let g=h.Vu[h.currentUser.toKey()];g||(g=new pt($e)),g=g.insert(p,m),h.Vu[h.currentUser.toKey()]=g})(s,o.batchId,t),await Ml(s,o.changes),await td(s.remoteStore)}catch(o){const c=jp(o,"Failed to persist write");t.reject(c)}}async function M_(r,e){const t=Ve(r);try{const s=await PS(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=t.Au.get(c);h&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Je(h.hu,14607):o.removedDocuments.size>0&&(Je(h.hu,42227),h.hu=!1))})),await Ml(t,s,e)}catch(s){await oa(s)}}function z0(r,e,t){const s=Ve(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=Ve(h);m.onlineState=p;let g=!1;m.queries.forEach(((_,x)=>{for(const b of x.Sa)b.va(p)&&(g=!0)})),g&&Lp(m)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _k(r,e,t){const s=Ve(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),c=o&&o.key;if(c){let h=new pt(Ie.comparator);h=h.insert(c,tn.newNoDocument(c,Le.min()));const p=He().add(c),m=new Ju(Le.min(),new Map,new pt($e),h,p);await M_(s,m),s.du=s.du.remove(c),s.Au.delete(e),Up(s)}else await Vf(s.localStore,e,!1).then((()=>Bf(s,e,t))).catch(oa)}async function wk(r,e){const t=Ve(r),s=e.batch.batchId;try{const o=await RS(t.localStore,e);O_(t,s,null),L_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ml(t,o)}catch(o){await oa(o)}}async function Ek(r,e,t){const s=Ve(r);try{const o=await(function(h,p){const m=Ve(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,p).next((x=>(Je(x!==null,37113),_=x.keys(),m.mutationQueue.removeMutationBatch(g,x)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);O_(s,e,t),L_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ml(s,o)}catch(o){await oa(o)}}function L_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function O_(r,e,t){const s=Ve(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Bf(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||V_(r,s)}))}function V_(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(kp(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Up(r))}function q0(r,e,t){for(const s of t)s instanceof P_?(r.Ru.addReference(s.key,e),bk(r,s)):s instanceof j_?(me(Vp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||V_(r,s.key)):je(19791,{wu:s})}function bk(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(me(Vp,"New document in limbo: "+t),r.Eu.add(s),Up(r))}function Up(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ie(st.fromString(e)),s=r.fu.next();r.Au.set(s,new hk(t)),r.du=r.du.insert(t,s),I_(r.remoteStore,new Js(Ur(Gu(t.path)),s,"TargetPurposeLimboResolution",$u.ce))}}async function Ml(r,e,t){const s=Ve(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,m)=>{h.push(s.pu(m,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){o.push(g);const _=Ip.As(m.targetId,g);c.push(_)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(m,g){const _=Ve(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>Z.forEach(g,(b=>Z.forEach(b.Es,(k=>_.persistence.referenceDelegate.addReference(x,b.targetId,k))).next((()=>Z.forEach(b.ds,(k=>_.persistence.referenceDelegate.removeReference(x,b.targetId,k)))))))))}catch(x){if(!aa(x))throw x;me(Sp,"Failed to update sequence numbers: "+x)}for(const x of g){const b=x.targetId;if(!x.fromCache){const k=_.Ms.get(b),j=k.snapshotVersion,U=k.withLastLimboFreeSnapshotVersion(j);_.Ms=_.Ms.insert(b,U)}}})(s.localStore,c))}async function Tk(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){me(Vp,"User change. New user:",e.toKey());const s=await E_(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((m=>{m.reject(new he(K.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ml(t,s.Ls)}}function Nk(r,e){const t=Ve(r),s=t.Au.get(e);if(s&&s.hu)return He().add(s.key);{let o=He();const c=t.Iu.get(e);if(!c)return o;for(const h of c){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function U_(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=M_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_k.bind(null,e),e.Pu.H_=lk.bind(null,e.eventManager),e.Pu.yu=ck.bind(null,e.eventManager),e}function Ik(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ek.bind(null,e),e}class Pu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AS(this.persistence,new SS,e.initialUser,this.serializer)}Cu(e){return new w_(Np.mi,this.serializer)}Du(e){return new OS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pu.provider={build:()=>new Pu};class Sk extends Pu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof Au,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hS(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new w_((s=>Au.mi(s,t)),this.serializer)}}class zf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>z0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tk.bind(null,this.syncEngine),await ik(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ak})()}createDatastore(e){const t=Zu(e.databaseInfo.databaseId),s=(function(c){return new zS(c)})(e.databaseInfo);return(function(c,h,p,m){return new WS(c,h,p,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,c,h,p){return new QS(s,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>z0(this.syncEngine,t,0)),(function(){return L0.v()?new L0:new VS})())}createSyncEngine(e,t){return(function(o,c,h,p,m,g,_){const x=new fk(o,c,h,p,m,g);return _&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Ve(t);me(Xi,"RemoteStore shutting down."),s.Ea.add(5),await Dl(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zf.provider={build:()=>new zf};class Fp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ci="FirestoreClient";class kk{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=fp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{me(ci,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(me(ci,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=jp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Xh(r,e){r.asyncQueue.verifyOperationInProgress(),me(ci,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await E_(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function $0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Ck(r);me(ci,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>V0(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>V0(e.remoteStore,o))),r._onlineComponents=e}async function Ck(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){me(ci,"Using user provided OfflineComponentProvider");try{await Xh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Jo("Error using user provided cache. Falling back to memory cache: "+t),await Xh(r,new Pu)}}else me(ci,"Using default OfflineComponentProvider"),await Xh(r,new Sk(void 0));return r._offlineComponents}async function F_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(me(ci,"Using user provided OnlineComponentProvider"),await $0(r,r._uninitializedComponentsProvider._online)):(me(ci,"Using default OnlineComponentProvider"),await $0(r,new zf))),r._onlineComponents}function Ak(r){return F_(r).then((e=>e.syncEngine))}async function ju(r){const e=await F_(r),t=e.eventManager;return t.onListen=pk.bind(null,e.syncEngine),t.onUnlisten=yk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),t}function Rk(r,e,t={}){const s=new hs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,m,g){const _=new Fp({next:b=>{_.Nu(),h.enqueueAndForget((()=>Mp(c,x)));const k=b.docs.has(p);!k&&b.fromCache?g.reject(new he(K.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&b.fromCache&&m&&m.source==="server"?g.reject(new he(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),x=new Op(Gu(p.path),_,{includeMetadataChanges:!0,qa:!0});return Dp(c,x)})(await ju(r),r.asyncQueue,e,t,s))),s.promise}function Pk(r,e,t={}){const s=new hs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,m,g){const _=new Fp({next:b=>{_.Nu(),h.enqueueAndForget((()=>Mp(c,x))),b.fromCache&&m.source==="server"?g.reject(new he(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),x=new Op(p,_,{includeMetadataChanges:!0,qa:!0});return Dp(c,x)})(await ju(r),r.asyncQueue,e,t,s))),s.promise}function B_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const H0=new Map;const z_="firestore.googleapis.com",W0=!0;class G0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=z_,this.ssl=W0}else this.host=e.host,this.ssl=e.ssl??W0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=__;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uS)throw new he(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new ON;switch(s.type){case"firstParty":return new BN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=H0.get(t);s&&(me("ComponentProvider","Removing Datastore"),H0.delete(t),s.terminate())})(this),Promise.resolve()}}function jk(r,e,t,s={}){r=En(r,nd);const o=Ji(e),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;o&&(Zf(`https://${p}`),ep("Firestore",!0)),c.host!==z_&&c.host!==p&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:p,ssl:o,emulatorOptions:s};if(!Wi(m,h)&&(r._setSettings(m),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=en.MOCK_USER;else{g=Uv(s.mockUserToken,r._app?.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new he(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new en(x)}r._authCredentials=new VN(new Px(g,_))}}class vs{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class yt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yt(this.firestore,e,this._key)}toJSON(){return{type:yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Rl(t,yt._jsonSchema))return new yt(e,s||null,new Ie(st.fromString(t.referencePath)))}}yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:kt("string",yt._jsonSchemaVersion),referencePath:kt("string")};class ni extends vs{constructor(e,t,s){super(e,t,Gu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new Ie(e))}withConverter(e){return new ni(this.firestore,e,this._path)}}function pi(r,e,...t){if(r=jt(r),jx("collection","path",e),r instanceof nd){const s=st.fromString(e,...t);return o0(s),new ni(r,null,s)}{if(!(r instanceof yt||r instanceof ni))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return o0(s),new ni(r.firestore,null,s)}}function mi(r,e,...t){if(r=jt(r),arguments.length===1&&(e=fp.newId()),jx("doc","path",e),r instanceof nd){const s=st.fromString(e,...t);return i0(s),new yt(r,null,new Ie(s))}{if(!(r instanceof yt||r instanceof ni))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(st.fromString(e,...t));return i0(s),new yt(r.firestore,r instanceof ni?r.converter:null,new Ie(s))}}const Q0="AsyncQueue";class K0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new T_(this,"async_queue_retry"),this._c=()=>{const s=Yh();s&&me(Q0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Yh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!aa(e))throw e;me(Q0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",Y0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Pp.createAndSchedule(this,e,t,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&je(47125,{Pc:Y0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function X0(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class ys extends nd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new K0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K0(e),this._firestoreClient=void 0,await e}}}function Dk(r,e){const t=typeof r=="object"?r:rp(),s=typeof r=="string"?r:bu,o=Uu(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Lv("firestore");c&&jk(o,...c)}return o}function rd(r){if(r._terminated)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Mk(r),r._firestoreClient}function Mk(r){const e=r._freezeSettings(),t=(function(o,c,h,p){return new iI(o,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,B_(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new kk(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(Wt.fromBase64String(e))}catch(t){throw new he(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rl(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:kt("string",Kn._jsonSchemaVersion),bytes:kt("string")};class sd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bp{constructor(e){this._methodName=e}}class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Rl(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:kt("string",Br._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};class zr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rl(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zr(e.vectorValues);throw new he(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:kt("string",zr._jsonSchemaVersion),vectorValues:kt("object")};const Lk=/^__.*__$/;class Ok{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pl(e,this.data,t,this.fieldTransforms)}}class q_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ac:r})}}class zp{constructor(e,t,s,o,c,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Du(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if($_(this.Ac)&&Lk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Vk{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zu(e)}Cc(e,t,s,o=!1){return new zp({Ac:e,methodName:t,Dc:s,path:Ht.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function id(r){const e=r._freezeSettings(),t=Zu(r._databaseId);return new Vk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function H_(r,e,t,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,e,t,o);qp("Data must be an object, but it was:",h,s);const p=W_(s,h);let m,g;if(c.merge)m=new On(h.fieldMask),g=h.fieldTransforms;else if(c.mergeFields){const _=[];for(const x of c.mergeFields){const b=qf(e,x,t);if(!h.contains(b))throw new he(K.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Q_(_,b)||_.push(b)}m=new On(_),g=h.fieldTransforms.filter((x=>m.covers(x.field)))}else m=null,g=h.fieldTransforms;return new Ok(new wn(p),m,g)}class od extends Bp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function Uk(r,e,t,s){const o=r.Cc(1,e,t);qp("Data must be an object, but it was:",o,s);const c=[],h=wn.empty();hi(s,((m,g)=>{const _=$p(e,m,t);g=jt(g);const x=o.yc(_);if(g instanceof od)c.push(_);else{const b=Ll(g,x);b!=null&&(c.push(_),h.set(_,b))}}));const p=new On(c);return new q_(h,p,o.fieldTransforms)}function Fk(r,e,t,s,o,c){const h=r.Cc(1,e,t),p=[qf(e,s,t)],m=[o];if(c.length%2!=0)throw new he(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)p.push(qf(e,c[b])),m.push(c[b+1]);const g=[],_=wn.empty();for(let b=p.length-1;b>=0;--b)if(!Q_(g,p[b])){const k=p[b];let j=m[b];j=jt(j);const U=h.yc(k);if(j instanceof od)g.push(k);else{const V=Ll(j,U);V!=null&&(g.push(k),_.set(k,V))}}const x=new On(g);return new q_(_,x,h.fieldTransforms)}function Bk(r,e,t,s=!1){return Ll(t,r.Cc(s?4:3,e))}function Ll(r,e){if(G_(r=jt(r)))return qp("Unsupported field value:",e,r),W_(r,e);if(r instanceof Bp)return(function(s,o){if(!$_(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let h=0;for(const p of s){let m=Ll(p,o.wc(h));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),h++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=et.fromDate(s);return{timestampValue:Cu(o.serializer,c)}}if(s instanceof et){const c=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Cu(o.serializer,c)}}if(s instanceof Br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Kn)return{bytesValue:f_(o.serializer,s._byteString)};if(s instanceof yt){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:bp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof zr)return(function(h,p){return{mapValue:{fields:{[zx]:{stringValue:qx},[Tu]:{arrayValue:{values:h.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return xp(p.serializer,g)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${qu(s)}`)})(r,e)}function W_(r,e){const t={};return Lx(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(r,((s,o)=>{const c=Ll(o,e.mc(s));c!=null&&(t[s]=c)})),{mapValue:{fields:t}}}function G_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof Br||r instanceof Kn||r instanceof yt||r instanceof Bp||r instanceof zr)}function qp(r,e,t){if(!G_(t)||!Dx(t)){const s=qu(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function qf(r,e,t){if((e=jt(e))instanceof sd)return e._internalPath;if(typeof e=="string")return $p(r,e);throw Du("Field path arguments must be of type string or ",r,!1,void 0,t)}const zk=new RegExp("[~\\*/\\[\\]]");function $p(r,e,t){if(e.search(zk)>=0)throw Du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new sd(...e.split("."))._internalPath}catch{throw Du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Du(r,e,t,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(c||h)&&(m+=" (found",c&&(m+=` in field ${s}`),h&&(m+=` in document ${o}`),m+=")"),new he(K.INVALID_ARGUMENT,p+r+m)}function Q_(r,e){return r.some((t=>t.isEqual(e)))}class K_{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qk extends K_{data(){return super.data()}}function Hp(r,e){return typeof e=="string"?$p(r,e):e instanceof sd?e._internalPath:e._delegate._internalPath}function Y_(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class Gp extends Wp{}function ad(r,e,...t){let s=[];e instanceof Wp&&s.push(e),s=s.concat(t),(function(c){const h=c.filter((m=>m instanceof Kp)).length,p=c.filter((m=>m instanceof Qp)).length;if(h>1||h>0&&p>0)throw new he(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class Qp extends Gp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Qp(e,t,s)}_apply(e){const t=this._parse(e);return J_(e._query,t),new vs(e.firestore,e.converter,jf(e._query,t))}_parse(e){const t=id(e.firestore);return(function(c,h,p,m,g,_,x){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Z0(x,_);const j=[];for(const U of x)j.push(J0(m,c,U));b={arrayValue:{values:j}}}else b=J0(m,c,x)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Z0(x,_),b=Bk(p,h,x,_==="in"||_==="not-in");return St.create(g,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Kp extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Kp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:fr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const m of p)J_(h,m),h=jf(h,m)})(e._query,t),new vs(e.firestore,e.converter,jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends Gp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Yp(e,t)}_apply(e){const t=(function(o,c,h){if(o.startAt!==null)throw new he(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _l(c,h)})(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,(function(o,c){const h=o.explicitOrderBy.concat([c]);return new la(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function ld(r,e="asc"){const t=e,s=Hp("orderBy",r);return Yp._create(s,t)}class Xp extends Gp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Xp(e,t,s)}_apply(e){return new vs(e.firestore,e.converter,Iu(e._query,this._limit,this._limitType))}}function X_(r){return QN("limit",r),Xp._create("limit",r,"F")}function J0(r,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new he(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xx(e)&&t.indexOf("/")!==-1)throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!Ie.isDocumentKey(s))throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return p0(r,new Ie(s))}if(t instanceof yt)return p0(r,t._key);throw new he(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(t)}.`)}function Z0(r,e){if(!Array.isArray(r)||r.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J_(r,e){const t=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $k{convertValue(e,t="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return hi(e,((o,c)=>{s[o]=this.convertValue(c,t)})),s}convertVectorValue(e){const t=e.fields?.[Tu].arrayValue?.values?.map((s=>wt(s.doubleValue)));return new zr(t)}convertGeoPoint(e){return new Br(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Wu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(yl(e));default:return null}}convertTimestamp(e){const t=ii(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);Je(x_(s),9688,{name:e});const o=new vl(s.get(1),s.get(3)),c=new Ie(s.popFirst(5));return o.isEqual(t)||ms(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Z_(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $i extends K_{constructor(e,t,s,o,c,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Hp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$i._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$i._jsonSchemaVersion="firestore/documentSnapshot/1.0",$i._jsonSchema={type:kt("string",$i._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class fu extends $i{data(e={}){return super.data(e)}}class Hi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new fu(this._firestore,this._userDataWriter,s.key,s,new rl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new fu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new rl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const m=new fu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new rl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return p.type!==0&&(g=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),_=h.indexOf(p.doc.key)),{type:Hk(p.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Hk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:r})}}function Wk(r){r=En(r,yt);const e=En(r.firestore,ys);return Rk(rd(e),r._key).then((t=>t1(e,r,t)))}Hi._jsonSchemaVersion="firestore/querySnapshot/1.0",Hi._jsonSchema={type:kt("string",Hi._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class Jp extends $k{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}}function Gk(r){r=En(r,vs);const e=En(r.firestore,ys),t=rd(e),s=new Jp(e);return Y_(r._query),Pk(t,r._query).then((o=>new Hi(e,s,r,o)))}function Qk(r,e,t){r=En(r,yt);const s=En(r.firestore,ys),o=Z_(r.converter,e);return ud(s,[H_(id(s),"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,Yn.none())])}function Zp(r,e,t,...s){r=En(r,yt);const o=En(r.firestore,ys),c=id(o);let h;return h=typeof(e=jt(e))=="string"||e instanceof sd?Fk(c,"updateDoc",r._key,e,t,s):Uk(c,"updateDoc",r._key,e),ud(o,[h.toMutation(r._key,Yn.exists(!0))])}function e1(r){return ud(En(r.firestore,ys),[new _p(r._key,Yn.none())])}function em(r,e){const t=En(r.firestore,ys),s=mi(r),o=Z_(r.converter,e);return ud(t,[H_(id(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Yn.exists(!1))]).then((()=>s))}function cd(r,...e){r=jt(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||X0(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(X0(e[s])){const m=e[s];e[s]=m.next?.bind(m),e[s+1]=m.error?.bind(m),e[s+2]=m.complete?.bind(m)}let c,h,p;if(r instanceof yt)h=En(r.firestore,ys),p=Gu(r._key.path),c={next:m=>{e[s]&&e[s](t1(h,r,m))},error:e[s+1],complete:e[s+2]};else{const m=En(r,vs);h=En(m.firestore,ys),p=m._query;const g=new Jp(h);c={next:_=>{e[s]&&e[s](new Hi(h,g,m,_))},error:e[s+1],complete:e[s+2]},Y_(r._query)}return(function(g,_,x,b){const k=new Fp(b),j=new Op(_,k,x);return g.asyncQueue.enqueueAndForget((async()=>Dp(await ju(g),j))),()=>{k.Nu(),g.asyncQueue.enqueueAndForget((async()=>Mp(await ju(g),j)))}})(rd(h),p,o,c)}function ud(r,e){return(function(s,o){const c=new hs;return s.asyncQueue.enqueueAndForget((async()=>xk(await Ak(s),o,c))),c.promise})(rd(r),e)}function t1(r,e,t){const s=t.docs.get(e._key),o=new Jp(r);return new $i(r,o,e._key,s,new rl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ia=o})(Zi),Gi(new ri("firestore",((s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),p=new ys(new UN(s.getProvider("auth-internal")),new zN(h,s.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vl(g.options.projectId,_)})(h,o),h);return c={useFetchStreams:t,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Lr(t0,n0,e),Lr(t0,n0,"esm2020")})();const n1="firebasestorage.googleapis.com",Kk="storageBucket",Yk=120*1e3,Xk=600*1e3;class Wr extends Hr{constructor(e,t,s=0){super(Jh(e),`Firebase Storage: ${t} (${Jh(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $r;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($r||($r={}));function Jh(r){return"storage/"+r}function Jk(){const r="An unknown error occurred, please check the error payload for server response.";return new Wr($r.UNKNOWN,r)}function Zk(){return new Wr($r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eC(){return new Wr($r.CANCELED,"User canceled the upload/download.")}function tC(r){return new Wr($r.INVALID_URL,"Invalid URL '"+r+"'.")}function nC(r){return new Wr($r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function ev(r){return new Wr($r.INVALID_ARGUMENT,r)}function r1(){return new Wr($r.APP_DELETED,"The Firebase app was deleted.")}function rC(r){return new Wr($r.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class dr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=dr.makeFromUrl(e,t)}catch{return new dr(e,"")}if(s.path==="")return s;throw nC(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),m={bucket:1,path:3};function g(Y){Y.path_=decodeURIComponent(Y.path)}const _="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",k=new RegExp(`^https?://${x}/${_}/b/${o}/o${b}`,"i"),j={bucket:1,path:3},U=t===n1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",q=new RegExp(`^https?://${U}/${o}/${V}`,"i"),ae=[{regex:p,indices:m,postModify:c},{regex:k,indices:j,postModify:g},{regex:q,indices:{bucket:1,path:2},postModify:g}];for(let Y=0;Y<ae.length;Y++){const W=ae[Y],ie=W.regex.exec(e);if(ie){const R=ie[W.indices.bucket];let I=ie[W.indices.path];I||(I=""),s=new dr(R,I),W.postModify(s);break}}if(s==null)throw tC(e);return s}}class sC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function iC(r,e,t){let s=1,o=null,c=null,h=!1,p=0;function m(){return p===2}let g=!1;function _(...V){g||(g=!0,e.apply(null,V))}function x(V){o=setTimeout(()=>{o=null,r(k,m())},V)}function b(){c&&clearTimeout(c)}function k(V,...q){if(g){b();return}if(V){b(),_.call(null,V,...q);return}if(m()||h){b(),_.call(null,V,...q);return}s<64&&(s*=2);let ae;p===1?(p=2,ae=0):ae=(s+Math.random())*1e3,x(ae)}let j=!1;function U(V){j||(j=!0,b(),!g&&(o!==null?(V||(p=2),clearTimeout(o),x(0)):V||(p=1)))}return x(0),c=setTimeout(()=>{h=!0,U(!0)},t),U}function oC(r){r(!1)}function aC(r){return r!==void 0}function tv(r,e,t,s){if(s<e)throw ev(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw ev(`Invalid value for '${r}'. Expected ${t} or less.`)}function lC(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Mu;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Mu||(Mu={}));function cC(r,e){const t=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return t||o||c}class uC{constructor(e,t,s,o,c,h,p,m,g,_,x,b=!0,k=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=x,this.retry=b,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,U)=>{this.resolve_=j,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new eu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=p=>{const m=p.loaded,g=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const p=c.getErrorCode()===Mu.NO_ERROR,m=c.getStatus();if(!p||cC(m,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Mu.ABORT;s(!1,new eu(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;s(!0,new eu(g,c))})},t=(s,o)=>{const c=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());aC(m)?c(m):c()}catch(m){h(m)}else if(p!==null){const m=Jk();m.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,m)):h(m)}else if(o.canceled){const m=this.appDelete_?r1():eC();h(m)}else{const m=Zk();h(m)}};this.canceled_?t(!1,new eu(!1,null,!0)):this.backoffId_=iC(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eu{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function dC(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function hC(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fC(r,e){e&&(r["X-Firebase-GMPID"]=e)}function pC(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function mC(r,e,t,s,o,c,h=!0,p=!1){const m=lC(r.urlParams),g=r.url+m,_=Object.assign({},r.headers);return fC(_,e),dC(_,t),hC(_,c),pC(_,s),new uC(g,r.method,_,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,h,p)}function gC(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function yC(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}class Lu{constructor(e,t){this._service=e,t instanceof dr?this._location=t:this._location=dr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lu(e,t)}get root(){const e=new dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yC(this._location.path)}get storage(){return this._service}get parent(){const e=gC(this._location.path);if(e===null)return null;const t=new dr(this._location.bucket,e);return new Lu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw rC(e)}}function nv(r,e){const t=e?.[Kk];return t==null?null:dr.makeFromBucketSpec(t,r)}function vC(r,e,t,s={}){r.host=`${e}:${t}`;const o=Ji(e);o&&(Zf(`https://${r.host}/b`),ep("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(r._overrideAuthToken=typeof c=="string"?c:Uv(c,r.app.options.projectId))}class xC{constructor(e,t,s,o,c,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=n1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yk,this._maxUploadRetryTime=Xk,this._requests=new Set,o!=null?this._bucket=dr.makeFromBucketSpec(o,this._host):this._bucket=nv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dr.makeFromBucketSpec(this._url,e):this._bucket=nv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lu(this,e)}_makeRequest(e,t,s,o,c=!0){if(this._deleted)return new sC(r1());{const h=mC(e,this._appId,s,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const rv="@firebase/storage",sv="0.14.0";const s1="storage";function _C(r=rp(),e){r=jt(r);const s=Uu(r,s1).getImmediate({identifier:e}),o=Lv("storage");return o&&wC(s,...o),s}function wC(r,e,t,s={}){vC(r,e,t,s)}function EC(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new xC(t,s,o,e,Zi)}function bC(){Gi(new ri(s1,EC,"PUBLIC").setMultipleInstances(!0)),Lr(rv,sv,""),Lr(rv,sv,"esm2020")}bC();const TC={apiKey:"AIzaSyAy2YTRu1dBUEFBy-fU7RFbP1bLTHT3DPE",authDomain:"edutrack-106d2.firebaseapp.com",projectId:"edutrack-106d2",storageBucket:"edutrack-106d2.firebasestorage.app",messagingSenderId:"128822490928",appId:"1:128822490928:web:ed4f33035bebd579327af5"},tm=zv(TC),un=Dk(tm),Mr=jN(tm);_C(tm);var NC=bv();const IC=Qf(NC);function SC(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}const kC=r=>{switch(r){case"success":return RC;case"info":return jC;case"warning":return PC;case"error":return DC;default:return null}},CC=Array(12).fill(0),AC=({visible:r,className:e})=>de.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},de.createElement("div",{className:"sonner-spinner"},CC.map((t,s)=>de.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),RC=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),PC=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jC=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),DC=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},de.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MC=de.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},de.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),de.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),LC=()=>{const[r,e]=de.useState(document.hidden);return de.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r};let $f=1;class OC{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:s,...o}=e,c=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:$f++,h=this.toasts.find(m=>m.id===c),p=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(c)&&this.dismissedToasts.delete(c),h?this.toasts=this.toasts.map(m=>m.id===c?(this.publish({...m,...e,id:c,title:s}),{...m,...e,id:c,dismissible:p,title:s}):m):this.addToast({title:s,...o,dismissible:p,id:c}),c},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(s=>s({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let s;t.loading!==void 0&&(s=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let c=s!==void 0,h;const p=o.then(async g=>{if(h=["resolve",g],de.isValidElement(g))c=!1,this.create({id:s,type:"default",message:g});else if(UC(g)&&!g.ok){c=!1;const x=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,j=typeof x=="object"&&!de.isValidElement(x)?x:{message:x};this.create({id:s,type:"error",description:b,...j})}else if(g instanceof Error){c=!1;const x=typeof t.error=="function"?await t.error(g):t.error,b=typeof t.description=="function"?await t.description(g):t.description,j=typeof x=="object"&&!de.isValidElement(x)?x:{message:x};this.create({id:s,type:"error",description:b,...j})}else if(t.success!==void 0){c=!1;const x=typeof t.success=="function"?await t.success(g):t.success,b=typeof t.description=="function"?await t.description(g):t.description,j=typeof x=="object"&&!de.isValidElement(x)?x:{message:x};this.create({id:s,type:"success",description:b,...j})}}).catch(async g=>{if(h=["reject",g],t.error!==void 0){c=!1;const _=typeof t.error=="function"?await t.error(g):t.error,x=typeof t.description=="function"?await t.description(g):t.description,k=typeof _=="object"&&!de.isValidElement(_)?_:{message:_};this.create({id:s,type:"error",description:x,...k})}}).finally(()=>{c&&(this.dismiss(s),s=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((g,_)=>p.then(()=>h[0]==="reject"?_(h[1]):g(h[1])).catch(_));return typeof s!="string"&&typeof s!="number"?{unwrap:m}:Object.assign(s,{unwrap:m})},this.custom=(e,t)=>{const s=t?.id||$f++;return this.create({jsx:e(s),id:s,...t}),s},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const xn=new OC,VC=(r,e)=>{const t=e?.id||$f++;return xn.addToast({title:r,...e,id:t}),t},UC=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",FC=VC,BC=()=>xn.toasts,zC=()=>xn.getActiveToasts(),Te=Object.assign(FC,{success:xn.success,info:xn.info,warning:xn.warning,error:xn.error,custom:xn.custom,message:xn.message,promise:xn.promise,dismiss:xn.dismiss,loading:xn.loading},{getHistory:BC,getToasts:zC});SC("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function tu(r){return r.label!==void 0}const qC=3,$C="24px",HC="16px",iv=4e3,WC=356,GC=14,QC=45,KC=200;function jr(...r){return r.filter(Boolean).join(" ")}function YC(r){const[e,t]=r.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}const XC=r=>{var e,t,s,o,c,h,p,m,g;const{invert:_,toast:x,unstyled:b,interacting:k,setHeights:j,visibleToasts:U,heights:V,index:q,toasts:J,expanded:ae,removeToast:Y,defaultRichColors:W,closeButton:ie,style:R,cancelButtonStyle:I,actionButtonStyle:A,className:D="",descriptionClassName:S="",duration:M,position:T,gap:ee,expandByDefault:Se,classNames:Ne,icons:De,closeButtonAriaLabel:oe="Close toast"}=r,[pe,G]=de.useState(null),[O,X]=de.useState(null),[ce,ge]=de.useState(!1),[_e,Ae]=de.useState(!1),[Fe,Ee]=de.useState(!1),[Q,ve]=de.useState(!1),[Be,it]=de.useState(!1),[sn,bn]=de.useState(0),[ro,Gr]=de.useState(0),Tn=de.useRef(x.duration||M||iv),xs=de.useRef(null),Xe=de.useRef(null),dt=q===0,Nn=q+1<=U,Ct=x.type,Vn=x.dismissible!==!1,so=x.className||"",pr=x.descriptionClassName||"",mr=de.useMemo(()=>V.findIndex(Re=>Re.toastId===x.id)||0,[V,x.id]),_s=de.useMemo(()=>{var Re;return(Re=x.closeButton)!=null?Re:ie},[x.closeButton,ie]),Xn=de.useMemo(()=>x.duration||M||iv,[x.duration,M]),ws=de.useRef(0),dn=de.useRef(0),Jn=de.useRef(0),Zn=de.useRef(null),[gr,Es]=T.split("-"),bs=de.useMemo(()=>V.reduce((Re,tt,vt)=>vt>=mr?Re:Re+tt.height,0),[V,mr]),hn=LC(),Ts=x.invert||_,Un=Ct==="loading";dn.current=de.useMemo(()=>mr*ee+bs,[mr,bs]),de.useEffect(()=>{Tn.current=Xn},[Xn]),de.useEffect(()=>{ge(!0)},[]),de.useEffect(()=>{const Re=Xe.current;if(Re){const tt=Re.getBoundingClientRect().height;return Gr(tt),j(vt=>[{toastId:x.id,height:tt,position:x.position},...vt]),()=>j(vt=>vt.filter(Dt=>Dt.toastId!==x.id))}},[j,x.id]),de.useLayoutEffect(()=>{if(!ce)return;const Re=Xe.current,tt=Re.style.height;Re.style.height="auto";const vt=Re.getBoundingClientRect().height;Re.style.height=tt,Gr(vt),j(Dt=>Dt.find(mt=>mt.toastId===x.id)?Dt.map(mt=>mt.toastId===x.id?{...mt,height:vt}:mt):[{toastId:x.id,height:vt,position:x.position},...Dt])},[ce,x.title,x.description,j,x.id,x.jsx,x.action,x.cancel]);const on=de.useCallback(()=>{Ae(!0),bn(dn.current),j(Re=>Re.filter(tt=>tt.toastId!==x.id)),setTimeout(()=>{Y(x)},KC)},[x,Y,j,dn]);de.useEffect(()=>{if(x.promise&&Ct==="loading"||x.duration===1/0||x.type==="loading")return;let Re;return ae||k||hn?(()=>{if(Jn.current<ws.current){const Dt=new Date().getTime()-ws.current;Tn.current=Tn.current-Dt}Jn.current=new Date().getTime()})():(()=>{Tn.current!==1/0&&(ws.current=new Date().getTime(),Re=setTimeout(()=>{x.onAutoClose==null||x.onAutoClose.call(x,x),on()},Tn.current))})(),()=>clearTimeout(Re)},[ae,k,x,Ct,hn,on]),de.useEffect(()=>{x.delete&&(on(),x.onDismiss==null||x.onDismiss.call(x,x))},[on,x.delete]);function er(){var Re;if(De?.loading){var tt;return de.createElement("div",{className:jr(Ne?.loader,x==null||(tt=x.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":Ct==="loading"},De.loading)}return de.createElement(AC,{className:jr(Ne?.loader,x==null||(Re=x.classNames)==null?void 0:Re.loader),visible:Ct==="loading"})}const tr=x.icon||De?.[Ct]||kC(Ct);var ot,Ns;return de.createElement("li",{tabIndex:0,ref:Xe,className:jr(D,so,Ne?.toast,x==null||(e=x.classNames)==null?void 0:e.toast,Ne?.default,Ne?.[Ct],x==null||(t=x.classNames)==null?void 0:t[Ct]),"data-sonner-toast":"","data-rich-colors":(ot=x.richColors)!=null?ot:W,"data-styled":!(x.jsx||x.unstyled||b),"data-mounted":ce,"data-promise":!!x.promise,"data-swiped":Be,"data-removed":_e,"data-visible":Nn,"data-y-position":gr,"data-x-position":Es,"data-index":q,"data-front":dt,"data-swiping":Fe,"data-dismissible":Vn,"data-type":Ct,"data-invert":Ts,"data-swipe-out":Q,"data-swipe-direction":O,"data-expanded":!!(ae||Se&&ce),"data-testid":x.testId,style:{"--index":q,"--toasts-before":q,"--z-index":J.length-q,"--offset":`${_e?sn:dn.current}px`,"--initial-height":Se?"auto":`${ro}px`,...R,...x.style},onDragEnd:()=>{Ee(!1),G(null),Zn.current=null},onPointerDown:Re=>{Re.button!==2&&(Un||!Vn||(xs.current=new Date,bn(dn.current),Re.target.setPointerCapture(Re.pointerId),Re.target.tagName!=="BUTTON"&&(Ee(!0),Zn.current={x:Re.clientX,y:Re.clientY})))},onPointerUp:()=>{var Re,tt,vt;if(Q||!Vn)return;Zn.current=null;const Dt=Number(((Re=Xe.current)==null?void 0:Re.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((tt=Xe.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mt=new Date().getTime()-((vt=xs.current)==null?void 0:vt.getTime()),Et=pe==="x"?Dt:an,In=Math.abs(Et)/mt;if(Math.abs(Et)>=QC||In>.11){bn(dn.current),x.onDismiss==null||x.onDismiss.call(x,x),X(pe==="x"?Dt>0?"right":"left":an>0?"down":"up"),on(),ve(!0);return}else{var bt,Gt;(bt=Xe.current)==null||bt.style.setProperty("--swipe-amount-x","0px"),(Gt=Xe.current)==null||Gt.style.setProperty("--swipe-amount-y","0px")}it(!1),Ee(!1),G(null)},onPointerMove:Re=>{var tt,vt,Dt;if(!Zn.current||!Vn||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;const mt=Re.clientY-Zn.current.y,Et=Re.clientX-Zn.current.x;var In;const bt=(In=r.swipeDirections)!=null?In:YC(T);!pe&&(Math.abs(Et)>1||Math.abs(mt)>1)&&G(Math.abs(Et)>Math.abs(mt)?"x":"y");let Gt={x:0,y:0};const Fn=Mt=>1/(1.5+Math.abs(Mt)/20);if(pe==="y"){if(bt.includes("top")||bt.includes("bottom"))if(bt.includes("top")&&mt<0||bt.includes("bottom")&&mt>0)Gt.y=mt;else{const Mt=mt*Fn(mt);Gt.y=Math.abs(Mt)<Math.abs(mt)?Mt:mt}}else if(pe==="x"&&(bt.includes("left")||bt.includes("right")))if(bt.includes("left")&&Et<0||bt.includes("right")&&Et>0)Gt.x=Et;else{const Mt=Et*Fn(Et);Gt.x=Math.abs(Mt)<Math.abs(Et)?Mt:Et}(Math.abs(Gt.x)>0||Math.abs(Gt.y)>0)&&it(!0),(vt=Xe.current)==null||vt.style.setProperty("--swipe-amount-x",`${Gt.x}px`),(Dt=Xe.current)==null||Dt.style.setProperty("--swipe-amount-y",`${Gt.y}px`)}},_s&&!x.jsx&&Ct!=="loading"?de.createElement("button",{"aria-label":oe,"data-disabled":Un,"data-close-button":!0,onClick:Un||!Vn?()=>{}:()=>{on(),x.onDismiss==null||x.onDismiss.call(x,x)},className:jr(Ne?.closeButton,x==null||(s=x.classNames)==null?void 0:s.closeButton)},(Ns=De?.close)!=null?Ns:MC):null,(Ct||x.icon||x.promise)&&x.icon!==null&&(De?.[Ct]!==null||x.icon)?de.createElement("div",{"data-icon":"",className:jr(Ne?.icon,x==null||(o=x.classNames)==null?void 0:o.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||er():null,x.type!=="loading"?tr:null):null,de.createElement("div",{"data-content":"",className:jr(Ne?.content,x==null||(c=x.classNames)==null?void 0:c.content)},de.createElement("div",{"data-title":"",className:jr(Ne?.title,x==null||(h=x.classNames)==null?void 0:h.title)},x.jsx?x.jsx:typeof x.title=="function"?x.title():x.title),x.description?de.createElement("div",{"data-description":"",className:jr(S,pr,Ne?.description,x==null||(p=x.classNames)==null?void 0:p.description)},typeof x.description=="function"?x.description():x.description):null),de.isValidElement(x.cancel)?x.cancel:x.cancel&&tu(x.cancel)?de.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||I,onClick:Re=>{tu(x.cancel)&&Vn&&(x.cancel.onClick==null||x.cancel.onClick.call(x.cancel,Re),on())},className:jr(Ne?.cancelButton,x==null||(m=x.classNames)==null?void 0:m.cancelButton)},x.cancel.label):null,de.isValidElement(x.action)?x.action:x.action&&tu(x.action)?de.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||A,onClick:Re=>{tu(x.action)&&(x.action.onClick==null||x.action.onClick.call(x.action,Re),!Re.defaultPrevented&&on())},className:jr(Ne?.actionButton,x==null||(g=x.classNames)==null?void 0:g.actionButton)},x.action.label):null)};function ov(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function JC(r,e){const t={};return[r,e].forEach((s,o)=>{const c=o===1,h=c?"--mobile-offset":"--offset",p=c?HC:$C;function m(g){["top","right","bottom","left"].forEach(_=>{t[`${h}-${_}`]=typeof g=="number"?`${g}px`:g})}typeof s=="number"||typeof s=="string"?m(s):typeof s=="object"?["top","right","bottom","left"].forEach(g=>{s[g]===void 0?t[`${h}-${g}`]=p:t[`${h}-${g}`]=typeof s[g]=="number"?`${s[g]}px`:s[g]}):m(p)}),t}const Zh=de.forwardRef(function(e,t){const{id:s,invert:o,position:c="bottom-right",hotkey:h=["altKey","KeyT"],expand:p,closeButton:m,className:g,offset:_,mobileOffset:x,theme:b="light",richColors:k,duration:j,style:U,visibleToasts:V=qC,toastOptions:q,dir:J=ov(),gap:ae=GC,icons:Y,containerAriaLabel:W="Notifications"}=e,[ie,R]=de.useState([]),I=de.useMemo(()=>s?ie.filter(ce=>ce.toasterId===s):ie.filter(ce=>!ce.toasterId),[ie,s]),A=de.useMemo(()=>Array.from(new Set([c].concat(I.filter(ce=>ce.position).map(ce=>ce.position)))),[I,c]),[D,S]=de.useState([]),[M,T]=de.useState(!1),[ee,Se]=de.useState(!1),[Ne,De]=de.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),oe=de.useRef(null),pe=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=de.useRef(null),O=de.useRef(!1),X=de.useCallback(ce=>{R(ge=>{var _e;return(_e=ge.find(Ae=>Ae.id===ce.id))!=null&&_e.delete||xn.dismiss(ce.id),ge.filter(({id:Ae})=>Ae!==ce.id)})},[]);return de.useEffect(()=>xn.subscribe(ce=>{if(ce.dismiss){requestAnimationFrame(()=>{R(ge=>ge.map(_e=>_e.id===ce.id?{..._e,delete:!0}:_e))});return}setTimeout(()=>{IC.flushSync(()=>{R(ge=>{const _e=ge.findIndex(Ae=>Ae.id===ce.id);return _e!==-1?[...ge.slice(0,_e),{...ge[_e],...ce},...ge.slice(_e+1)]:[ce,...ge]})})})}),[ie]),de.useEffect(()=>{if(b!=="system"){De(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?De("dark"):De("light")),typeof window>"u")return;const ce=window.matchMedia("(prefers-color-scheme: dark)");try{ce.addEventListener("change",({matches:ge})=>{De(ge?"dark":"light")})}catch{ce.addListener(({matches:_e})=>{try{De(_e?"dark":"light")}catch(Ae){console.error(Ae)}})}},[b]),de.useEffect(()=>{ie.length<=1&&T(!1)},[ie]),de.useEffect(()=>{const ce=ge=>{var _e;if(h.every(Ee=>ge[Ee]||ge.code===Ee)){var Fe;T(!0),(Fe=oe.current)==null||Fe.focus()}ge.code==="Escape"&&(document.activeElement===oe.current||(_e=oe.current)!=null&&_e.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",ce),()=>document.removeEventListener("keydown",ce)},[h]),de.useEffect(()=>{if(oe.current)return()=>{G.current&&(G.current.focus({preventScroll:!0}),G.current=null,O.current=!1)}},[oe.current]),de.createElement("section",{ref:t,"aria-label":`${W} ${pe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((ce,ge)=>{var _e;const[Ae,Fe]=ce.split("-");return I.length?de.createElement("ol",{key:ce,dir:J==="auto"?ov():J,tabIndex:-1,ref:oe,className:g,"data-sonner-toaster":!0,"data-sonner-theme":Ne,"data-y-position":Ae,"data-x-position":Fe,style:{"--front-toast-height":`${((_e=D[0])==null?void 0:_e.height)||0}px`,"--width":`${WC}px`,"--gap":`${ae}px`,...U,...JC(_,x)},onBlur:Ee=>{O.current&&!Ee.currentTarget.contains(Ee.relatedTarget)&&(O.current=!1,G.current&&(G.current.focus({preventScroll:!0}),G.current=null))},onFocus:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||O.current||(O.current=!0,G.current=Ee.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{ee||T(!1)},onDragEnd:()=>T(!1),onPointerDown:Ee=>{Ee.target instanceof HTMLElement&&Ee.target.dataset.dismissible==="false"||Se(!0)},onPointerUp:()=>Se(!1)},I.filter(Ee=>!Ee.position&&ge===0||Ee.position===ce).map((Ee,Q)=>{var ve,Be;return de.createElement(XC,{key:Ee.id,icons:Y,index:Q,toast:Ee,defaultRichColors:k,duration:(ve=q?.duration)!=null?ve:j,className:q?.className,descriptionClassName:q?.descriptionClassName,invert:o,visibleToasts:V,closeButton:(Be=q?.closeButton)!=null?Be:m,interacting:ee,position:ce,style:q?.style,unstyled:q?.unstyled,classNames:q?.classNames,cancelButtonStyle:q?.cancelButtonStyle,actionButtonStyle:q?.actionButtonStyle,closeButtonAriaLabel:q?.closeButtonAriaLabel,removeToast:X,toasts:I.filter(it=>it.position==Ee.position),heights:D.filter(it=>it.position==Ee.position),setHeights:S,expandByDefault:p,gap:ae,expanded:M,swipeDirections:e.swipeDirections})})):null}))}),Wo={admin:["equipment:create","equipment:read","equipment:update","equipment:delete","chemical:create","chemical:read","chemical:update","chemical:delete","checkinout:create","checkinout:read","maintenance:create","maintenance:read","maintenance:update","reports:generate","users:manage","settings:modify"],teacher:["equipment:read","equipment:update","chemical:read","chemical:update","checkinout:create","checkinout:read","maintenance:read","reports:view"],"lab-assistant":["equipment:read","chemical:read","checkinout:create","checkinout:read","maintenance:create","maintenance:read"],student:["equipment:read","chemical:read","checkinout:read","maintenance:read","reports:view"]},i1=async(r,e,t="lab-assistant")=>{try{const s=mi(un,"users",r),o={uid:r,email:e,role:t,permissions:Wo[t],createdAt:new Date};return await Qk(s,o),{success:!0,profile:o}}catch(s){return console.error("Error creating user profile:",s),{success:!1,error:s}}},Hf=async r=>{try{const e=mi(un,"users",r),t=await Wk(e);return t.exists()?t.data():null}catch(e){return console.error("Error getting user profile:",e),null}},ZC=async(r,e)=>{try{const t=mi(un,"users",r);return await Zp(t,{role:e,permissions:Wo[e]}),{success:!0}}catch(t){return console.error("Error updating user role:",t),{success:!1,error:t}}},bl=(r,e)=>r?r.permissions.includes(e):!1,eA=async()=>{try{const r=await Gk(pi(un,"users")),e=[];return r.forEach(t=>{e.push(t.data())}),e}catch(r){return console.error("Error getting users:",r),[]}};function tA({onSignIn:r,onBack:e}){const[t,s]=te.useState(""),[o,c]=te.useState(""),[h,p]=te.useState(!1),[m,g]=te.useState("admin"),[_,x]=te.useState(!1),b=async k=>{k.preventDefault(),x(!0);try{const j=await xT(Mr,t,o);let U=await Hf(j.user.uid);U||(U=(await i1(j.user.uid,j.user.email||t,m)).profile||null),Te.success(`Welcome back! Signed in as ${U?.role||m}`),console.log("User profile:",U),r(U?.role||m)}catch(j){console.error("Sign in error:",j),j.code==="auth/user-not-found"?Te.error("No account found. Please check your email."):j.code==="auth/wrong-password"?Te.error("Incorrect password."):j.code==="auth/invalid-email"?Te.error("Invalid email address."):j.code==="auth/too-many-requests"?Te.error("Too many failed attempts. Please try again later."):Te.error("Failed to sign in. Please try again.")}finally{x(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-white flex items-center justify-center px-4",children:[l.jsx("div",{className:"absolute top-20 right-10 w-72 h-72 bg-blue-400/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-10 left-10 w-96 h-96 bg-purple-400/10 rounded-full blur-3xl"}),l.jsx("div",{className:"w-full max-w-md relative",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 border border-gray-100",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-3 rounded-xl",children:l.jsx(Xo,{className:"w-8 h-8 text-white"})}),l.jsx("span",{className:"text-2xl bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Labventory"})]}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:"Welcome Back"}),l.jsx("p",{className:"text-gray-600",children:"Sign in to your lab management dashboard"})]}),l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Your Role"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("button",{type:"button",onClick:()=>g("admin"),disabled:_,className:`px-6 py-3 rounded-lg border-2 transition-all font-medium ${m==="admin"?"border-blue-700 bg-white text-blue-700 shadow-md shadow-blue-50":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:" Admin"}),l.jsx("button",{type:"button",onClick:()=>g("teacher"),disabled:_,className:`px-6 py-3 rounded-lg border-2 transition-all font-medium ${m==="teacher"?"border-blue-700 bg-white text-blue-700 shadow-md shadow-blue-50":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:" Teacher"}),l.jsx("button",{type:"button",onClick:()=>g("lab-assistant"),disabled:_,className:`px-6 py-3 rounded-lg border-2 transition-all font-medium ${m==="lab-assistant"?"border-blue-700 bg-white text-blue-700 shadow-md shadow-blue-50":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:" Lab Assistant"}),l.jsx("button",{type:"button",onClick:()=>g("student"),disabled:_,className:`px-6 py-3 rounded-lg border-2 transition-all font-medium ${m==="student"?"border-blue-700 bg-white text-blue-700 shadow-md shadow-blue-50":"border-gray-200 bg-white text-gray-700 hover:border-blue-300 hover:bg-blue-50"}`,children:" Student"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm text-gray-700 mb-2",children:"Email Address"}),l.jsxs("div",{className:"relative",children:[l.jsx(kv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{id:"email",type:"email",value:t,onChange:k=>s(k.target.value),disabled:_,className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-600 transition-colors disabled:opacity-50",placeholder:"you@institution.edu",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm text-gray-700 mb-2",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx(Yf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{id:"password",type:h?"text":"password",value:o,onChange:k=>c(k.target.value),disabled:_,className:"w-full pl-11 pr-11 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-600 transition-colors disabled:opacity-50",placeholder:"",required:!0}),l.jsx("button",{type:"button",onClick:()=>p(!h),disabled:_,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?l.jsx(tE,{className:"w-5 h-5"}):l.jsx(Sv,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300",disabled:_}),l.jsx("span",{className:"text-sm text-gray-600",children:"Remember me"})]}),l.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-700",children:"Forgot password?"})]}),l.jsx("button",{type:"submit",disabled:_,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Signing In...":"Sign In"})]}),l.jsxs("div",{className:"relative my-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-200"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{disabled:_,className:"flex items-center justify-center gap-2 px-4 py-2 border-2 border-gray-200 rounded-lg hover:border-gray-300 transition-colors disabled:opacity-50",children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),l.jsxs("button",{disabled:_,className:"flex items-center justify-center gap-2 px-4 py-2 border-2 border-gray-200 rounded-lg hover:border-gray-300 transition-colors disabled:opacity-50",children:[l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"#1877F2",children:l.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})]}),l.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Don't have an account?"," ",l.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700",children:"Request Access"})]}),e&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[l.jsx(Mw,{className:"w-5 h-5"}),"Back to Home"]})})]})]})})]})}const o1=async r=>{try{return{success:!0,id:(await em(pi(un,"equipment"),{...r,createdAt:et.now()})).id}}catch(e){return console.error("Error adding equipment:",e),{success:!1,error:e}}},Wf=async(r,e)=>{try{return await Zp(mi(un,"equipment",r),e),{success:!0}}catch(t){return console.error("Error updating equipment:",t),{success:!1,error:t}}},nA=async r=>{try{return await e1(mi(un,"equipment",r)),{success:!0}}catch(e){return console.error("Error deleting equipment:",e),{success:!1,error:e}}},Ol=r=>{try{const e=ad(pi(un,"equipment"),ld("createdAt","desc"));return cd(e,t=>{const s=[];t.forEach(o=>{s.push({id:o.id,...o.data()})}),r(s)},t=>{console.error("Error in subscribeToEquipment:",t),r([])})}catch(e){return console.error("Error setting up equipment subscription:",e),()=>{}}},a1=async r=>{try{return{success:!0,id:(await em(pi(un,"chemicals"),{...r,createdAt:et.now()})).id}}catch(e){return console.error("Error adding chemical:",e),{success:!1,error:e}}},Gf=async(r,e)=>{try{return await Zp(mi(un,"chemicals",r),e),{success:!0}}catch(t){return console.error("Error updating chemical:",t),{success:!1,error:t}}},rA=async r=>{try{return await e1(mi(un,"chemicals",r)),{success:!0}}catch(e){return console.error("Error deleting chemical:",e),{success:!1,error:e}}},Vl=r=>{try{const e=ad(pi(un,"chemicals"),ld("createdAt","desc"));return cd(e,t=>{const s=[];t.forEach(o=>{s.push({id:o.id,...o.data()})}),r(s)},t=>{console.error("Error in subscribeToChemicals:",t),r([])})}catch(e){return console.error("Error setting up chemicals subscription:",e),()=>{}}},av=async r=>{try{return{success:!0,id:(await em(pi(un,"checkInOut"),{...r,timestamp:et.now()})).id}}catch(e){return console.error("Error adding check in/out:",e),{success:!1,error:e}}},sA=[{id:"overview",label:"Overview",icon:lE,roles:["admin","teacher","lab-assistant","student"]},{id:"equipment",label:"Equipment",icon:Xs,roles:["admin","teacher","lab-assistant","student"]},{id:"chemicals",label:"Chemicals",icon:qi,roles:["admin","teacher","lab-assistant","student"]},{id:"checkinout",label:"Check In/Out",icon:Qw,roles:["admin","teacher","lab-assistant"]},{id:"maintenance",label:"Maintenance",icon:Rv,roles:["admin","teacher","lab-assistant"]},{id:"customdata",label:"Custom Data",icon:Iv,roles:["admin"]},{id:"reports",label:"Reports",icon:pf,roles:["admin","teacher","student"]},{id:"users",label:"Users",icon:Av,roles:["admin"]},{id:"settings",label:"Settings",icon:NE,roles:["admin","teacher","lab-assistant","student"]}];function iA({currentPage:r,setCurrentPage:e,userRole:t,isOpen:s,setIsOpen:o}){const[c,h]=te.useState([]),[p,m]=te.useState([]),[g,_]=te.useState({available:0,inUse:0,maintenance:0,lowStock:0});te.useEffect(()=>{const b=Ol(j=>{h(j)}),k=Vl(j=>{m(j)});return()=>{b(),k()}},[]),te.useEffect(()=>{const b=c.filter(V=>V.status==="Available").length,k=c.filter(V=>V.status==="In Use").length,j=c.filter(V=>V.status==="Maintenance").length,U=p.filter(V=>V.quantity<1).length;_({available:b,inUse:k,maintenance:j,lowStock:U})},[c,p]);const x=sA.filter(b=>!b.roles||b.roles.includes(t||"lab-assistant"));return l.jsxs(l.Fragment,{children:[s&&l.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-30 transition-opacity",onClick:()=>o(!1)}),l.jsxs("aside",{className:`fixed left-0 top-0 h-screen bg-white border-r border-gray-200 transition-all duration-300 z-40 flex flex-col
        ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        ${s?"w-64":"lg:w-20"}`,children:[l.jsxs("div",{className:"h-16 sm:h-20 flex items-center justify-between px-4 border-b border-gray-200 flex-shrink-0",children:[s&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg",children:l.jsx(Xo,{className:"w-5 h-5 text-white"})}),l.jsx("span",{className:"text-lg bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent font-semibold",children:"Labventory"})]}),!s&&l.jsx("div",{className:"hidden lg:flex items-center justify-center w-full",children:l.jsx("div",{className:"bg-gradient-to-br from-blue-600 to-purple-600 p-2 rounded-lg",children:l.jsx(Xo,{className:"w-5 h-5 text-white"})})}),l.jsx("button",{onClick:()=>o(!1),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(nn,{className:"w-5 h-5 text-gray-600"})})]}),l.jsx("button",{onClick:()=>o(!s),className:"hidden lg:flex absolute -right-3 top-24 w-6 h-6 bg-white border border-gray-200 rounded-full items-center justify-center hover:bg-gray-50 transition-colors shadow-md z-50",children:s?l.jsx(Bw,{className:"w-4 h-4 text-gray-600"}):l.jsx(qw,{className:"w-4 h-4 text-gray-600"})}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-1.5 sm:space-y-2",children:x.map(b=>{const k=b.icon,j=r===b.id;return l.jsxs("button",{onClick:()=>{e(b.id),window.innerWidth<1024&&o(!1)},className:`w-full flex items-center gap-3 px-3 sm:px-4 py-3 sm:py-3.5 rounded-lg transition-all active:scale-95 ${j?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"} ${!s&&"lg:justify-center"}`,title:s?"":b.label,children:[l.jsx(k,{className:"w-5 h-5 flex-shrink-0"}),s&&l.jsxs("span",{className:"text-sm sm:text-base flex items-center gap-2",children:[b.label,b.id==="users"&&l.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded-full",children:"Admin"})]})]},b.id)})}),s&&l.jsxs("div",{className:"flex-shrink-0 m-4 space-y-3",children:[l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-3 border border-blue-100",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-semibold",children:t==="admin"?"":t==="teacher"?"":""}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-500",children:"Signed in as"}),l.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:t?.replace("-"," ")})]})]})}),l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-3 border border-green-100",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Live Stats"})]}),l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Available"}),l.jsx("span",{className:"text-sm font-semibold text-green-600",children:g.available})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"In Use"}),l.jsx("span",{className:"text-sm font-semibold text-blue-600",children:g.inUse})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Maintenance"}),l.jsx("span",{className:"text-sm font-semibold text-orange-600",children:g.maintenance})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Low Stock"}),l.jsx("span",{className:"text-sm font-semibold text-red-600",children:g.lowStock})]})]})]}),l.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-3 border border-purple-100",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-gray-600",children:"Total Items"}),l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:c.length+p.length})]}),l.jsxs("div",{className:"text-right text-xs text-gray-500",children:[l.jsxs("div",{children:[" ",c.length]}),l.jsxs("div",{children:[" ",p.length]})]})]})})]})]})]})}function oA(){const[r,e]=te.useState([]),[t,s]=te.useState(!1),[o,c]=te.useState(0);te.useEffect(()=>{const _=Ol(b=>{const k=[],j=b.filter(V=>V.status==="Maintenance");j.length>0&&k.push({id:`maintenance-${Date.now()}`,type:"warning",title:"Maintenance Alert",message:`${j.length} equipment items need maintenance`,timestamp:new Date});const U=b.filter(V=>V.quantity&&V.quantity<2);U.length>0&&k.push({id:`lowqty-${Date.now()}`,type:"warning",title:"Low Stock Alert",message:`${U.length} equipment items are running low`,timestamp:new Date}),k.length>0&&(e(V=>[...k,...V].slice(0,10)),c(V=>V+k.length))}),x=Vl(b=>{const k=[],j=b.filter(q=>q.quantity<1);j.length>0&&k.push({id:`chem-lowstock-${Date.now()}`,type:"warning",title:"Chemical Low Stock",message:`${j.length} chemicals are running low`,timestamp:new Date});const U=b.filter(q=>q.hazardLevel==="High");U.length>3&&k.push({id:`hazard-${Date.now()}`,type:"warning",title:"High Hazard Alert",message:`${U.length} high hazard chemicals in inventory`,timestamp:new Date});const V=b.filter(q=>{if(!q.expiryDate)return!1;const J=q.expiryDate instanceof Date?q.expiryDate:new Date(q.expiryDate),ae=Math.ceil((J.getTime()-new Date().getTime())/(1e3*60*60*24));return ae<=30&&ae>0});V.length>0&&k.push({id:`expiry-${Date.now()}`,type:"warning",title:"Expiry Alert",message:`${V.length} chemicals expiring within 30 days`,timestamp:new Date}),k.length>0&&(e(q=>[...k,...q].slice(0,10)),c(q=>q+k.length))});return()=>{_(),x()}},[]);const h=()=>{c(0)},p=()=>{e([]),c(0)},m=_=>{switch(_){case"warning":return l.jsx(il,{className:"w-5 h-5 text-orange-600"});case"success":return l.jsx(hl,{className:"w-5 h-5 text-green-600"});default:return l.jsx(oE,{className:"w-5 h-5 text-blue-600"})}},g=_=>{switch(_){case"warning":return"bg-orange-50 border-orange-200";case"success":return"bg-green-50 border-green-200";default:return"bg-blue-50 border-blue-200"}};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{s(!t),t||h()},className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[l.jsx(ff,{className:"w-6 h-6 text-gray-600"}),o>0&&l.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs flex items-center justify-center rounded-full animate-pulse",children:o>9?"9+":o})]}),t&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>s(!1)}),l.jsxs("div",{className:"fixed top-20 right-4 w-96 max-h-[600px] bg-white rounded-xl shadow-2xl border border-gray-200 z-50 overflow-hidden",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between bg-gradient-to-r from-blue-50 to-purple-50",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),l.jsxs("p",{className:"text-xs text-gray-600",children:[r.length," total"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:p,className:"text-xs text-blue-600 hover:text-blue-700 px-3 py-1 hover:bg-blue-100 rounded transition-colors",children:"Clear All"}),l.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:l.jsx(nn,{className:"w-5 h-5 text-gray-600"})})]})]}),l.jsx("div",{className:"overflow-y-auto max-h-[500px]",children:r.length===0?l.jsxs("div",{className:"p-12 text-center",children:[l.jsx(ff,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No notifications"}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]}):l.jsx("div",{className:"divide-y divide-gray-200",children:r.map(_=>l.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors border-l-4 ${g(_.type)}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-0.5",children:m(_.type)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.title}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.message}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:_.timestamp.toLocaleTimeString()})]})]})},_.id))})})]})]})]})}function aA({onSignOut:r,userRole:e,toggleSidebar:t}){const[s,o]=te.useState(!1),[c,h]=te.useState(!1),p=()=>{switch(e){case"admin":return"Admin";case"teacher":return"Teacher";case"lab-assistant":return"Lab Assistant";case"student":return"Student";default:return"User"}};return l.jsxs("header",{className:"h-16 sm:h-20 bg-white border-b border-gray-200 flex items-center justify-between px-4 sm:px-6 relative z-20",children:[l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1",children:[l.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 active:bg-gray-200 rounded-lg transition-colors","aria-label":"Toggle sidebar",children:l.jsx(pE,{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600"})}),l.jsxs("div",{className:"hidden md:block relative max-w-md w-full",children:[l.jsx(sl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search equipment, chemicals, or logs...",className:"w-full pl-11 pr-4 py-2 sm:py-2.5 text-sm sm:text-base bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent"})]}),l.jsx("button",{onClick:()=>h(!c),className:"md:hidden p-2 hover:bg-gray-100 active:bg-gray-200 rounded-lg transition-colors","aria-label":"Search",children:c?l.jsx(nn,{className:"w-5 h-5 text-gray-600"}):l.jsx(sl,{className:"w-5 h-5 text-gray-600"})})]}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[l.jsx(oA,{}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 pl-2 sm:pl-4 border-l border-gray-200",children:[l.jsxs("div",{className:"text-right hidden lg:block",children:[l.jsx("div",{className:"text-sm text-gray-900",children:"John Doe"}),l.jsx("div",{className:"text-xs text-gray-500",children:p()})]}),l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:()=>o(!s),className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white hover:shadow-lg active:scale-95 transition-all",children:l.jsx(yf,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),s&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"md:hidden fixed inset-0 z-30",onClick:()=>o(!1)}),l.jsxs("div",{className:"absolute right-0 top-12 sm:top-14 w-56 sm:w-64 bg-white rounded-xl shadow-2xl border border-gray-200 z-40 overflow-hidden animate-in slide-in-from-top-2 duration-200",children:[l.jsxs("div",{className:"lg:hidden p-4 border-b border-gray-100 bg-gradient-to-br from-blue-50 to-purple-50",children:[l.jsx("div",{className:"text-base text-gray-900",children:"John Doe"}),l.jsx("div",{className:"text-sm text-gray-600",children:p()})]}),l.jsxs("div",{className:"p-2",children:[l.jsxs("button",{onClick:()=>o(!1),className:"w-full flex items-center gap-3 px-4 py-3 text-sm sm:text-base text-gray-700 hover:bg-gray-100 active:bg-gray-200 rounded-lg transition-colors text-left",children:[l.jsx(yf,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),l.jsx("span",{children:"Profile Settings"})]}),l.jsxs("button",{onClick:()=>{o(!1),r()},className:"w-full flex items-center gap-3 px-4 py-3 text-sm sm:text-base text-red-600 hover:bg-red-50 active:bg-red-100 rounded-lg transition-colors text-left",children:[l.jsx(ru,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),l.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})]}),c&&l.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-white border-b border-gray-200 p-4 shadow-lg z-30 animate-in slide-in-from-top duration-200",children:l.jsxs("div",{className:"relative",children:[l.jsx(sl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search...",className:"w-full pl-11 pr-4 py-3 text-base bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent",autoFocus:!0})]})})]})}function lv({userRole:r}){const[e,t]=te.useState([]),[s,o]=te.useState([]),[c,h]=te.useState([]),[p,m]=te.useState(!0);te.useEffect(()=>{try{const x=Ol(b=>{t(b),m(!1)});return()=>x()}catch(x){console.error("Error subscribing to equipment:",x),m(!1)}},[]),te.useEffect(()=>{try{const x=Vl(b=>{o(b)});return()=>x()}catch(x){console.error("Error subscribing to chemicals:",x)}},[]),te.useEffect(()=>{try{const x=cd(ad(pi(un,"checkInOut"),ld("timestamp","desc"),X_(10)),b=>{const k=[];b.forEach(j=>{k.push({id:j.id,...j.data()})}),h(k)},b=>{console.error("Error listening to activity:",b)});return()=>x()}catch(x){console.error("Error subscribing to activity:",x)}},[]);const g={totalEquipment:e.length,availableEquipment:e.filter(x=>x.status==="Available").length,inUseEquipment:e.filter(x=>x.status==="In Use").length,maintenanceEquipment:e.filter(x=>x.status==="Maintenance").length,totalChemicals:s.length,highHazard:s.filter(x=>x.hazardLevel==="High").length,lowStock:s.filter(x=>x.quantity<1).length,recentCheckouts:c.filter(x=>x.action==="check-out").length,recentCheckins:c.filter(x=>x.action==="check-in").length},_=x=>{if(!x)return"N/A";try{let b;return typeof x=="object"&&"toDate"in x?b=x.toDate():x instanceof Date?b=x:b=new Date(x),b.toLocaleString()}catch{return"N/A"}};return p?l.jsx("div",{className:"flex items-center justify-center h-96",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-8 text-white",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["Welcome to Labventory! ",r==="admin"?"":r==="teacher"?"":r==="lab-assistant"?"":""]}),l.jsxs("p",{className:"text-blue-100",children:["You're signed in as ",l.jsx("span",{className:"font-semibold capitalize",children:r?.replace("-"," ")})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm",children:"Live Updates"})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(Xs,{className:"w-6 h-6 text-blue-600"})}),l.jsx(gf,{className:"w-5 h-5 text-green-600"})]}),l.jsx("h3",{className:"text-gray-600 text-sm mb-1",children:"Total Equipment"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g.totalEquipment}),l.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[l.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:[g.availableEquipment," Available"]}),l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[g.inUseEquipment," In Use"]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:l.jsx(qi,{className:"w-6 h-6 text-purple-600"})}),l.jsx(gf,{className:"w-5 h-5 text-green-600"})]}),l.jsx("h3",{className:"text-gray-600 text-sm mb-1",children:"Total Chemicals"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g.totalChemicals}),l.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[l.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded",children:[g.highHazard," High Hazard"]}),l.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded",children:[g.lowStock," Low Stock"]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:l.jsx(il,{className:"w-6 h-6 text-orange-600"})}),l.jsx(Gc,{className:"w-5 h-5 text-orange-600"})]}),l.jsx("h3",{className:"text-gray-600 text-sm mb-1",children:"Maintenance"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:g.maintenanceEquipment}),l.jsx("p",{className:"mt-3 text-xs text-gray-600",children:"Equipment requiring attention"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:l.jsx(Nv,{className:"w-6 h-6 text-green-600"})}),l.jsx(hl,{className:"w-5 h-5 text-green-600"})]}),l.jsx("h3",{className:"text-gray-600 text-sm mb-1",children:"Recent Activity"}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c.length}),l.jsxs("div",{className:"mt-3 flex gap-2 text-xs",children:[l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:[g.recentCheckouts," Out"]}),l.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:[g.recentCheckins," In"]})]})]})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[l.jsx(Xs,{className:"w-5 h-5"}),"Equipment Status"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Available"}),l.jsx("span",{className:"text-lg font-bold text-green-600",children:g.availableEquipment})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"In Use"}),l.jsx("span",{className:"text-lg font-bold text-blue-600",children:g.inUseEquipment})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Maintenance"}),l.jsx("span",{className:"text-lg font-bold text-orange-600",children:g.maintenanceEquipment})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[l.jsx(qi,{className:"w-5 h-5"}),"Chemical Alerts"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"High Hazard"}),l.jsx("span",{className:"text-lg font-bold text-red-600",children:g.highHazard})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Low Stock"}),l.jsx("span",{className:"text-lg font-bold text-orange-600",children:g.lowStock})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[l.jsx("span",{className:"text-sm text-gray-700",children:"Total Stock"}),l.jsx("span",{className:"text-lg font-bold text-blue-600",children:g.totalChemicals})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[l.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[l.jsx(Gc,{className:"w-5 h-5"}),"Recent Activity Feed"]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]})]}),l.jsx("div",{className:"divide-y divide-gray-200",children:c.length===0?l.jsxs("div",{className:"p-12 text-center text-gray-500",children:[l.jsx(Gc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{children:"No recent activity"})]}):c.slice(0,10).map(x=>l.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x.action==="check-out"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:x.action==="check-out"?"":""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.itemName}),l.jsxs("p",{className:"text-xs text-gray-600",children:[x.action==="check-out"?"Checked out":"Checked in"," by ",x.userName]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-gray-500",children:_(x.timestamp)}),l.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs ${x.itemType==="equipment"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:x.itemType})]})]})},x.id))})]}),(r==="admin"||r==="teacher")&&l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("button",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 text-left hover:shadow-xl transition-all",children:[l.jsx(Xs,{className:"w-8 h-8 mb-3"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Equipment"}),l.jsx("p",{className:"text-sm text-blue-100",children:"Add new equipment to inventory"})]}),l.jsxs("button",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 text-left hover:shadow-xl transition-all",children:[l.jsx(qi,{className:"w-8 h-8 mb-3"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Chemical"}),l.jsx("p",{className:"text-sm text-purple-100",children:"Register new chemicals"})]}),l.jsxs("button",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 text-left hover:shadow-xl transition-all",children:[l.jsx(Gc,{className:"w-8 h-8 mb-3"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"View Reports"}),l.jsx("p",{className:"text-sm text-green-100",children:"Generate activity reports"})]})]})]})}var Fo={},ef={exports:{}},tf,cv;function lA(){if(cv)return tf;cv=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tf=r,tf}var nf,uv;function cA(){if(uv)return nf;uv=1;var r=lA();function e(){}function t(){}return t.resetWarningCache=e,nf=function(){function s(h,p,m,g,_,x){if(x!==r){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}s.isRequired=s;function o(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return c.PropTypes=c,c},nf}var dv;function l1(){return dv||(dv=1,ef.exports=cA()()),ef.exports}var rf,hv;function c1(){return hv||(hv=1,rf={L:1,M:0,Q:3,H:2}),rf}var sf,fv;function u1(){return fv||(fv=1,sf={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),sf}var of,pv;function uA(){if(pv)return of;pv=1;var r=u1();function e(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}},of=e,of}var af,mv;function dA(){if(mv)return af;mv=1;var r=c1();function e(t,s){this.totalCount=t,this.dataCount=s}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,s){var o=e.getRsBlockTable(t,s);if(o==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var c=o.length/3,h=new Array,p=0;p<c;p++)for(var m=o[p*3+0],g=o[p*3+1],_=o[p*3+2],x=0;x<m;x++)h.push(new e(g,_));return h},e.getRsBlockTable=function(t,s){switch(s){case r.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},af=e,af}var lf,gv;function hA(){if(gv)return lf;gv=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},lf=r,lf}var cf,yv;function d1(){if(yv)return cf;yv=1;for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)r.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)r.EXP_TABLE[e]=r.EXP_TABLE[e-4]^r.EXP_TABLE[e-5]^r.EXP_TABLE[e-6]^r.EXP_TABLE[e-8];for(var e=0;e<255;e++)r.LOG_TABLE[r.EXP_TABLE[e]]=e;return cf=r,cf}var uf,vv;function h1(){if(vv)return uf;vv=1;var r=d1();function e(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var o=0;o<t.length&&t[o]==0;)o++;this.num=new Array(t.length-o+s);for(var c=0;c<t.length-o;c++)this.num[c]=t[c+o]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),o=0;o<this.getLength();o++)for(var c=0;c<t.getLength();c++)s[o+c]^=r.gexp(r.glog(this.get(o))+r.glog(t.get(c)));return new e(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=r.glog(this.get(0))-r.glog(t.get(0)),o=new Array(this.getLength()),c=0;c<this.getLength();c++)o[c]=this.get(c);for(var c=0;c<t.getLength();c++)o[c]^=r.gexp(r.glog(t.get(c))+s);return new e(o,0).mod(t)}},uf=e,uf}var df,xv;function fA(){if(xv)return df;xv=1;var r=u1(),e=h1(),t=d1(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(c){for(var h=c<<10;o.getBCHDigit(h)-o.getBCHDigit(o.G15)>=0;)h^=o.G15<<o.getBCHDigit(h)-o.getBCHDigit(o.G15);return(c<<10|h)^o.G15_MASK},getBCHTypeNumber:function(c){for(var h=c<<12;o.getBCHDigit(h)-o.getBCHDigit(o.G18)>=0;)h^=o.G18<<o.getBCHDigit(h)-o.getBCHDigit(o.G18);return c<<12|h},getBCHDigit:function(c){for(var h=0;c!=0;)h++,c>>>=1;return h},getPatternPosition:function(c){return o.PATTERN_POSITION_TABLE[c-1]},getMask:function(c,h,p){switch(c){case s.PATTERN000:return(h+p)%2==0;case s.PATTERN001:return h%2==0;case s.PATTERN010:return p%3==0;case s.PATTERN011:return(h+p)%3==0;case s.PATTERN100:return(Math.floor(h/2)+Math.floor(p/3))%2==0;case s.PATTERN101:return h*p%2+h*p%3==0;case s.PATTERN110:return(h*p%2+h*p%3)%2==0;case s.PATTERN111:return(h*p%3+(h+p)%2)%2==0;default:throw new Error("bad maskPattern:"+c)}},getErrorCorrectPolynomial:function(c){for(var h=new e([1],0),p=0;p<c;p++)h=h.multiply(new e([1,t.gexp(p)],0));return h},getLengthInBits:function(c,h){if(1<=h&&h<10)switch(c){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+c)}else if(h<27)switch(c){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+c)}else if(h<41)switch(c){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+c)}else throw new Error("type:"+h)},getLostPoint:function(c){for(var h=c.getModuleCount(),p=0,m=0;m<h;m++)for(var g=0;g<h;g++){for(var _=0,x=c.isDark(m,g),b=-1;b<=1;b++)if(!(m+b<0||h<=m+b))for(var k=-1;k<=1;k++)g+k<0||h<=g+k||b==0&&k==0||x==c.isDark(m+b,g+k)&&_++;_>5&&(p+=3+_-5)}for(var m=0;m<h-1;m++)for(var g=0;g<h-1;g++){var j=0;c.isDark(m,g)&&j++,c.isDark(m+1,g)&&j++,c.isDark(m,g+1)&&j++,c.isDark(m+1,g+1)&&j++,(j==0||j==4)&&(p+=3)}for(var m=0;m<h;m++)for(var g=0;g<h-6;g++)c.isDark(m,g)&&!c.isDark(m,g+1)&&c.isDark(m,g+2)&&c.isDark(m,g+3)&&c.isDark(m,g+4)&&!c.isDark(m,g+5)&&c.isDark(m,g+6)&&(p+=40);for(var g=0;g<h;g++)for(var m=0;m<h-6;m++)c.isDark(m,g)&&!c.isDark(m+1,g)&&c.isDark(m+2,g)&&c.isDark(m+3,g)&&c.isDark(m+4,g)&&!c.isDark(m+5,g)&&c.isDark(m+6,g)&&(p+=40);for(var U=0,g=0;g<h;g++)for(var m=0;m<h;m++)c.isDark(m,g)&&U++;var V=Math.abs(100*U/h/h-50)/5;return p+=V*10,p}};return df=o,df}var hf,_v;function pA(){if(_v)return hf;_v=1;var r=uA(),e=dA(),t=hA(),s=fA(),o=h1();function c(p,m){this.typeNumber=p,this.errorCorrectLevel=m,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var h=c.prototype;return h.addData=function(p){var m=new r(p);this.dataList.push(m),this.dataCache=null},h.isDark=function(p,m){if(p<0||this.moduleCount<=p||m<0||this.moduleCount<=m)throw new Error(p+","+m);return this.modules[p][m]},h.getModuleCount=function(){return this.moduleCount},h.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var m=e.getRSBlocks(p,this.errorCorrectLevel),g=new t,_=0,x=0;x<m.length;x++)_+=m[x].dataCount;for(var x=0;x<this.dataList.length;x++){var b=this.dataList[x];g.put(b.mode,4),g.put(b.getLength(),s.getLengthInBits(b.mode,p)),b.write(g)}if(g.getLengthInBits()<=_*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},h.makeImpl=function(p,m){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var g=0;g<this.moduleCount;g++){this.modules[g]=new Array(this.moduleCount);for(var _=0;_<this.moduleCount;_++)this.modules[g][_]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,m),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=c.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,m)},h.setupPositionProbePattern=function(p,m){for(var g=-1;g<=7;g++)if(!(p+g<=-1||this.moduleCount<=p+g))for(var _=-1;_<=7;_++)m+_<=-1||this.moduleCount<=m+_||(0<=g&&g<=6&&(_==0||_==6)||0<=_&&_<=6&&(g==0||g==6)||2<=g&&g<=4&&2<=_&&_<=4?this.modules[p+g][m+_]=!0:this.modules[p+g][m+_]=!1)},h.getBestMaskPattern=function(){for(var p=0,m=0,g=0;g<8;g++){this.makeImpl(!0,g);var _=s.getLostPoint(this);(g==0||p>_)&&(p=_,m=g)}return m},h.createMovieClip=function(p,m,g){var _=p.createEmptyMovieClip(m,g),x=1;this.make();for(var b=0;b<this.modules.length;b++)for(var k=b*x,j=0;j<this.modules[b].length;j++){var U=j*x,V=this.modules[b][j];V&&(_.beginFill(0,100),_.moveTo(U,k),_.lineTo(U+x,k),_.lineTo(U+x,k+x),_.lineTo(U,k+x),_.endFill())}return _},h.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var m=8;m<this.moduleCount-8;m++)this.modules[6][m]==null&&(this.modules[6][m]=m%2==0)},h.setupPositionAdjustPattern=function(){for(var p=s.getPatternPosition(this.typeNumber),m=0;m<p.length;m++)for(var g=0;g<p.length;g++){var _=p[m],x=p[g];if(this.modules[_][x]==null)for(var b=-2;b<=2;b++)for(var k=-2;k<=2;k++)b==-2||b==2||k==-2||k==2||b==0&&k==0?this.modules[_+b][x+k]=!0:this.modules[_+b][x+k]=!1}},h.setupTypeNumber=function(p){for(var m=s.getBCHTypeNumber(this.typeNumber),g=0;g<18;g++){var _=!p&&(m>>g&1)==1;this.modules[Math.floor(g/3)][g%3+this.moduleCount-8-3]=_}for(var g=0;g<18;g++){var _=!p&&(m>>g&1)==1;this.modules[g%3+this.moduleCount-8-3][Math.floor(g/3)]=_}},h.setupTypeInfo=function(p,m){for(var g=this.errorCorrectLevel<<3|m,_=s.getBCHTypeInfo(g),x=0;x<15;x++){var b=!p&&(_>>x&1)==1;x<6?this.modules[x][8]=b:x<8?this.modules[x+1][8]=b:this.modules[this.moduleCount-15+x][8]=b}for(var x=0;x<15;x++){var b=!p&&(_>>x&1)==1;x<8?this.modules[8][this.moduleCount-x-1]=b:x<9?this.modules[8][15-x-1+1]=b:this.modules[8][15-x-1]=b}this.modules[this.moduleCount-8][8]=!p},h.mapData=function(p,m){for(var g=-1,_=this.moduleCount-1,x=7,b=0,k=this.moduleCount-1;k>0;k-=2)for(k==6&&k--;;){for(var j=0;j<2;j++)if(this.modules[_][k-j]==null){var U=!1;b<p.length&&(U=(p[b]>>>x&1)==1);var V=s.getMask(m,_,k-j);V&&(U=!U),this.modules[_][k-j]=U,x--,x==-1&&(b++,x=7)}if(_+=g,_<0||this.moduleCount<=_){_-=g,g=-g;break}}},c.PAD0=236,c.PAD1=17,c.createData=function(p,m,g){for(var _=e.getRSBlocks(p,m),x=new t,b=0;b<g.length;b++){var k=g[b];x.put(k.mode,4),x.put(k.getLength(),s.getLengthInBits(k.mode,p)),k.write(x)}for(var j=0,b=0;b<_.length;b++)j+=_[b].dataCount;if(x.getLengthInBits()>j*8)throw new Error("code length overflow. ("+x.getLengthInBits()+">"+j*8+")");for(x.getLengthInBits()+4<=j*8&&x.put(0,4);x.getLengthInBits()%8!=0;)x.putBit(!1);for(;!(x.getLengthInBits()>=j*8||(x.put(c.PAD0,8),x.getLengthInBits()>=j*8));)x.put(c.PAD1,8);return c.createBytes(x,_)},c.createBytes=function(p,m){for(var g=0,_=0,x=0,b=new Array(m.length),k=new Array(m.length),j=0;j<m.length;j++){var U=m[j].dataCount,V=m[j].totalCount-U;_=Math.max(_,U),x=Math.max(x,V),b[j]=new Array(U);for(var q=0;q<b[j].length;q++)b[j][q]=255&p.buffer[q+g];g+=U;var J=s.getErrorCorrectPolynomial(V),ae=new o(b[j],J.getLength()-1),Y=ae.mod(J);k[j]=new Array(J.getLength()-1);for(var q=0;q<k[j].length;q++){var W=q+Y.getLength()-k[j].length;k[j][q]=W>=0?Y.get(W):0}}for(var ie=0,q=0;q<m.length;q++)ie+=m[q].totalCount;for(var R=new Array(ie),I=0,q=0;q<_;q++)for(var j=0;j<m.length;j++)q<b[j].length&&(R[I++]=b[j][q]);for(var q=0;q<x;q++)for(var j=0;j<m.length;j++)q<k[j].length&&(R[I++]=k[j][q]);return R},hf=c,hf}var nu={},wv;function mA(){if(wv)return nu;wv=1,Object.defineProperty(nu,"__esModule",{value:!0});var r=Object.assign||function(g){for(var _=1;_<arguments.length;_++){var x=arguments[_];for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(g[b]=x[b])}return g},e=l1(),t=c(e),s=Tl(),o=c(s);function c(g){return g&&g.__esModule?g:{default:g}}function h(g,_){var x={};for(var b in g)_.indexOf(b)>=0||Object.prototype.hasOwnProperty.call(g,b)&&(x[b]=g[b]);return x}var p={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},m=(0,s.forwardRef)(function(g,_){var x=g.bgColor,b=g.bgD,k=g.fgD,j=g.fgColor,U=g.size,V=g.title,q=g.viewBoxSize,J=g.xmlns,ae=J===void 0?"http://www.w3.org/2000/svg":J,Y=h(g,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return o.default.createElement("svg",r({},Y,{height:U,ref:_,viewBox:"0 0 "+q+" "+q,width:U,xmlns:ae}),V?o.default.createElement("title",null,V):null,o.default.createElement("path",{d:b,fill:x}),o.default.createElement("path",{d:k,fill:j}))});return m.displayName="QRCodeSvg",m.propTypes=p,nu.default=m,nu}var Ev;function gA(){if(Ev)return Fo;Ev=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.QRCode=void 0;var r=Object.assign||function(U){for(var V=1;V<arguments.length;V++){var q=arguments[V];for(var J in q)Object.prototype.hasOwnProperty.call(q,J)&&(U[J]=q[J])}return U},e=l1(),t=x(e),s=c1(),o=x(s),c=pA(),h=x(c),p=Tl(),m=x(p),g=mA(),_=x(g);function x(U){return U&&U.__esModule?U:{default:U}}function b(U,V){var q={};for(var J in U)V.indexOf(J)>=0||Object.prototype.hasOwnProperty.call(U,J)&&(q[J]=U[J]);return q}var k={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},j=(0,p.forwardRef)(function(U,V){var q=U.bgColor,J=q===void 0?"#FFFFFF":q,ae=U.fgColor,Y=ae===void 0?"#000000":ae,W=U.level,ie=W===void 0?"L":W,R=U.size,I=R===void 0?256:R,A=U.value,D=b(U,["bgColor","fgColor","level","size","value"]),S=new h.default(-1,o.default[ie]);S.addData(A),S.make();var M=S.modules;return m.default.createElement(_.default,r({},D,{bgColor:J,bgD:M.map(function(T,ee){return T.map(function(Se,Ne){return Se?"":"M "+Ne+" "+ee+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:Y,fgD:M.map(function(T,ee){return T.map(function(Se,Ne){return Se?"M "+Ne+" "+ee+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:V,size:I,viewBoxSize:M.length}))});return Fo.QRCode=j,j.displayName="QRCode",j.propTypes=k,Fo.default=j,Fo}var yA=gA();const vA=Qf(yA),f1=te.createContext(void 0);function xA({children:r}){const[e,t]=te.useState(null),[s,o]=te.useState(!0),c=async()=>{const h=Mr.currentUser;if(h){const p=await Hf(h.uid);t(p)}};return te.useEffect(()=>{const h=ET(Mr,async p=>{if(p){const m=await Hf(p.uid);t(m)}else t(null);o(!1)});return()=>h()},[]),l.jsx(f1.Provider,{value:{userProfile:e,loading:s,refreshUserProfile:c},children:r})}function nm(){const r=te.useContext(f1);if(r===void 0)throw new Error("useUser must be used within a UserProvider");return r}function Ou({userProfile:r,permission:e,children:t,fallback:s}){return bl(r,e)?l.jsx(l.Fragment,{children:t}):s||l.jsxs("div",{className:"flex flex-col items-center justify-center p-12 bg-gray-50 rounded-xl border border-gray-200",children:[l.jsx(Yf,{className:"w-16 h-16 text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Restricted"}),l.jsxs("p",{className:"text-gray-600 text-center",children:["You don't have permission to access this feature.",l.jsx("br",{}),"Contact your administrator for access."]})]})}function _A(){const[r,e]=te.useState([]),[t,s]=te.useState(""),[o,c]=te.useState("all"),[h,p]=te.useState(1),[m,g]=te.useState(!1),[_,x]=te.useState(!1),[b,k]=te.useState(!1),[j,U]=te.useState(!1),[V,q]=te.useState(!1),[J,ae]=te.useState(null),[Y,W]=te.useState({name:"",category:"",status:"Available",condition:"Good",location:"",quantity:1}),{userProfile:ie}=nm(),R=5;te.useEffect(()=>{const G=Ol(O=>{e(O)});return()=>G()},[]);const I=G=>{switch(G){case"Available":return"bg-green-100 text-green-700";case"In Use":return"bg-blue-100 text-blue-700";case"Maintenance":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},A=r.filter(G=>{const O=G.name.toLowerCase().includes(t.toLowerCase())||G.id&&G.id.toLowerCase().includes(t.toLowerCase()),X=o==="all"||G.status===o;return O&&X}),D=Math.ceil(A.length/R),S=A.slice((h-1)*R,h*R),M=async()=>{if(!Y.name||!Y.category||!Y.location){Te.error("Please fill in all required fields");return}(await o1(Y)).success?(Te.success("Equipment added successfully!"),g(!1),pe()):Te.error("Failed to add equipment")},T=async()=>{J&&J.id&&((await Wf(J.id,Y)).success?(Te.success("Equipment updated successfully!"),x(!1),pe()):Te.error("Failed to update equipment"))},ee=async()=>{J&&J.id&&((await nA(J.id)).success?(Te.success("Equipment deleted successfully!"),q(!1),ae(null)):Te.error("Failed to delete equipment"))},Se=G=>{ae(G),W(G),x(!0)},Ne=G=>{ae(G),k(!0)},De=G=>{ae(G),U(!0)},oe=G=>{ae(G),q(!0)},pe=()=>{W({name:"",category:"",status:"Available",condition:"Good",location:"",quantity:1}),ae(null)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:"Equipment Manager"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track all laboratory equipment"})]}),l.jsx(Ou,{userProfile:ie,permission:"equipment:create",children:l.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[l.jsx(mf,{className:"w-5 h-5"}),"Add Equipment"]})})]}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(sl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search by name or ID...",value:t,onChange:G=>s(G.target.value),className:"w-full pl-11 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg transition-colors ${o==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),l.jsx("button",{onClick:()=>c("Available"),className:`px-4 py-2 rounded-lg transition-colors ${o==="Available"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Available"}),l.jsx("button",{onClick:()=>c("In Use"),className:`px-4 py-2 rounded-lg transition-colors ${o==="In Use"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Use"}),l.jsx("button",{onClick:()=>c("Maintenance"),className:`px-4 py-2 rounded-lg transition-colors ${o==="Maintenance"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Maintenance"})]})]})}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Equipment Name"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Category"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Quantity"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Location"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:S.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:'No equipment found. Click "Add Equipment" to get started!'})}):S.map(G=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-900",children:G.name})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:G.category}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:G.quantity}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${I(G.status)}`,children:G.status})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:G.location}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>Ne(G),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"View Details",children:l.jsx(Sv,{className:"w-4 h-4 text-gray-600"})}),l.jsx("button",{onClick:()=>De(G),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Generate QR",children:l.jsx(EE,{className:"w-4 h-4 text-blue-600"})}),bl(ie,"equipment:update")&&l.jsx("button",{onClick:()=>Se(G),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:l.jsx(Jf,{className:"w-4 h-4 text-green-600"})}),bl(ie,"equipment:delete")&&l.jsx("button",{onClick:()=>oe(G),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Delete",children:l.jsx(Cv,{className:"w-4 h-4 text-red-600"})})]})})]},G.id))})]})})}),A.length>0&&l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",S.length," of ",A.length," items"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>p(Math.max(1,h-1)),disabled:h===1,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),Array.from({length:D},(G,O)=>O+1).map(G=>l.jsx("button",{onClick:()=>p(G),className:`px-4 py-2 rounded-lg transition-colors ${h===G?"bg-blue-600 text-white":"bg-white border border-gray-200 hover:bg-gray-50"}`,children:G},G)),l.jsx("button",{onClick:()=>p(Math.min(D,h+1)),disabled:h===D,className:"px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(m||_)&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:m?"Add New Equipment":"Edit Equipment"}),l.jsx("button",{onClick:()=>{g(!1),x(!1),pe()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),l.jsx("input",{type:"text",value:Y.name,onChange:G=>W({...Y,name:G.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Category *"}),l.jsxs("select",{value:Y.category,onChange:G=>W({...Y,category:G.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"",children:"Select Category"}),l.jsx("option",{value:"Biology",children:"Biology"}),l.jsx("option",{value:"Chemistry",children:"Chemistry"}),l.jsx("option",{value:"Physics",children:"Physics"}),l.jsx("option",{value:"General",children:"General"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantity *"}),l.jsx("input",{type:"number",value:Y.quantity,onChange:G=>W({...Y,quantity:parseInt(G.target.value)||0}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Location *"}),l.jsx("input",{type:"text",value:Y.location,onChange:G=>W({...Y,location:G.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Status"}),l.jsxs("select",{value:Y.status,onChange:G=>W({...Y,status:G.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Available",children:"Available"}),l.jsx("option",{value:"In Use",children:"In Use"}),l.jsx("option",{value:"Maintenance",children:"Maintenance"}),l.jsx("option",{value:"Retired",children:"Retired"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Condition"}),l.jsx("input",{type:"text",value:Y.condition,onChange:G=>W({...Y,condition:G.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Good, Excellent, Fair, etc."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{g(!1),x(!1),pe()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:m?M:T,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:m?"Add Equipment":"Save Changes"})]})]})}),b&&J&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:"Equipment Details"}),l.jsx("button",{onClick:()=>k(!1),children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),l.jsx("p",{className:"text-gray-900",children:J.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Category"}),l.jsx("p",{className:"text-gray-900",children:J.category})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),l.jsx("p",{className:"text-gray-900",children:J.quantity})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),l.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${I(J.status)}`,children:J.status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),l.jsx("p",{className:"text-gray-900",children:J.location})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Condition"}),l.jsx("p",{className:"text-gray-900",children:J.condition||"N/A"})]})]})}),l.jsx("button",{onClick:()=>k(!1),className:"w-full mt-6 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})}),j&&J&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:"QR Code"}),l.jsx("button",{onClick:()=>U(!1),children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-white p-6 rounded-xl border-2 border-gray-200 mb-4",children:l.jsx(vA,{value:JSON.stringify({id:J.id,name:J.name}),size:200})}),l.jsx("p",{className:"text-center text-gray-900 mb-1",children:J.name}),l.jsxs("p",{className:"text-center text-sm text-gray-600 mb-4",children:["ID: ",J.id]}),l.jsx("button",{onClick:()=>Te.success("QR Code downloaded!"),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"Download QR Code"})]})]})}),V&&J&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[l.jsx("h3",{className:"text-2xl text-gray-900 mb-4",children:"Confirm Delete"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",l.jsx("span",{className:"font-semibold text-gray-900",children:J.name}),"? This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>q(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:ee,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function wA(){const[r,e]=te.useState([]),[t,s]=te.useState(!1),[o,c]=te.useState(!1),[h,p]=te.useState(!1),[m,g]=te.useState(!1),[_,x]=te.useState(null),[b,k]=te.useState({name:"",formula:"",quantity:0,unit:"Liters",hazardLevel:"Low",expiryDate:void 0,location:"",supplier:""}),{userProfile:j}=nm();te.useEffect(()=>{const T=Vl(ee=>{e(ee)});return()=>T()},[]);const U=T=>{switch(T){case"High":return"bg-red-100 text-red-700 border-red-200";case"Medium":return"bg-orange-100 text-orange-700 border-orange-200";case"Low":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},V=T=>{if(!T)return!1;const ee=new Date;let Se;typeof T=="object"&&"toDate"in T?Se=T.toDate():T instanceof Date?Se=T:Se=new Date(T);const Ne=Math.ceil((Se.getTime()-ee.getTime())/(1e3*60*60*24));return Ne<=60&&Ne>0},q=T=>{if(!T)return!1;const ee=new Date;let Se;return typeof T=="object"&&"toDate"in T?Se=T.toDate():T instanceof Date?Se=T:Se=new Date(T),Se<ee},J=T=>{if(!T)return"N/A";try{let ee;return typeof T=="object"&&"toDate"in T?ee=T.toDate():T instanceof Date?ee=T:ee=new Date(T),ee.toLocaleDateString()}catch{return"N/A"}},ae=r.filter(T=>V(T.expiryDate)&&!q(T.expiryDate)).length,Y=r.filter(T=>T.hazardLevel==="High").length,W=r.filter(T=>T.quantity<1).length,ie=async()=>{if(!b.name||!b.formula||!b.quantity||!b.location){Te.error("Please fill in all required fields");return}(await a1({...b,expiryDate:b.expiryDate?new Date(b.expiryDate):void 0})).success?(Te.success("Chemical added successfully!"),s(!1),M()):Te.error("Failed to add chemical")},R=async()=>{_&&_.id&&((await Gf(_.id,{...b,expiryDate:b.expiryDate?new Date(b.expiryDate):void 0})).success?(Te.success("Chemical updated successfully!"),c(!1),M()):Te.error("Failed to update chemical"))},I=async()=>{_&&_.id&&((await rA(_.id)).success?(Te.success("Chemical deleted successfully!"),p(!1),x(null)):Te.error("Failed to delete chemical"))},A=T=>{x(T);let ee="";if(T.expiryDate)try{typeof T.expiryDate=="object"&&"toDate"in T.expiryDate?ee=T.expiryDate.toDate().toISOString().split("T")[0]:T.expiryDate instanceof Date?ee=T.expiryDate.toISOString().split("T")[0]:typeof T.expiryDate=="string"&&(ee=new Date(T.expiryDate).toISOString().split("T")[0])}catch(Se){console.error("Error parsing expiry date:",Se)}k({...T,expiryDate:ee}),c(!0)},D=T=>{x(T),p(!0)},S=T=>{x(T),g(!0)},M=()=>{k({name:"",formula:"",quantity:0,unit:"Liters",hazardLevel:"Low",expiryDate:void 0,location:"",supplier:""}),x(null)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:"Chemical Inventory"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Track chemicals, quantities, and safety information"})]}),l.jsx(Ou,{userProfile:j,permission:"chemical:create",children:l.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[l.jsx(mf,{className:"w-5 h-5"}),"Add Chemical"]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(qi,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Total Chemicals"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:r.length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(il,{className:"w-5 h-5 text-red-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"High Hazard"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:Y})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Kf,{className:"w-5 h-5 text-orange-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Expiring Soon"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:ae})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(il,{className:"w-5 h-5 text-orange-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Low Stock"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:W})]})]}),ae>0&&l.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-6",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(il,{className:"w-5 h-5 text-orange-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-orange-900 mb-1",children:"Expiry Alerts"}),l.jsxs("p",{className:"text-sm text-orange-700",children:["You have ",ae," chemicals expiring within the next 60 days. Please review and take necessary action."]})]})]})}),l.jsx("div",{className:"grid gap-4",children:r.length===0?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[l.jsx(qi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-xl text-gray-900 mb-2",children:"No Chemicals Yet"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first chemical to the inventory"}),l.jsx(Ou,{userProfile:j,permission:"chemical:create",children:l.jsxs("button",{onClick:()=>s(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[l.jsx(mf,{className:"w-5 h-5"}),"Add Chemical"]})})]}):r.map(T=>l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:l.jsx(qi,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[l.jsx("h3",{className:"text-lg text-gray-900",children:T.name}),l.jsxs("span",{className:"text-sm text-gray-500",children:["(",T.formula,")"]}),V(T.expiryDate)&&!q(T.expiryDate)&&l.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded",children:"Expiring Soon"}),q(T.expiryDate)&&l.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded",children:"Expired"})]}),l.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mt-2",children:[l.jsxs("span",{children:["Quantity: ",T.quantity," ",T.unit]}),l.jsxs("span",{children:["Location: ",T.location]}),l.jsxs("span",{children:["Expiry: ",J(T.expiryDate)]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:`px-4 py-2 rounded-lg border ${U(T.hazardLevel)}`,children:[l.jsx("div",{className:"text-xs",children:"Hazard Level"}),l.jsx("div",{className:"text-sm",children:T.hazardLevel})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>S(T),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-sm",children:"View"}),bl(j,"chemical:update")&&l.jsx("button",{onClick:()=>A(T),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:l.jsx(Jf,{className:"w-4 h-4 text-green-600"})}),bl(j,"chemical:delete")&&l.jsx("button",{onClick:()=>D(T),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Delete",children:l.jsx(Cv,{className:"w-4 h-4 text-red-600"})})]})]})]})},T.id))}),(t||o)&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:t?"Add New Chemical":"Edit Chemical"}),l.jsx("button",{onClick:()=>{s(!1),c(!1),M()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Name *"}),l.jsx("input",{type:"text",value:b.name,onChange:T=>k({...b,name:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Chemical Formula *"}),l.jsx("input",{type:"text",value:b.formula,onChange:T=>k({...b,formula:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Quantity *"}),l.jsx("input",{type:"number",step:"0.1",value:b.quantity,onChange:T=>k({...b,quantity:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Unit"}),l.jsxs("select",{value:b.unit,onChange:T=>k({...b,unit:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Liters",children:"Liters"}),l.jsx("option",{value:"Milliliters",children:"Milliliters"}),l.jsx("option",{value:"Kilograms",children:"Kilograms"}),l.jsx("option",{value:"Grams",children:"Grams"}),l.jsx("option",{value:"Pounds",children:"Pounds"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Hazard Level"}),l.jsxs("select",{value:b.hazardLevel,onChange:T=>k({...b,hazardLevel:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Low",children:"Low"}),l.jsx("option",{value:"Medium",children:"Medium"}),l.jsx("option",{value:"High",children:"High"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Expiry Date"}),l.jsx("input",{type:"date",value:b.expiryDate||"",onChange:T=>k({...b,expiryDate:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Location *"}),l.jsx("input",{type:"text",value:b.location,onChange:T=>k({...b,location:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Supplier"}),l.jsx("input",{type:"text",value:b.supplier,onChange:T=>k({...b,supplier:T.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{s(!1),c(!1),M()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:t?ie:R,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:t?"Add Chemical":"Save Changes"})]})]})}),m&&_&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:"Chemical Details"}),l.jsx("button",{onClick:()=>g(!1),children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),l.jsx("p",{className:"text-gray-900",children:_.name})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Formula"}),l.jsx("p",{className:"text-gray-900",children:_.formula})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Quantity"}),l.jsxs("p",{className:"text-gray-900",children:[_.quantity," ",_.unit]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Hazard Level"}),l.jsx("span",{className:`inline-flex px-3 py-1 rounded-lg border text-sm ${U(_.hazardLevel)}`,children:_.hazardLevel})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Expiry Date"}),l.jsx("p",{className:"text-gray-900",children:J(_.expiryDate)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Location"}),l.jsx("p",{className:"text-gray-900",children:_.location})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Supplier"}),l.jsx("p",{className:"text-gray-900",children:_.supplier||"N/A"})]})]})}),l.jsx("button",{onClick:()=>g(!1),className:"w-full mt-6 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Close"})]})}),h&&_&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[l.jsx("h3",{className:"text-2xl text-gray-900 mb-4",children:"Confirm Delete"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",l.jsx("span",{className:"font-semibold text-gray-900",children:_.name}),"? This action cannot be undone."]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:I,className:"flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}function EA(){const[r,e]=te.useState([]),[t,s]=te.useState([]),[o,c]=te.useState([]),[h,p]=te.useState(!1),[m,g]=te.useState(!1),[_,x]=te.useState(!1),[b,k]=te.useState(!1),[j,U]=te.useState(null),[V,q]=te.useState("checkout"),[J,ae]=te.useState(""),[Y,W]=te.useState("all"),[ie,R]=te.useState("all"),I=te.useRef(null),A=te.useRef(null),[D,S]=te.useState(!1),[M,T]=te.useState(""),[ee,Se]=te.useState({itemType:"equipment",itemId:"",itemName:"",quantity:1,purpose:"",userName:Mr.currentUser?.displayName||Mr.currentUser?.email||"Unknown User",userEmail:Mr.currentUser?.email||""});te.useEffect(()=>{const Q=cd(ad(pi(un,"checkInOut"),ld("timestamp","desc"),X_(50)),it=>{const sn=[];it.forEach(bn=>{sn.push({id:bn.id,...bn.data()})}),e(sn)},it=>{console.error("Error subscribing to check-in/out history:",it)}),ve=Ol(it=>{s(it)}),Be=Vl(it=>{c(it)});return()=>{Q(),ve(),Be()}},[]);const Ne=async()=>{try{S(!0);const Q=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});I.current&&(I.current.srcObject=Q,I.current.play(),oe())}catch(Q){console.error("Error accessing camera:",Q),Te.error("Unable to access camera. Please check permissions."),S(!1)}},De=()=>{I.current?.srcObject&&I.current.srcObject.getTracks().forEach(ve=>ve.stop()),S(!1)},oe=()=>{if(!I.current||!A.current||!D)return;const Q=I.current,ve=A.current,Be=ve.getContext("2d");Be&&Q.readyState===Q.HAVE_ENOUGH_DATA&&(ve.height=Q.videoHeight,ve.width=Q.videoWidth,Be.drawImage(Q,0,0,ve.width,ve.height),Be.getImageData(0,0,ve.width,ve.height)),D&&requestAnimationFrame(oe)},pe=Q=>{try{const ve=JSON.parse(Q),{id:Be,name:it,type:sn}=ve;Se({...ee,itemType:sn||"equipment",itemId:Be,itemName:it}),De(),x(!1),V==="checkout"?p(!0):g(!0),Te.success(`Scanned: ${it}`)}catch{Te.error("Invalid QR code")}},G=()=>{M&&(pe(M),T(""))},O=async()=>{if(!ee.itemId||!ee.itemName||ee.quantity<=0){Te.error("Please fill in all required fields");return}if((await av({itemId:ee.itemId,itemName:ee.itemName,itemType:ee.itemType,userName:ee.userName,userEmail:ee.userEmail,action:"check-out",quantity:ee.quantity,purpose:ee.purpose,timestamp:new Date})).success){if(ee.itemType==="equipment"){const ve=t.find(Be=>Be.id===ee.itemId);ve&&await Wf(ee.itemId,{status:"In Use",quantity:Math.max(0,(ve.quantity||0)-ee.quantity)})}else{const ve=o.find(Be=>Be.id===ee.itemId);ve&&await Gf(ee.itemId,{quantity:Math.max(0,ve.quantity-ee.quantity)})}Te.success(" Item checked out successfully!"),p(!1),ce()}else Te.error("Failed to check out item")},X=async()=>{if(!ee.itemId||!ee.itemName||ee.quantity<=0){Te.error("Please fill in all required fields");return}if((await av({itemId:ee.itemId,itemName:ee.itemName,itemType:ee.itemType,userName:ee.userName,userEmail:ee.userEmail,action:"check-in",quantity:ee.quantity,purpose:ee.purpose,timestamp:new Date})).success){if(ee.itemType==="equipment"){const ve=t.find(Be=>Be.id===ee.itemId);ve&&await Wf(ee.itemId,{status:"Available",quantity:(ve.quantity||0)+ee.quantity})}else{const ve=o.find(Be=>Be.id===ee.itemId);ve&&await Gf(ee.itemId,{quantity:ve.quantity+ee.quantity})}Te.success(" Item checked in successfully!"),g(!1),ce()}else Te.error("Failed to check in item")},ce=()=>{Se({itemType:"equipment",itemId:"",itemName:"",quantity:1,purpose:"",userName:Mr.currentUser?.displayName||Mr.currentUser?.email||"Unknown User",userEmail:Mr.currentUser?.email||""})},ge=Q=>{try{let ve;return typeof Q=="object"&&"toDate"in Q?ve=Q.toDate():Q instanceof Date?ve=Q:ve=new Date(Q),ve.toLocaleString()}catch{return"N/A"}},_e=r.filter(Q=>{const ve=Q.itemName.toLowerCase().includes(J.toLowerCase())||Q.userName.toLowerCase().includes(J.toLowerCase()),Be=Y==="all"||Q.itemType===Y,it=ie==="all"||Q.action===ie;return ve&&Be&&it}),Ae=r.filter(Q=>{const ve=new Date().toDateString();return new Date(Q.timestamp).toDateString()===ve&&Q.action==="check-out"}).length,Fe=r.filter(Q=>{const ve=new Date().toDateString();return new Date(Q.timestamp).toDateString()===ve&&Q.action==="check-in"}).length,Ee=r.filter(Q=>Q.action==="check-out").length-r.filter(Q=>Q.action==="check-in").length;return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:" Real-Time Check-In/Out"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Scan QR codes to track equipment instantly"})]})}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-8 text-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl mb-2",children:" Check Out"}),l.jsx("p",{className:"text-blue-100",children:"Scan QR or select manually"})]}),l.jsx(ru,{className:"w-12 h-12 opacity-80"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>{q("checkout"),x(!0),Ne()},className:"flex flex-col items-center gap-2 p-4 bg-white/20 hover:bg-white/30 rounded-lg transition-all",children:[l.jsx(wy,{className:"w-6 h-6"}),l.jsx("span",{className:"text-sm",children:"Scan QR"})]}),l.jsxs("button",{onClick:()=>p(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/20 hover:bg-white/30 rounded-lg transition-all",children:[l.jsx(Xs,{className:"w-6 h-6"}),l.jsx("span",{className:"text-sm",children:"Manual"})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-8 text-white",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl mb-2",children:" Check In"}),l.jsx("p",{className:"text-green-100",children:"Return items to inventory"})]}),l.jsx(Uh,{className:"w-12 h-12 opacity-80"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>{q("checkin"),x(!0),Ne()},className:"flex flex-col items-center gap-2 p-4 bg-white/20 hover:bg-white/30 rounded-lg transition-all",children:[l.jsx(wy,{className:"w-6 h-6"}),l.jsx("span",{className:"text-sm",children:"Scan QR"})]}),l.jsxs("button",{onClick:()=>g(!0),className:"flex flex-col items-center gap-2 p-4 bg-white/20 hover:bg-white/30 rounded-lg transition-all",children:[l.jsx(Xs,{className:"w-6 h-6"}),l.jsx("span",{className:"text-sm",children:"Manual"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 animate-pulse-slow",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx(Xs,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Live Records"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:r.length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(ru,{className:"w-5 h-5 text-orange-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Today's Check-Outs"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:Ae})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Uh,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Today's Check-Ins"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:Fe})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Nv,{className:"w-5 h-5 text-purple-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Currently Out"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:Ee})]})]}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(sl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:" Search by item or user...",value:J,onChange:Q=>ae(Q.target.value),className:"w-full pl-11 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsxs("select",{value:Y,onChange:Q=>W(Q.target.value),className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"equipment",children:"Equipment"}),l.jsx("option",{value:"chemical",children:"Chemical"})]}),l.jsxs("select",{value:ie,onChange:Q=>R(Q.target.value),className:"px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Actions"}),l.jsx("option",{value:"check-out",children:"Check-Out"}),l.jsx("option",{value:"check-in",children:"Check-In"})]})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200 flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:" Live Activity Feed"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Time"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Action"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Type"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Item"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Qty"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Purpose"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:_e.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[l.jsx(Xs,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:"No activity yet. Start scanning!"})]})}):_e.slice(0,20).map((Q,ve)=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",style:{animation:ve<3?"fadeIn 0.5s ease-in":"none"},children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:ge(Q.timestamp)}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${Q.action==="check-out"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[Q.action==="check-out"?l.jsx(ru,{className:"w-3 h-3"}):l.jsx(Uh,{className:"w-3 h-3"}),Q.action==="check-out"?"Out":"In"]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 capitalize",children:Q.itemType}),l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:Q.itemName}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.quantity}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.userName}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.purpose||""})]},Q.id))})]})})]}),_&&l.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:" Scan QR Code"}),l.jsx("button",{onClick:()=>{De(),x(!1)},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden",children:[l.jsx("video",{ref:I,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0}),l.jsx("canvas",{ref:A,className:"hidden"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsx("div",{className:"w-64 h-64 border-4 border-blue-500 rounded-lg animate-pulse"})}),D&&l.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Scanning..."]})]}),l.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:" For testing: Paste QR data manually"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:M,onChange:Q=>T(Q.target.value),placeholder:'Example: {"id":"eq-001","name":"Microscope","type":"equipment"}',className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg text-sm"}),l.jsx("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Process"})]})]})]}),l.jsx("button",{onClick:()=>{De(),x(!1)},className:"w-full mt-6 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})}),h&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:" Check Out Item"}),l.jsx("button",{onClick:()=>{p(!1),ce()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Type *"}),l.jsxs("select",{value:ee.itemType,onChange:Q=>Se({...ee,itemType:Q.target.value,itemId:"",itemName:""}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"equipment",children:" Equipment"}),l.jsx("option",{value:"chemical",children:" Chemical"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Item *"}),l.jsxs("select",{value:ee.itemId,onChange:Q=>{const ve=ee.itemType==="equipment"?t.find(Be=>Be.id===Q.target.value):o.find(Be=>Be.id===Q.target.value);Se({...ee,itemId:Q.target.value,itemName:ve?.name||""})},className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"",children:"Choose an item..."}),ee.itemType==="equipment"?t.filter(Q=>Q.status==="Available").map(Q=>l.jsxs("option",{value:Q.id,children:[Q.name," (Available: ",Q.quantity,")"]},Q.id)):o.map(Q=>l.jsxs("option",{value:Q.id,children:[Q.name," (",Q.quantity," ",Q.unit,")"]},Q.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),l.jsx("input",{type:"number",min:"1",value:ee.quantity,onChange:Q=>Se({...ee,quantity:parseInt(Q.target.value)||1}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose"}),l.jsx("textarea",{value:ee.purpose,onChange:Q=>Se({...ee,purpose:Q.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-600",rows:3,placeholder:"What will you use this for?"})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{p(!1),ce()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:O,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg",children:"Check Out"})]})]})}),m&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:" Check In Item"}),l.jsx("button",{onClick:()=>{g(!1),ce()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Type *"}),l.jsxs("select",{value:ee.itemType,onChange:Q=>Se({...ee,itemType:Q.target.value,itemId:"",itemName:""}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-600",children:[l.jsx("option",{value:"equipment",children:" Equipment"}),l.jsx("option",{value:"chemical",children:" Chemical"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Item *"}),l.jsxs("select",{value:ee.itemId,onChange:Q=>{const ve=ee.itemType==="equipment"?t.find(Be=>Be.id===Q.target.value):o.find(Be=>Be.id===Q.target.value);Se({...ee,itemId:Q.target.value,itemName:ve?.name||""})},className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-600",children:[l.jsx("option",{value:"",children:"Choose an item..."}),ee.itemType==="equipment"?t.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id)):o.map(Q=>l.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),l.jsx("input",{type:"number",min:"1",value:ee.quantity,onChange:Q=>Se({...ee,quantity:parseInt(Q.target.value)||1}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),l.jsx("textarea",{value:ee.purpose,onChange:Q=>Se({...ee,purpose:Q.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-600",rows:3,placeholder:"Any notes or comments..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{g(!1),ce()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:X,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg hover:shadow-lg",children:"Check In"})]})]})}),l.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(-10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-pulse-slow {
          animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
      `})]})}const p1=te.createContext(void 0),bA=[{id:"M-234",name:"Digital Microscope",category:"Biology",lab:"Lab A",status:"Available",condition:"Good",lastMaintenance:"2024-11-15",location:"Shelf 3A",description:"High-resolution digital microscope with camera",purchaseDate:"2023-01-15",cost:"$2,500"},{id:"C-445",name:"Centrifuge",category:"Chemistry",lab:"Lab B",status:"In Use",condition:"Excellent",lastMaintenance:"2024-10-20",location:"Bench 2",description:"High-speed laboratory centrifuge",purchaseDate:"2022-08-10",cost:"$3,200"},{id:"B-102",name:"Bunsen Burner",category:"Chemistry",lab:"Lab A",status:"Available",condition:"Good",lastMaintenance:"2024-09-05",location:"Cabinet 1",purchaseDate:"2021-03-20",cost:"$150"},{id:"P-567",name:"pH Meter",category:"Chemistry",lab:"Lab C",status:"Maintenance",condition:"Fair",lastMaintenance:"2024-11-28",location:"Repair Room",purchaseDate:"2022-06-12",cost:"$450"},{id:"S-889",name:"Spectrophotometer",category:"Physics",lab:"Lab B",status:"Available",condition:"Excellent",lastMaintenance:"2024-11-10",location:"Counter 4",purchaseDate:"2023-09-05",cost:"$5,800"}],TA=[{id:"CH-001",name:"Hydrochloric Acid",formula:"HCl",quantity:"2.5",unit:"Liters",hazardLevel:"High",expiryDate:"2025-06-15",location:"Cabinet A1",supplier:"ChemSupply Co."},{id:"CH-002",name:"Sodium Hydroxide",formula:"NaOH",quantity:"1.8",unit:"Kilograms",hazardLevel:"High",expiryDate:"2025-03-20",location:"Cabinet A2",supplier:"LabChem Inc."},{id:"CH-003",name:"Ethanol",formula:"C2H5OH",quantity:"5.0",unit:"Liters",hazardLevel:"Medium",expiryDate:"2025-12-01",location:"Cabinet B1",supplier:"ChemSupply Co."},{id:"CH-004",name:"Acetic Acid",formula:"CH3COOH",quantity:"0.5",unit:"Liters",hazardLevel:"Medium",expiryDate:"2025-01-10",location:"Cabinet A3",supplier:"ScienceLab Supplies"},{id:"CH-005",name:"Distilled Water",formula:"H2O",quantity:"20.0",unit:"Liters",hazardLevel:"Low",expiryDate:"2026-01-01",location:"Storage Room",supplier:"LabChem Inc."}],NA=[{id:"LOG-001",equipmentId:"M-234",equipment:"Microscope #M-234",userId:"U-001",user:"Sarah Mitchell",userRole:"Teacher",action:"Checked Out",timestamp:"2024-12-01 09:30 AM",expectedReturn:"2024-12-01 03:00 PM",status:"Active"},{id:"LOG-002",equipmentId:"B-102",equipment:"Bunsen Burner #B-102",userId:"U-002",user:"James Chen",userRole:"Student",action:"Returned",timestamp:"2024-12-01 08:45 AM",expectedReturn:"2024-12-01 12:00 PM",status:"Completed"},{id:"LOG-003",equipmentId:"P-567",equipment:"pH Meter #P-567",userId:"U-003",user:"Maria Rodriguez",userRole:"Lab Assistant",action:"Checked Out",timestamp:"2024-12-01 07:15 AM",expectedReturn:"2024-12-01 02:00 PM",status:"Overdue"},{id:"LOG-004",equipmentId:"C-445",equipment:"Centrifuge #C-445",userId:"U-004",user:"David Kim",userRole:"Teacher",action:"Checked Out",timestamp:"2024-12-01 06:30 AM",expectedReturn:"2024-12-01 04:00 PM",status:"Active"}],IA=[{id:"M-001",equipmentId:"C-445",equipment:"Centrifuge #C-445",type:"Scheduled Maintenance",scheduledDate:"2024-12-05",status:"Pending",priority:"Medium",assignedTo:"Lab Technician"},{id:"M-002",equipmentId:"P-567",equipment:"pH Meter #P-567",type:"Repair",scheduledDate:"2024-11-28",status:"In Progress",priority:"High",assignedTo:"John Smith"},{id:"M-003",equipmentId:"M-234",equipment:"Microscope #M-234",type:"Calibration",scheduledDate:"2024-12-10",status:"Scheduled",priority:"Low",assignedTo:"Sarah Johnson"},{id:"M-004",equipmentId:"S-889",equipment:"Spectrophotometer #S-889",type:"Scheduled Maintenance",scheduledDate:"2024-11-25",status:"Completed",priority:"Medium",assignedTo:"Lab Technician",completedDate:"2024-11-25"}];function SA({children:r}){const[e,t]=te.useState([]),[s,o]=te.useState([]),[c,h]=te.useState([]),[p,m]=te.useState([]);te.useEffect(()=>{const Y=localStorage.getItem("equipment"),W=localStorage.getItem("chemicals"),ie=localStorage.getItem("checkoutLogs"),R=localStorage.getItem("maintenanceTasks");t(Y?JSON.parse(Y):bA),o(W?JSON.parse(W):TA),h(ie?JSON.parse(ie):NA),m(R?JSON.parse(R):IA)},[]),te.useEffect(()=>{e.length>0&&localStorage.setItem("equipment",JSON.stringify(e))},[e]),te.useEffect(()=>{s.length>0&&localStorage.setItem("chemicals",JSON.stringify(s))},[s]),te.useEffect(()=>{c.length>0&&localStorage.setItem("checkoutLogs",JSON.stringify(c))},[c]),te.useEffect(()=>{p.length>0&&localStorage.setItem("maintenanceTasks",JSON.stringify(p))},[p]);const g=Y=>{const W=`E-${Date.now()}`;t([...e,{...Y,id:W}])},_=(Y,W)=>{t(e.map(ie=>ie.id===Y?{...ie,...W}:ie))},x=Y=>{t(e.filter(W=>W.id!==Y))},b=Y=>{const W=`CH-${Date.now()}`;o([...s,{...Y,id:W}])},k=(Y,W)=>{o(s.map(ie=>ie.id===Y?{...ie,...W}:ie))},j=Y=>{o(s.filter(W=>W.id!==Y))},U=Y=>{const W=`LOG-${Date.now()}`,ie=new Date().toLocaleString(),R={...Y,id:W,timestamp:ie,status:"Active"};h([R,...c]),Y.action==="Checked Out"&&_(Y.equipmentId,{status:"In Use"})},V=Y=>{const W=c.find(ie=>ie.id===Y);W&&(h(c.map(ie=>ie.id===Y?{...ie,action:"Returned",status:"Completed"}:ie)),_(W.equipmentId,{status:"Available"}))},q=Y=>{const W=`M-${Date.now()}`;m([...p,{...Y,id:W}])},J=(Y,W)=>{if(m(p.map(ie=>ie.id===Y?{...ie,...W}:ie)),W.status==="Completed"){const ie=p.find(R=>R.id===Y);ie&&_(ie.equipmentId,{status:"Available",lastMaintenance:new Date().toISOString().split("T")[0]})}},ae=Y=>{m(p.filter(W=>W.id!==Y))};return l.jsx(p1.Provider,{value:{equipment:e,chemicals:s,checkoutLogs:c,maintenanceTasks:p,addEquipment:g,updateEquipment:_,deleteEquipment:x,addChemical:b,updateChemical:k,deleteChemical:j,checkoutEquipment:U,checkinEquipment:V,addMaintenanceTask:q,updateMaintenanceTask:J,deleteMaintenanceTask:ae},children:r})}function kA(){const r=te.useContext(p1);if(r===void 0)throw new Error("useAppStore must be used within an AppProvider");return r}function CA(){const{maintenanceTasks:r,equipment:e,addMaintenanceTask:t,updateMaintenanceTask:s,deleteMaintenanceTask:o}=kA(),[c,h]=te.useState(!1),[p,m]=te.useState(!1),[g,_]=te.useState(null),[x,b]=te.useState({equipmentId:"",equipment:"",type:"Scheduled Maintenance",scheduledDate:"",status:"Scheduled",priority:"Medium",assignedTo:"",notes:""}),k=S=>{switch(S){case"Completed":return"bg-green-100 text-green-700";case"In Progress":return"bg-blue-100 text-blue-700";case"Pending":return"bg-orange-100 text-orange-700";case"Scheduled":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}},j=S=>{switch(S){case"High":return"text-red-600";case"Medium":return"text-orange-600";case"Low":return"text-green-600";default:return"text-gray-600"}},U=r.length,V=r.filter(S=>S.status==="Pending").length,q=r.filter(S=>S.status==="Completed").length,J=new Date,ae=new Date(J.getTime()+10080*60*1e3),Y=r.filter(S=>{const M=new Date(S.scheduledDate);return M>=J&&M<=ae}).length,W=()=>{if(!x.equipmentId||!x.scheduledDate||!x.assignedTo){Te.error("Please fill in all required fields");return}const S=e.find(M=>M.id===x.equipmentId);if(!S){Te.error("Equipment not found");return}t({...x,equipment:`${S.name} #${S.id}`}),Te.success("Maintenance task scheduled successfully!"),h(!1),D()},ie=()=>{g&&(s(g.id,x),Te.success("Maintenance task updated successfully!"),m(!1),D())},R=S=>{s(S,{status:"Completed",completedDate:new Date().toISOString().split("T")[0]}),Te.success("Task marked as completed!")},I=S=>{o(S),Te.success("Task deleted successfully!")},A=S=>{_(S),b(S),m(!0)},D=()=>{b({equipmentId:"",equipment:"",type:"Scheduled Maintenance",scheduledDate:"",status:"Scheduled",priority:"Medium",assignedTo:"",notes:""}),_(null)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:"Maintenance Tracker"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule and monitor equipment maintenance"})]}),l.jsx("button",{onClick:()=>h(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"Schedule Maintenance"})]}),l.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(Rv,{className:"w-8 h-8 text-blue-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:U}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Scheduled"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(Hw,{className:"w-8 h-8 text-orange-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:V}),l.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(Kf,{className:"w-8 h-8 text-purple-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:Y}),l.jsx("div",{className:"text-sm text-gray-600",children:"This Week"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(hl,{className:"w-8 h-8 text-green-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:q}),l.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]}),l.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"ID"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Equipment"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Type"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Scheduled Date"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Priority"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Assigned To"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(S=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.id}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:S.equipment}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.type}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.scheduledDate}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`text-sm ${j(S.priority)}`,children:S.priority})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.assignedTo}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs ${k(S.status)}`,children:S.status})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[S.status!=="Completed"&&l.jsx("button",{onClick:()=>R(S.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Mark Complete",children:l.jsx(hl,{className:"w-4 h-4 text-green-600"})}),l.jsx("button",{onClick:()=>A(S),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit",children:l.jsx(Jf,{className:"w-4 h-4 text-blue-600"})}),l.jsx("button",{onClick:()=>I(S.id),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Delete",children:l.jsx(nn,{className:"w-4 h-4 text-red-600"})})]})})]},S.id))})]})})}),(c||p)&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:c?"Schedule Maintenance":"Edit Maintenance Task"}),l.jsx("button",{onClick:()=>{h(!1),m(!1),D()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Equipment *"}),l.jsxs("select",{value:x.equipmentId,onChange:S=>b({...x,equipmentId:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",disabled:p,children:[l.jsx("option",{value:"",children:"Select Equipment"}),e.map(S=>l.jsxs("option",{value:S.id,children:[S.name," (#",S.id,")"]},S.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Type"}),l.jsxs("select",{value:x.type,onChange:S=>b({...x,type:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Scheduled Maintenance",children:"Scheduled Maintenance"}),l.jsx("option",{value:"Repair",children:"Repair"}),l.jsx("option",{value:"Calibration",children:"Calibration"}),l.jsx("option",{value:"Inspection",children:"Inspection"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Scheduled Date *"}),l.jsx("input",{type:"date",value:x.scheduledDate,onChange:S=>b({...x,scheduledDate:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Priority"}),l.jsxs("select",{value:x.priority,onChange:S=>b({...x,priority:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Low",children:"Low"}),l.jsx("option",{value:"Medium",children:"Medium"}),l.jsx("option",{value:"High",children:"High"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Status"}),l.jsxs("select",{value:x.status,onChange:S=>b({...x,status:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"Scheduled",children:"Scheduled"}),l.jsx("option",{value:"Pending",children:"Pending"}),l.jsx("option",{value:"In Progress",children:"In Progress"}),l.jsx("option",{value:"Completed",children:"Completed"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Assigned To *"}),l.jsx("input",{type:"text",value:x.assignedTo,onChange:S=>b({...x,assignedTo:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Technician name"})]}),l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Notes"}),l.jsx("textarea",{value:x.notes,onChange:S=>b({...x,notes:S.target.value}),className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",rows:3,placeholder:"Additional maintenance notes..."})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{h(!1),m(!1),D()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:c?W:ie,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:c?"Schedule Task":"Save Changes"})]})]})})]})}function AA(){const[r,e]=te.useState("Equipment Usage"),[t,s]=te.useState("Last 30 Days"),[o,c]=te.useState("PDF"),h=[{name:"Equipment Usage Report",date:"November 2024",size:"245 KB"},{name:"Chemical Inventory Report",date:"November 2024",size:"189 KB"},{name:"Maintenance Summary",date:"November 2024",size:"156 KB"},{name:"Check-in/Out Logs",date:"November 2024",size:"312 KB"}],p=()=>{Te.success(`Generating ${r} report as ${o}...`),setTimeout(()=>{Te.success(`${r} report generated successfully!`)},1500)},m=g=>{Te.success(`Downloading ${g}...`)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:"Reports"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and download comprehensive reports"})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(pf,{className:"w-8 h-8 text-blue-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:"24"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Generated This Month"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(Ey,{className:"w-8 h-8 text-green-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:"156"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Downloads"})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsx(gf,{className:"w-8 h-8 text-purple-600 mb-3"}),l.jsx("div",{className:"text-3xl text-gray-900 mb-1",children:"8"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Scheduled Reports"})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsx("h2",{className:"text-xl text-gray-900 mb-6",children:"Generate New Report"}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Report Type"}),l.jsxs("select",{value:r,onChange:g=>e(g.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{children:"Equipment Usage"}),l.jsx("option",{children:"Chemical Inventory"}),l.jsx("option",{children:"Maintenance Summary"}),l.jsx("option",{children:"Check-in/Out Logs"}),l.jsx("option",{children:"User Activity"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Date Range"}),l.jsxs("select",{value:t,onChange:g=>s(g.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{children:"Last 7 Days"}),l.jsx("option",{children:"Last 30 Days"}),l.jsx("option",{children:"This Month"}),l.jsx("option",{children:"Last Month"}),l.jsx("option",{children:"Custom Range"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Format"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>c("PDF"),className:`flex-1 px-4 py-3 border-2 rounded-lg transition-colors ${o==="PDF"?"bg-blue-50 text-blue-700 border-blue-600":"bg-gray-50 text-gray-700 border-gray-200 hover:border-gray-300"}`,children:"PDF"}),l.jsx("button",{onClick:()=>c("CSV"),className:`flex-1 px-4 py-3 border-2 rounded-lg transition-colors ${o==="CSV"?"bg-blue-50 text-blue-700 border-blue-600":"bg-gray-50 text-gray-700 border-gray-200 hover:border-gray-300"}`,children:"CSV"}),l.jsx("button",{onClick:()=>c("Excel"),className:`flex-1 px-4 py-3 border-2 rounded-lg transition-colors ${o==="Excel"?"bg-blue-50 text-blue-700 border-blue-600":"bg-gray-50 text-gray-700 border-gray-200 hover:border-gray-300"}`,children:"Excel"})]})]}),l.jsx("div",{className:"flex items-end",children:l.jsx("button",{onClick:p,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"Generate Report"})})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsx("h2",{className:"text-xl text-gray-900",children:"Recent Reports"})}),l.jsx("div",{className:"divide-y divide-gray-200",children:h.map((g,_)=>l.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center",children:l.jsx(pf,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-900",children:g.name}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 mt-1",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Kf,{className:"w-4 h-4"}),g.date]}),l.jsx("span",{children:g.size})]})]})]}),l.jsxs("button",{onClick:()=>m(g.name),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[l.jsx(Ey,{className:"w-4 h-4"}),"Download"]})]},_))})]})]})}function RA(){const[r,e]=te.useState({name:"John Doe",email:"john.doe@institution.edu",role:"Admin",department:"Chemistry"}),[t,s]=te.useState({lowStock:!0,expiry:!0,maintenance:!0,checkout:!0}),o=()=>{Te.success("Profile settings saved successfully!")},c=h=>{s(p=>({...p,[h]:!p[h]})),Te.success("Notification preferences updated!")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:"Settings"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account and application preferences"})]}),l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(yf,{className:"w-6 h-6 text-blue-600"}),l.jsx("h2",{className:"text-xl text-gray-900",children:"Profile Settings"})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Full Name"}),l.jsx("input",{type:"text",value:r.name,onChange:h=>e({...r,name:h.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",value:r.email,onChange:h=>e({...r,email:h.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Role"}),l.jsxs("select",{value:r.role,onChange:h=>e({...r,role:h.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{children:"Admin"}),l.jsx("option",{children:"Teacher"}),l.jsx("option",{children:"Lab Assistant"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-700 mb-2",children:"Department"}),l.jsx("input",{type:"text",value:r.department,onChange:h=>e({...r,department:h.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]}),l.jsx("button",{onClick:o,className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(ff,{className:"w-6 h-6 text-purple-600"}),l.jsx("h2",{className:"text-xl text-gray-900",children:"Notification Preferences"})]}),l.jsx("div",{className:"space-y-4",children:[{key:"lowStock",label:"Low stock alerts",desc:"Get notified when items are running low"},{key:"expiry",label:"Expiry warnings",desc:"Alerts for chemicals nearing expiration"},{key:"maintenance",label:"Maintenance reminders",desc:"Scheduled maintenance notifications"},{key:"checkout",label:"Checkout notifications",desc:"When equipment is checked out/in"}].map(h=>l.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-gray-900",children:h.label}),l.jsx("div",{className:"text-sm text-gray-600",children:h.desc})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t[h.key],onChange:()=>c(h.key)}),l.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},h.key))})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx(Xf,{className:"w-6 h-6 text-green-600"}),l.jsx("h2",{className:"text-xl text-gray-900",children:"Security"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>Te.info("Password change feature coming soon"),className:"w-full p-4 bg-gray-50 hover:bg-gray-100 rounded-lg text-left transition-colors",children:[l.jsx("div",{className:"text-gray-900 mb-1",children:"Change Password"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Update your password regularly for security"})]}),l.jsxs("button",{onClick:()=>Te.info("Two-factor authentication setup coming soon"),className:"w-full p-4 bg-gray-50 hover:bg-gray-100 rounded-lg text-left transition-colors",children:[l.jsx("div",{className:"text-gray-900 mb-1",children:"Two-Factor Authentication"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Add an extra layer of security"})]})]})]})]})]})}function PA(){const{userProfile:r}=nm(),[e,t]=te.useState([]),[s,o]=te.useState(!0),[c,h]=te.useState(!1),[p,m]=te.useState(!1),[g,_]=te.useState(null),[x,b]=te.useState("student"),[k,j]=te.useState({email:"",password:"",displayName:"",role:"student"});te.useEffect(()=>{U()},[]);const U=async()=>{o(!0);const W=await eA();t(W),o(!1)},V=async()=>{if(!k.email||!k.password){Te.error("Email and password are required");return}if(k.password.length<6){Te.error("Password must be at least 6 characters");return}try{const W=await vT(Mr,k.email,k.password);(await i1(W.user.uid,k.email,k.role)).success?(Te.success(` User ${k.email} created successfully!`),m(!1),q(),U()):Te.error("Failed to create user profile")}catch(W){console.error("Error adding user:",W),W.code==="auth/email-already-in-use"?Te.error("Email already in use"):W.code==="auth/weak-password"?Te.error("Password is too weak"):W.code==="auth/invalid-email"?Te.error("Invalid email format"):Te.error("Failed to create user")}},q=()=>{j({email:"",password:"",displayName:"",role:"student"})},J=async()=>{if(!g)return;(await ZC(g.uid,x)).success?(Te.success(` User role updated to ${x}`),h(!1),U()):Te.error("Failed to update user role")},ae=W=>{switch(W){case"admin":return"bg-purple-100 text-purple-700 border-purple-200";case"teacher":return"bg-blue-100 text-blue-700 border-blue-200";case"lab-assistant":return"bg-green-100 text-green-700 border-green-200";case"student":return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},Y=W=>{switch(W){case"admin":return"";case"teacher":return"";case"lab-assistant":return"";case"student":return"";default:return""}};return l.jsx(Ou,{userProfile:r,permission:"users:manage",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:" User Management"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users and their permissions"})]}),l.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[l.jsx(by,{className:"w-5 h-5"}),"Add User"]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Av,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Total Users"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:e.length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm text-gray-600",children:"Admins"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:e.filter(W=>W.role==="admin").length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm text-gray-600",children:"Teachers"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:e.filter(W=>W.role==="teacher").length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm text-gray-600",children:"Lab Assistants"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:e.filter(W=>W.role==="lab-assistant").length})]}),l.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm text-gray-600",children:"Students"})]}),l.jsx("div",{className:"text-3xl text-gray-900",children:e.filter(W=>W.role==="student").length})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[l.jsx(Xf,{className:"w-5 h-5"}),"Role Permissions Overview"]}),l.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[l.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:" Admin"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" Full access to all features"}),l.jsx("li",{children:" User management"}),l.jsx("li",{children:" Settings configuration"}),l.jsx("li",{children:" Generate reports"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:[l.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:" Teacher"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" View/Edit equipment"}),l.jsx("li",{children:" View/Edit chemicals"}),l.jsx("li",{children:" Check-in/out items"}),l.jsx("li",{children:" View reports"}),l.jsx("li",{children:" No user management"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[l.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:" Lab Assistant"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" View equipment"}),l.jsx("li",{children:" View chemicals"}),l.jsx("li",{children:" Check-in/out items"}),l.jsx("li",{children:" Create maintenance logs"}),l.jsx("li",{children:" No editing/deleting"})]})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Student"}),l.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[l.jsx("li",{children:" View equipment"}),l.jsx("li",{children:" View chemicals"}),l.jsx("li",{children:" View check-in/out logs"}),l.jsx("li",{children:" View reports"}),l.jsx("li",{children:" No editing"}),l.jsx("li",{children:" No check-in/out"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsx("h2",{className:"text-xl text-gray-900",children:"All Users"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"User"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Email"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Role"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Permissions"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Created"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm text-gray-600",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-200",children:s?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"Loading users..."})}):e.length===0?l.jsx("tr",{children:l.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[l.jsx(by,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500",children:'No users found. Click "Add User" to create one!'})]})}):e.map(W=>l.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-semibold",children:W.displayName?.[0]||W.email[0].toUpperCase()}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.displayName||"No name"}),l.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",W.uid.slice(0,8),"..."]})]})]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.email}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg border text-sm font-medium ${ae(W.role)}`,children:[l.jsx("span",{children:Y(W.role)}),W.role]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"text-xs text-gray-600",children:[W.permissions.length," permissions"]})}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.createdAt?new Date(W.createdAt).toLocaleDateString():"N/A"}),l.jsx("td",{className:"px-6 py-4",children:W.uid!==r?.uid&&l.jsx("button",{onClick:()=>{_(W),b(W.role),h(!0)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit Role",children:l.jsx(yE,{className:"w-4 h-4 text-blue-600"})})})]},W.uid))})]})})]}),p&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:" Add New User"}),l.jsx("button",{onClick:()=>{m(!1),q()},children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),l.jsxs("div",{className:"relative",children:[l.jsx(kv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"email",value:k.email,onChange:W=>j({...k,email:W.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"user@example.com"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Yf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"password",value:k.password,onChange:W=>j({...k,password:W.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"Min 6 characters"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name (Optional)"}),l.jsx("input",{type:"text",value:k.displayName,onChange:W=>j({...k,displayName:W.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",placeholder:"John Doe"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),l.jsxs("select",{value:k.role,onChange:W=>j({...k,role:W.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"student",children:" Student - View Only"}),l.jsx("option",{value:"lab-assistant",children:" Lab Assistant - View/Check-in"}),l.jsx("option",{value:"teacher",children:" Teacher - Edit Access"}),l.jsx("option",{value:"admin",children:" Admin - Full Access"})]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("p",{className:"text-xs text-blue-900 font-medium mb-1",children:["This user will have ",k.role," permissions"]}),l.jsxs("p",{className:"text-xs text-blue-700",children:[Wo[k.role].length," permissions included"]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{m(!1),q()},className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:V,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"Create User"})]})]})}),c&&g&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h3",{className:"text-2xl text-gray-900",children:"Edit User Role"}),l.jsx("button",{onClick:()=>h(!1),children:l.jsx(nn,{className:"w-6 h-6 text-gray-400 hover:text-gray-600"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"User"}),l.jsx("p",{className:"text-gray-900 font-medium",children:g.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select New Role"}),l.jsxs("select",{value:x,onChange:W=>b(W.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[l.jsx("option",{value:"student",children:" Student - View Only"}),l.jsx("option",{value:"lab-assistant",children:" Lab Assistant - View/Check-in"}),l.jsx("option",{value:"teacher",children:" Teacher - Edit Access"}),l.jsx("option",{value:"admin",children:" Admin - Full Access"})]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsxs("p",{className:"text-sm text-blue-900 font-medium mb-2",children:["Permissions for ",x,":"]}),l.jsxs("div",{className:"space-y-1",children:[Wo[x].slice(0,5).map(W=>l.jsxs("div",{className:"text-xs text-blue-700",children:[" ",W.replace(":","  ")]},W)),Wo[x].length>5&&l.jsxs("div",{className:"text-xs text-blue-600",children:["+ ",Wo[x].length-5," more..."]})]})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:J,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:"Update Role"})]})]})})]})})}function jA(){const[r,e]=te.useState(""),[t,s]=te.useState(null),[o,c]=te.useState(!1),h=[{label:"Add Equipment",query:`INSERT INTO equipment 
VALUES (
  name: "Microscope",
  category: "Biology",
  quantity: 5,
  status: "Available",
  location: "Lab A"
)`},{label:"Add Chemical",query:`INSERT INTO chemicals 
VALUES (
  name: "Hydrochloric Acid",
  formula: "HCl",
  quantity: 2.5,
  unit: "Liters",
  hazardLevel: "High",
  location: "Storage A"
)`}],p=g=>{try{const _=g.match(/INSERT INTO (\w+)\s+VALUES\s*\(([\s\S]+)\)/i);if(!_)throw new Error("Invalid query format. Use: INSERT INTO table VALUES (...)");const x=_[1].toLowerCase(),b=_[2],k={},j=b.split(",");for(const U of j){const[V,q]=U.split(":").map(J=>J.trim());if(V&&q){const J=V.replace(/['"]/g,"");let ae=q.replace(/['"]/g,"").trim();isNaN(Number(ae))||(ae=Number(ae)),k[J]=ae}}return{table:x,data:k}}catch(_){throw new Error(`Parse error: ${_.message}`)}},m=async()=>{if(!r.trim()){Te.error("Please enter a query");return}c(!0);try{const{table:g,data:_}=p(r);let x;if(g==="equipment")x=await o1(_);else if(g==="chemicals")x=await a1(_);else throw new Error(`Unknown table: ${g}`);if(x.success)s({success:!0,message:` Successfully added to ${g}`,id:x.id,data:_}),Te.success(`Data added to ${g}!`);else throw new Error("Failed to execute query")}catch(g){s({success:!1,message:` Error: ${g.message}`}),Te.error(g.message)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl text-gray-900",children:" Custom Data Entry"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Add data using SQL-like queries"})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-900 px-6 py-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Iv,{className:"w-5 h-5 text-green-400"}),l.jsx("span",{className:"text-white font-mono text-sm",children:"Query Editor"})]}),l.jsxs("button",{onClick:m,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all disabled:opacity-50",children:[l.jsx(xE,{className:"w-4 h-4"}),o?"Executing...":"Execute"]})]}),l.jsx("textarea",{value:r,onChange:g=>e(g.target.value),className:"w-full h-64 p-6 font-mono text-sm bg-gray-50 border-0 focus:outline-none resize-none",placeholder:`Enter your query here...\r
\r
Example:\r
INSERT INTO equipment \r
VALUES (\r
  name: "Microscope",\r
  category: "Biology",\r
  quantity: 5,\r
  status: "Available",\r
  location: "Lab A"\r
)`})]}),l.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Example Queries"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:h.map((g,_)=>l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:g.label}),l.jsx("button",{onClick:()=>e(g.query),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy to editor",children:l.jsx(Xw,{className:"w-4 h-4 text-gray-600"})})]}),l.jsx("pre",{className:"text-xs text-gray-600 font-mono overflow-x-auto",children:g.query})]},_))})]}),t&&l.jsx("div",{className:`rounded-xl border p-6 ${t.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[t.success?l.jsx(hl,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}):l.jsx(nn,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`text-lg font-semibold mb-2 ${t.success?"text-green-900":"text-red-900"}`,children:t.success?"Success!":"Error"}),l.jsx("p",{className:`mb-3 ${t.success?"text-green-700":"text-red-700"}`,children:t.message}),t.data&&l.jsx("div",{className:"bg-white/50 rounded-lg p-4 font-mono text-sm",children:l.jsx("pre",{children:JSON.stringify(t.data,null,2)})}),t.id&&l.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Document ID: ",t.id]})]})]})}),l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:" Syntax Guide"}),l.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"INSERT INTO table"}),l.jsx("span",{className:"ml-2",children:"- Specify table name (equipment or chemicals)"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"VALUES (...)"}),l.jsx("span",{className:"ml-2",children:"- List key-value pairs separated by commas"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:'key: "value"'}),l.jsx("span",{className:"ml-2",children:"- Each field as key: value"})]})]})]})]})}function DA({userRole:r,onSignOut:e}){const[t,s]=te.useState("overview"),[o,c]=te.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0);te.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&!o&&c(!0)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[o]);const h=()=>{switch(t){case"overview":return l.jsx(lv,{userRole:r});case"equipment":return l.jsx(_A,{});case"chemicals":return l.jsx(wA,{});case"checkinout":return l.jsx(EA,{});case"maintenance":return l.jsx(CA,{});case"reports":return l.jsx(AA,{});case"users":return l.jsx(PA,{});case"customdata":return l.jsx(jA,{});case"settings":return l.jsx(RA,{});default:return l.jsx(lv,{userRole:r})}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex overflow-hidden",children:[l.jsx(iA,{currentPage:t,setCurrentPage:s,userRole:r,isOpen:o,setIsOpen:c}),l.jsxs("div",{className:`flex-1 flex flex-col h-screen transition-all duration-300 ${o?"lg:ml-64":"lg:ml-20"}`,children:[l.jsx(aA,{onSignOut:e,userRole:r,toggleSidebar:()=>c(!o)}),l.jsx("main",{className:"flex-1 p-4 sm:p-6 overflow-auto bg-gray-50",children:h()})]})]})}function MA(){const[r,e]=te.useState("landing"),[t,s]=te.useState(null),o=m=>{s(m),e("dashboard")},c=()=>{s(null),e("landing")},h=()=>{e("signin")},p=()=>{e("landing")};return r==="signin"?l.jsxs(l.Fragment,{children:[l.jsx(Zh,{position:"top-right",richColors:!0}),l.jsx(tA,{onSignIn:o,onBack:p})]}):r==="dashboard"?l.jsx(xA,{children:l.jsxs(SA,{children:[l.jsx(Zh,{position:"top-right",richColors:!0}),l.jsx(DA,{userRole:t,onSignOut:c})]})}):l.jsxs("div",{className:"min-h-screen bg-white flex flex-col",children:[l.jsx(Zh,{position:"top-right",richColors:!0}),l.jsx(VE,{onGetStarted:h}),l.jsx(UE,{onGetStarted:h}),l.jsx("footer",{className:"bg-white border-t border-gray-200 mt-auto",children:l.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date().getFullYear()," Wayamba University of Sri Lanka"]}),l.jsx("p",{className:"text-xs text-gray-500",children:"Labventory Management System  All Rights Reserved"})]})})})]})}kw.createRoot(document.getElementById("root")).render(l.jsx(MA,{}));
